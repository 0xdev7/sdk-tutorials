(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{640:function(e,l,c){"use strict";c.r(l);var t=c(0),a=Object(t.a)({},(function(){var e=this,l=e.$createElement,c=e._self._c||l;return c("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[c("h1",{attrs:{id:"delete-name"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#delete-name"}},[e._v("#")]),e._v(" Delete Name")]),e._v(" "),c("h2",{attrs:{id:"msgdeletename"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#msgdeletename"}},[e._v("#")]),e._v(" MsgDeleteName")]),e._v(" "),c("p",[e._v("Now it is time to update the "),c("code",[e._v("Msg")]),e._v(" for deleting names. Let's rename our "),c("code",[e._v("MsgDeleteWhois.go")]),e._v(" to "),c("code",[e._v("MsgDeleteName.go")])]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"bXYgeC9uYW1lc2VydmljZS90eXBlcy9Nc2dEZWxldGVXaG9pcy5nbyB4L25hbWVzZXJ2aWNlL3R5cGVzL01zZ0RlbGV0ZU5hbWUuZ28K"}}),e._v(" "),c("p",[e._v("add it to the "),c("code",[e._v("./x/nameservice/types/MsgDeleteName.go")]),e._v(" file.")]),e._v(" "),c("p",[e._v("Replace "),c("code",[e._v("MsgDeleteWhois")]),e._v(" by "),c("code",[e._v("MsgDeleteName")]),e._v(":")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"bXYgeC9uYW1lc2VydmljZS90eXBlcy9Nc2dEZWxldGVXaG9pcy5nbyB4L25hbWVzZXJ2aWNlL3R5cGVzL01zZ0RlbGV0ZU5hbWUuZ28K"}}),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKaW1wb3J0ICgKCXNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CglzZGtlcnJvcnMgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcy9lcnJvcnMmcXVvdDsKKQoKdmFyIF8gc2RrLk1zZyA9ICZhbXA7TXNnRGVsZXRlTmFtZXt9Cgp0eXBlIE1zZ0RlbGV0ZU5hbWUgc3RydWN0IHsKCUlEICAgICAgc3RyaW5nICAgICAgICAgYGpzb246JnF1b3Q7aWQmcXVvdDsgeWFtbDomcXVvdDtpZCZxdW90O2AKCUNyZWF0b3Igc2RrLkFjY0FkZHJlc3MgYGpzb246JnF1b3Q7Y3JlYXRvciZxdW90OyB5YW1sOiZxdW90O2NyZWF0b3ImcXVvdDtgCn0KCmZ1bmMgTmV3TXNnRGVsZXRlTmFtZShpZCBzdHJpbmcsIGNyZWF0b3Igc2RrLkFjY0FkZHJlc3MpIE1zZ0RlbGV0ZU5hbWUgewoJcmV0dXJuIE1zZ0RlbGV0ZU5hbWV7CgkJSUQ6ICAgICAgaWQsCgkJQ3JlYXRvcjogY3JlYXRvciwKCX0KfQoKZnVuYyAobXNnIE1zZ0RlbGV0ZU5hbWUpIFJvdXRlKCkgc3RyaW5nIHsKCXJldHVybiBSb3V0ZXJLZXkKfQoKZnVuYyAobXNnIE1zZ0RlbGV0ZU5hbWUpIFR5cGUoKSBzdHJpbmcgewoJcmV0dXJuICZxdW90O0RlbGV0ZU5hbWUmcXVvdDsKfQoKZnVuYyAobXNnIE1zZ0RlbGV0ZU5hbWUpIEdldFNpZ25lcnMoKSBbXXNkay5BY2NBZGRyZXNzIHsKCXJldHVybiBbXXNkay5BY2NBZGRyZXNze3Nkay5BY2NBZGRyZXNzKG1zZy5DcmVhdG9yKX0KfQoKZnVuYyAobXNnIE1zZ0RlbGV0ZU5hbWUpIEdldFNpZ25CeXRlcygpIFtdYnl0ZSB7CglieiA6PSBNb2R1bGVDZGMuTXVzdE1hcnNoYWxKU09OKG1zZykKCXJldHVybiBzZGsuTXVzdFNvcnRKU09OKGJ6KQp9CgpmdW5jIChtc2cgTXNnRGVsZXRlTmFtZSkgVmFsaWRhdGVCYXNpYygpIGVycm9yIHsKCWlmIG1zZy5DcmVhdG9yLkVtcHR5KCkgewoJCXJldHVybiBzZGtlcnJvcnMuV3JhcChzZGtlcnJvcnMuRXJySW52YWxpZEFkZHJlc3MsICZxdW90O2NyZWF0b3IgY2FuJ3QgYmUgZW1wdHkmcXVvdDspCgl9CglyZXR1cm4gbmlsCn0K"}}),e._v(" "),c("p",[e._v("Replace "),c("code",[e._v("handlerMsgDeleteWhois")]),e._v(" by "),c("code",[e._v("handlerMsgDeleteName")]),e._v(":")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"bXYgeC9uYW1lc2VydmljZS9oYW5kbGVyTXNnRGVsZXRlV2hvaXMuZ28geC9uYW1lc2VydmljZS9oYW5kbGVyTXNnRGVsZXRlTmFtZS5nbwo="}}),e._v(" "),c("p",[e._v("Finally, define the "),c("code",[e._v("DeleteName")]),e._v(" "),c("code",[e._v("handler")]),e._v(" function which performs the state transitions triggered by the message. Keep in mind that at this point the message has had its "),c("code",[e._v("ValidateBasic")]),e._v(" function run so there has been some input verification. However, "),c("code",[e._v("ValidateBasic")]),e._v(" cannot query application state. Validation logic that is dependent on network state (e.g. account balances) should be performed in the "),c("code",[e._v("handler")]),e._v(" function.")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBuYW1lc2VydmljZQoKaW1wb3J0ICgKCXNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CglzZGtlcnJvcnMgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcy9lcnJvcnMmcXVvdDsKCgkmcXVvdDtnaXRodWIuY29tL3VzZXIvbmFtZXNlcnZpY2UveC9uYW1lc2VydmljZS9rZWVwZXImcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vdXNlci9uYW1lc2VydmljZS94L25hbWVzZXJ2aWNlL3R5cGVzJnF1b3Q7CikKCi8vIEhhbmRsZSBhIG1lc3NhZ2UgdG8gZGVsZXRlIG5hbWUKZnVuYyBoYW5kbGVNc2dEZWxldGVOYW1lKGN0eCBzZGsuQ29udGV4dCwgayBrZWVwZXIuS2VlcGVyLCBtc2cgdHlwZXMuTXNnRGVsZXRlTmFtZSkgKCpzZGsuUmVzdWx0LCBlcnJvcikgewoJaWYgIWsuV2hvaXNFeGlzdHMoY3R4LCBtc2cuSUQpIHsKCQkvLyByZXBsYWNlIHdpdGggRXJyS2V5Tm90Rm91bmQgZm9yIDAuMzkrCgkJcmV0dXJuIG5pbCwgc2RrZXJyb3JzLldyYXAoc2RrZXJyb3JzLkVyckludmFsaWRSZXF1ZXN0LCBtc2cuSUQpCgl9CglpZiAhbXNnLkNyZWF0b3IuRXF1YWxzKGsuR2V0V2hvaXNPd25lcihjdHgsIG1zZy5JRCkpIHsKCQlyZXR1cm4gbmlsLCBzZGtlcnJvcnMuV3JhcChzZGtlcnJvcnMuRXJyVW5hdXRob3JpemVkLCAmcXVvdDtJbmNvcnJlY3QgT3duZXImcXVvdDspCgl9CgoJay5EZWxldGVXaG9pcyhjdHgsIG1zZy5JRCkKCXJldHVybiAmYW1wO3Nkay5SZXN1bHR7fSwgbmlsCn0K"}}),e._v(" "),c("p",[e._v("Afterwards, we'll follow the same steps as earlier and add the "),c("code",[e._v("MsgDeleteName")]),e._v(" handler to the module router in "),c("code",[e._v("./x/nameservice/handler.go")]),e._v(":")]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gTmV3SGFuZGxlciByZXR1cm5zIGEgaGFuZGxlciBmb3IgJnF1b3Q7bmFtZXNlcnZpY2UmcXVvdDsgdHlwZSBtZXNzYWdlcy4KZnVuYyBOZXdIYW5kbGVyKGtlZXBlciBLZWVwZXIpIHNkay5IYW5kbGVyIHsKCXJldHVybiBmdW5jKGN0eCBzZGsuQ29udGV4dCwgbXNnIHNkay5Nc2cpICgqc2RrLlJlc3VsdCwgZXJyb3IpIHsKCQlzd2l0Y2ggbXNnIDo9IG1zZy4odHlwZSkgewoJCWNhc2UgTXNnU2V0TmFtZToKCQkJcmV0dXJuIGhhbmRsZU1zZ1NldE5hbWUoY3R4LCBrZWVwZXIsIG1zZykKCQljYXNlIE1zZ0J1eU5hbWU6CgkJCXJldHVybiBoYW5kbGVNc2dCdXlOYW1lKGN0eCwga2VlcGVyLCBtc2cpCgkJY2FzZSBNc2dEZWxldGVOYW1lOgoJCQlyZXR1cm4gaGFuZGxlTXNnRGVsZXRlTmFtZShjdHgsIGtlZXBlciwgbXNnKQoJCWRlZmF1bHQ6CgkJCXJldHVybiBuaWwsIHNka2Vycm9ycy5XcmFwKHNka2Vycm9ycy5FcnJVbmtub3duUmVxdWVzdCwgZm10LlNwcmludGYoJnF1b3Q7VW5yZWNvZ25pemVkIG5hbWVzZXJ2aWNlIE1zZyB0eXBlOiAldiZxdW90OywgbXNnLlR5cGUoKSkpCgkJfQoJfQp9Cg=="}}),e._v(" "),c("p",[e._v("Let's rename our "),c("code",[e._v("handlerMsgDeleteWhois.go")]),e._v(" to "),c("code",[e._v("handlerMsgDeleteName.go")])]),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"bXYgeC9uYW1lc2VydmljZS9oYW5kbGVyTXNnRGVsZXRlV2hvaXMuZ28geC9uYW1lc2VydmljZS9oYW5kbGVyTXNnRGVsZXRlTmFtZS5nbwo="}}),e._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBuYW1lc2VydmljZQoKaW1wb3J0ICgKCXNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CglzZGtlcnJvcnMgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcy9lcnJvcnMmcXVvdDsKCgkmcXVvdDtnaXRodWIuY29tL3VzZXIvbmFtZXNlcnZpY2UveC9uYW1lc2VydmljZS9rZWVwZXImcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vdXNlci9uYW1lc2VydmljZS94L25hbWVzZXJ2aWNlL3R5cGVzJnF1b3Q7CikKCi8vIEhhbmRsZSBhIG1lc3NhZ2UgdG8gZGVsZXRlIG5hbWUKZnVuYyBoYW5kbGVNc2dEZWxldGVOYW1lKGN0eCBzZGsuQ29udGV4dCwgayBrZWVwZXIuS2VlcGVyLCBtc2cgdHlwZXMuTXNnRGVsZXRlTmFtZSkgKCpzZGsuUmVzdWx0LCBlcnJvcikgewoJaWYgIWsuV2hvaXNFeGlzdHMoY3R4LCBtc2cuSUQpIHsKCQkvLyByZXBsYWNlIHdpdGggRXJyS2V5Tm90Rm91bmQgZm9yIDAuMzkrCgkJcmV0dXJuIG5pbCwgc2RrZXJyb3JzLldyYXAoc2RrZXJyb3JzLkVyckludmFsaWRSZXF1ZXN0LCBtc2cuSUQpCgl9CglpZiAhbXNnLkNyZWF0b3IuRXF1YWxzKGsuR2V0V2hvaXNPd25lcihjdHgsIG1zZy5JRCkpIHsKCQlyZXR1cm4gbmlsLCBzZGtlcnJvcnMuV3JhcChzZGtlcnJvcnMuRXJyVW5hdXRob3JpemVkLCAmcXVvdDtJbmNvcnJlY3QgT3duZXImcXVvdDspCgl9CgoJay5EZWxldGVXaG9pcyhjdHgsIG1zZy5JRCkKCXJldHVybiAmYW1wO3Nkay5SZXN1bHR7fSwgbmlsCn0K"}}),e._v(" "),c("h3",{attrs:{id:"now-that-you-have-your-msgs-and-handlers-defined-it-s-time-to-learn-about-making-the-data-from-these-transactions-available-for-querying"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#now-that-you-have-your-msgs-and-handlers-defined-it-s-time-to-learn-about-making-the-data-from-these-transactions-available-for-querying"}},[e._v("#")]),e._v(" Now that you have your "),c("code",[e._v("Msgs")]),e._v(" and "),c("code",[e._v("Handlers")]),e._v(" defined it's time to learn about making the data from these transactions [available for querying.")])],1)}),[],!1,null,null,null);l.default=a.exports}}]);