(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{744:function(e,t,l){"use strict";l.r(t);var a=l(0),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[l("h1",{attrs:{id:"querier"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#querier"}},[e._v("#")]),e._v(" Querier")]),e._v(" "),l("p",[e._v("In order to query the data of our app we need to make it accessible using our "),l("code",[e._v("Querier")]),e._v(". This piece of the app works in tandem with the "),l("code",[e._v("Keeper")]),e._v(" to access state and return it. The "),l("code",[e._v("Querier")]),e._v(" is defined in "),l("code",[e._v("./x/scavenge/keeper/querier.go")]),e._v(". Our "),l("code",[e._v("starport")]),e._v(" tool starts us out with some suggestions on how it should look, and similarly to our "),l("code",[e._v("Handler")]),e._v(" we want to handle different queried routes.")]),e._v(" "),l("p",[e._v("You could make many different routes within the "),l("code",[e._v("Querier")]),e._v(" for many different types of queries, but we will make just three:")]),e._v(" "),l("ul",[l("li",[l("code",[e._v("listCommit")]),e._v(" will list all commits")]),e._v(" "),l("li",[l("code",[e._v("getCommit")]),e._v(" will get a single commit by "),l("code",[e._v("solutionScavengerHash")])]),e._v(" "),l("li",[l("code",[e._v("listScavenge")]),e._v(" will list all scavenges")]),e._v(" "),l("li",[l("code",[e._v("getScavenge")]),e._v(" will get a single scavenge by "),l("code",[e._v("solutionHash")])])]),e._v(" "),l("p",[e._v("Combined into a switch statement and with each of the functions fleshed out, the file should look as follows:")]),e._v(" "),l("h4",{attrs:{id:"querier-go"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#querier-go"}},[e._v("#")]),e._v(" "),l("code",[e._v("querier.go")])]),e._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCiAgLy8gdGhpcyBsaW5lIGlzIHVzZWQgYnkgc3RhcnBvcnQgc2NhZmZvbGRpbmcgIyAxCgkmcXVvdDtnaXRodWIuY29tL2dpdGh1Yi11c2VybmFtZS9zY2F2ZW5nZS94L3NjYXZlbmdlL3R5cGVzJnF1b3Q7CgkJCgkKCQkKCWFiY2kgJnF1b3Q7Z2l0aHViLmNvbS90ZW5kZXJtaW50L3RlbmRlcm1pbnQvYWJjaS90eXBlcyZxdW90OwoKCXNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CglzZGtlcnJvcnMgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcy9lcnJvcnMmcXVvdDsKKQoKLy8gTmV3UXVlcmllciBjcmVhdGVzIGEgbmV3IHF1ZXJpZXIgZm9yIHNjYXZlbmdlIGNsaWVudHMuCmZ1bmMgTmV3UXVlcmllcihrIEtlZXBlcikgc2RrLlF1ZXJpZXIgewoJcmV0dXJuIGZ1bmMoY3R4IHNkay5Db250ZXh0LCBwYXRoIFtdc3RyaW5nLCByZXEgYWJjaS5SZXF1ZXN0UXVlcnkpIChbXWJ5dGUsIGVycm9yKSB7CgkJc3dpdGNoIHBhdGhbMF0gewogICAgLy8gdGhpcyBsaW5lIGlzIHVzZWQgYnkgc3RhcnBvcnQgc2NhZmZvbGRpbmcgIyAyCgkJY2FzZSB0eXBlcy5RdWVyeUxpc3RDb21taXQ6CgkJCXJldHVybiBsaXN0Q29tbWl0KGN0eCwgaykKCQljYXNlIHR5cGVzLlF1ZXJ5R2V0Q29tbWl0OgoJCQlyZXR1cm4gZ2V0Q29tbWl0KGN0eCwgcGF0aFsxOl0sIGspCgkJY2FzZSB0eXBlcy5RdWVyeUxpc3RTY2F2ZW5nZToKCQkJcmV0dXJuIGxpc3RTY2F2ZW5nZShjdHgsIGspCgkJY2FzZSB0eXBlcy5RdWVyeUdldFNjYXZlbmdlOgoJCQlyZXR1cm4gZ2V0U2NhdmVuZ2UoY3R4LCBwYXRoWzE6XSwgaykKCQlkZWZhdWx0OgoJCQlyZXR1cm4gbmlsLCBzZGtlcnJvcnMuV3JhcChzZGtlcnJvcnMuRXJyVW5rbm93blJlcXVlc3QsICZxdW90O3Vua25vd24gc2NhdmVuZ2UgcXVlcnkgZW5kcG9pbnQmcXVvdDspCgkJfQoJfQp9Cg=="}}),e._v(" "),l("h2",{attrs:{id:"types"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#types"}},[e._v("#")]),e._v(" Types")]),e._v(" "),l("p",[e._v("You may notice that we use four different imported types on our initial switch statement. These are defined within our "),l("code",[e._v("./x/scavenge/types/querier.go")]),e._v(" file as simple strings. That file should look like the following:")]),e._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKY29uc3QgKAoJUXVlcnlMaXN0U2NhdmVuZ2UgPSAmcXVvdDtsaXN0LXNjYXZlbmdlJnF1b3Q7CglRdWVyeUdldFNjYXZlbmdlICA9ICZxdW90O2dldC1zY2F2ZW5nZSZxdW90OwopCgpjb25zdCAoCglRdWVyeUxpc3RDb21taXQgPSAmcXVvdDtsaXN0LWNvbW1pdCZxdW90OwoJUXVlcnlHZXRDb21taXQgID0gJnF1b3Q7Z2V0LWNvbW1pdCZxdW90OwopCg=="}}),e._v(" "),l("p",[e._v("Our queries are rather simple since we've already outfitted our "),l("code",[e._v("Keeper")]),e._v(" with all the necessary functions to access state. You can see the iterator being used here as well.")]),e._v(" "),l("p",[e._v("Now that we have all of the basic actions of our module created, we want to make them accessible. We can do this with a CLI client and a REST client. For this tutorial we will be creating a CLI client. If you are interested in what goes into making a REST client, check out the "),l("RouterLink",{attrs:{to:"/nameservice/tutorial/00-intro.html"}},[e._v("Nameservice Tutorial")]),e._v(".")],1),e._v(" "),l("p",[e._v("Let's take a look at what goes into making a CLI.")])],1)}),[],!1,null,null,null);t.default=o.exports}}]);