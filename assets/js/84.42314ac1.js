(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{685:function(l,c,Z){"use strict";Z.r(c);var b=Z(0),y=Object(b.a)({},(function(){var l=this,c=l.$createElement,Z=l._self._c||c;return Z("ContentSlotsDistributor",{attrs:{"slot-key":l.$parent.slotKey}},[Z("h1",{attrs:{id:"create-the-orderbook"}},[Z("a",{staticClass:"header-anchor",attrs:{href:"#create-the-orderbook"}},[l._v("#")]),l._v(" Create the Orderbook")]),l._v(" "),Z("p",[l._v("In this chapter you implement the code for the orderbook, buy orders and sell orders.")]),l._v(" "),Z("p",[l._v("In this chapter you will create a "),Z("code",[l._v("orderbook.go")]),l._v(" file with the interface for the orderbook.\nThe orderbook will allow to publish buy or sell orders. The orderbook for a certain pair of token has to be registered on the orderbook first. After registering a pair of token, you can add sell orders and buy orders to this orderbook.\nYou will create the "),Z("code",[l._v("sellorder.go")]),l._v(" file with the interface of a sell order. A sell order contains the data of the token denomination and a price you offer to sell a token for.\nYou will create the "),Z("code",[l._v("buyorder.go")]),l._v(" file with the interface of a buy order. A buy order contains the data of the token denomination and a price you offer to buy a token for. Buy orders and sell orders will live on different blockchain apps.\nWhen a buy and a sell order match, the exchange will be executed.")]),l._v(" "),Z("h2",{attrs:{id:"add-the-orderbook"}},[Z("a",{staticClass:"header-anchor",attrs:{href:"#add-the-orderbook"}},[l._v("#")]),l._v(" Add The Orderbook")]),l._v(" "),Z("p",[l._v("The protobuffer definition defines the data that an orderbook has.\nAdd the "),Z("code",[l._v("Order")]),l._v(" message to the "),Z("code",[l._v("order.proto")]),l._v(" file.")]),l._v(" "),Z("tm-code-block",{staticClass:"codeblock",attrs:{language:"proto",base64:"Ly8gcHJvdG8vb3JkZXIucHJvdG8Kc3ludGF4ID0gJnF1b3Q7cHJvdG8zJnF1b3Q7OwpwYWNrYWdlIHRlbmRlcm1pbnQuaW50ZXJjaGFuZ2UuaWJjZGV4OwoKb3B0aW9uIGdvX3BhY2thZ2UgPSAmcXVvdDtnaXRodWIuY29tL3RlbmRlcm1pbnQvaW50ZXJjaGFuZ2UveC9pYmNkZXgvdHlwZXMmcXVvdDs7CgptZXNzYWdlIE9yZGVyIHsKICBpbnQzMiBpZCA9IDE7CiAgc3RyaW5nIGNyZWF0b3IgPSAyOwogIGludDMyIGFtb3VudCA9IDM7CiAgaW50MzIgcHJpY2UgPSA0Owp9Cg=="}}),l._v(" "),Z("p",[l._v("Create a new file "),Z("code",[l._v("orderbook.go")]),l._v(" in the "),Z("code",[l._v("ibcdex")]),l._v(" module "),Z("code",[l._v("types")]),l._v(" directory.\nIn this file, you will define the logic for creating a new orderbook.")]),l._v(" "),Z("p",[l._v("Create a "),Z("code",[l._v("orderbook.go")]),l._v(" file and add the code:")]),l._v(" "),Z("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC9pYmNkZXgvb3JkZXJib29rLmdvCnBhY2thZ2UgdHlwZXMKCmltcG9ydCAoCgkmcXVvdDtlcnJvcnMmcXVvdDsKCSZxdW90O3NvcnQmcXVvdDsKKQoKY29uc3QgKAoJTWF4QW1vdW50ID0gaW50MzIoMTAwMDAwKQoJTWF4UHJpY2UgID0gaW50MzIoMTAwMDAwKQopCgp2YXIgKAoJRXJyTWF4QW1vdW50ICAgICA9IGVycm9ycy5OZXcoJnF1b3Q7bWF4IGFtb3VudCByZWFjaGVkJnF1b3Q7KQoJRXJyTWF4UHJpY2UgICAgICA9IGVycm9ycy5OZXcoJnF1b3Q7bWF4IHByaWNlIHJlYWNoZWQmcXVvdDspCglFcnJaZXJvQW1vdW50ICAgID0gZXJyb3JzLk5ldygmcXVvdDthbW91bnQgaXMgemVybyZxdW90OykKCUVyclplcm9QcmljZSAgICAgPSBlcnJvcnMuTmV3KCZxdW90O3ByaWNlIGlzIHplcm8mcXVvdDspCglFcnJPcmRlck5vdEZvdW5kID0gZXJyb3JzLk5ldygmcXVvdDtvcmRlciBub3QgZm91bmQmcXVvdDspCikKCnR5cGUgT3JkZXJCb29rIGludGVyZmFjZSB7Cglzb3J0LkludGVyZmFjZQoJSW5zZXJ0T3JkZXIoT3JkZXIpIE9yZGVyQm9vawoJR2V0T3JkZXIoaW50KSAoT3JkZXIsIGVycm9yKQoJU2V0T3JkZXIoaW50LCBPcmRlcikgKE9yZGVyQm9vaywgZXJyb3IpCglHZXROZXh0T3JkZXJJRCgpIGludDMyCglJbmNyZW1lbnROZXh0T3JkZXJJRCgpIE9yZGVyQm9vawoJR2V0T3JkZXJGcm9tSUQoaW50MzIpIChPcmRlciwgZXJyb3IpCglSZW1vdmVPcmRlckZyb21JRChpbnQzMikgKE9yZGVyQm9vaywgZXJyb3IpCn0KCi8vIFVwZGF0ZU9yZGVyQm9vayB1cGRhdGVzIGFuIG9yZGVyIGJvb2sgd2l0aCBhbiBvcmRlcgovLyBpZiB0aGUgSUQgYWxyZWFkeSBleGlzdCwgaXQgYXBwZW5kIHRoZSBhbW91bnQgdG8gdGhlIGV4aXN0aW5nIG9yZGVyICh3aXRob3V0IGNoZWNraW5nIHByaWNlKQovLyBpZiBpdCBkb2Vzbid0IGV4aXN0LCB0aGUgb3JkZXIgaXMgaW5zZXJ0ZWQKZnVuYyBVcGRhdGVPcmRlckJvb2soYm9vayBPcmRlckJvb2ssIG9yZGVyIE9yZGVyKSBPcmRlckJvb2sgewoJLy8gU2VhcmNoIG9mIHRoZSBvcmRlciBvZiB0aGUgc2FtZSBJRAoJdmFyIGZvdW5kIGJvb2wKCXZhciBvcmRlclRvVXBkYXRlIE9yZGVyCgl2YXIgaSBpbnQKCWZvciBpID0gYm9vay5MZW4oKSAtIDE7IGkgJmd0Oz0gMDsgaS0tIHsKCQlvcmRlclRvVXBkYXRlLCBfID0gYm9vay5HZXRPcmRlcihpKQoJCWlmIG9yZGVyVG9VcGRhdGUuSWQgPT0gb3JkZXIuSWQgewoJCQlmb3VuZCA9IHRydWUKCQkJYnJlYWsKCQl9Cgl9CgoJLy8gSWYgb3JkZXIgZm91bmQKCWlmIGZvdW5kIHsKCQlvcmRlclRvVXBkYXRlLkFtb3VudCArPSBvcmRlci5BbW91bnQKCQlib29rLCBfID0gYm9vay5TZXRPcmRlcihpLCBvcmRlclRvVXBkYXRlKQoJfSBlbHNlIHsKCQlib29rID0gYm9vay5JbnNlcnRPcmRlcihvcmRlcikKCX0KCglyZXR1cm4gYm9vawp9CgovLyBSZXN0b3JlT3JkZXJCb29rIHJlc3RvcmVzIHRoZSBvcmRlciBib29rIGZyb20gYSBvcmRlciBib29rIHRyYW5zaXRpb24KZnVuYyBSZXN0b3JlT3JkZXJCb29rKGJvb2sgT3JkZXJCb29rLCBsaXF1aWRhdGVkIFtdT3JkZXIpIE9yZGVyQm9vayB7CgkvLyBSZXN0b3JlIGFsbCBsaXF1aWRhdGlvbiBpbnNpZGUgdGhlIG9yZGVyIGJvb2sKCWZvciBfLCBsaXF1aWRhdGlvbiA6PSByYW5nZSBsaXF1aWRhdGVkIHsKCQlib29rID0gVXBkYXRlT3JkZXJCb29rKGJvb2ssIGxpcXVpZGF0aW9uKQoJfQoKCXJldHVybiBib29rCn0KCi8vIEFwcGVuZE9yZGVyIGluaXRpYWxpemVzIGFuZCBhcHBlbmRzIGEgbmV3IG9yZGVyIGluIGEgYm9vayBmcm9tIG9yZGVyIGluZm9ybWF0aW9uCmZ1bmMgQXBwZW5kT3JkZXIoYm9vayBPcmRlckJvb2ssIGNyZWF0b3Igc3RyaW5nLCBhbW91bnQgaW50MzIsIHByaWNlIGludDMyKSAoT3JkZXJCb29rLCBpbnQzMiwgZXJyb3IpIHsKCWlmIGVyciA6PSBjaGVja0Ftb3VudEFuZFByaWNlKGFtb3VudCwgcHJpY2UpOyBlcnIgIT0gbmlsIHsKCQlyZXR1cm4gYm9vaywgMCwgZXJyCgl9CgoJLy8gSW5pdGlhbGl6ZSB0aGUgb3JkZXIKCXZhciBvcmRlciBPcmRlcgoJb3JkZXIuSWQgPSBib29rLkdldE5leHRPcmRlcklEKCkKCW9yZGVyLkNyZWF0b3IgPSBjcmVhdG9yCglvcmRlci5BbW91bnQgPSBhbW91bnQKCW9yZGVyLlByaWNlID0gcHJpY2UKCgkvLyBJbmNyZW1lbnQgSUQgdHJhY2tlcgoJYm9vayA9IGJvb2suSW5jcmVtZW50TmV4dE9yZGVySUQoKQoKCS8vIEluc2VydCB0aGUgb3JkZXIKCWJvb2sgPSBib29rLkluc2VydE9yZGVyKG9yZGVyKQoKCXJldHVybiBib29rLCBvcmRlci5JZCwgbmlsCn0KCi8vIGNoZWNrQW1vdW50QW5kUHJpY2UgY2hlY2tzIGNvcnJlY3QgYW1vdW50IG9yIHByaWNlCmZ1bmMgY2hlY2tBbW91bnRBbmRQcmljZShhbW91bnQgaW50MzIsIHByaWNlIGludDMyKSBlcnJvciB7CglpZiBhbW91bnQgPT0gaW50MzIoMCkgewoJCXJldHVybiBFcnJaZXJvQW1vdW50Cgl9CglpZiBhbW91bnQgJmd0OyBNYXhBbW91bnQgewoJCXJldHVybiBFcnJNYXhBbW91bnQKCX0KCWlmIHByaWNlID09IGludDMyKDApIHsKCQlyZXR1cm4gRXJyWmVyb1ByaWNlCgl9CglpZiBwcmljZSAmZ3Q7IE1heFByaWNlIHsKCQlyZXR1cm4gRXJyTWF4UHJpY2UKCX0KCglyZXR1cm4gbmlsCn0K"}}),l._v(" "),Z("h2",{attrs:{id:"add-the-sellorder"}},[Z("a",{staticClass:"header-anchor",attrs:{href:"#add-the-sellorder"}},[l._v("#")]),l._v(" Add The Sellorder")]),l._v(" "),Z("p",[l._v("Modify the "),Z("code",[l._v("sellOrderBook.proto")]),l._v(" file to have the fields for creating a sell order on the orderbook.\nThe proto definition for the "),Z("code",[l._v("SellOrderBook")]),l._v(" should look like follows:")]),l._v(" "),Z("tm-code-block",{staticClass:"codeblock",attrs:{language:"proto",base64:"Ly8gcHJvdG8vc2VsbE9yZGVyQm9vay5wcm90bwpzeW50YXggPSAmcXVvdDtwcm90bzMmcXVvdDs7CnBhY2thZ2UgdGVuZGVybWludC5pbnRlcmNoYW5nZS5pYmNkZXg7CgpvcHRpb24gZ29fcGFja2FnZSA9ICZxdW90O2dpdGh1Yi5jb20vdGVuZGVybWludC9pbnRlcmNoYW5nZS94L2liY2RleC90eXBlcyZxdW90OzsKCmltcG9ydCAmcXVvdDtpYmNkZXgvb3JkZXIucHJvdG8mcXVvdDs7CgptZXNzYWdlIFNlbGxPcmRlckJvb2sgewogIHN0cmluZyBpbmRleCA9IDI7CiAgaW50MzIgb3JkZXJJRFRyYWNrID0gMzsKICBzdHJpbmcgYW1vdW50RGVub20gPSA0OwogIHN0cmluZyBwcmljZURlbm9tID0gNTsKICByZXBlYXRlZCBPcmRlciBvcmRlcnMgPSA2Owp9Cg=="}}),l._v(" "),Z("p",[l._v("For the code of the sell orders, create a "),Z("code",[l._v("sellorder.go")]),l._v(" file in the "),Z("code",[l._v("types")]),l._v(" directory and add the following code:")]),l._v(" "),Z("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKaW1wb3J0ICgKCSZxdW90O3NvcnQmcXVvdDsKKQoKLy8gc29ydC5JbnRlcmZhY2UKZnVuYyAoYm9vayBTZWxsT3JkZXJCb29rKSBMZW4oKSBpbnQgewoJcmV0dXJuIGxlbihib29rLk9yZGVycykKfQpmdW5jIChib29rIFNlbGxPcmRlckJvb2spIExlc3MoaSwgaiBpbnQpIGJvb2wgewoJcmV0dXJuIGJvb2suT3JkZXJzW2ldLlByaWNlICZndDsgYm9vay5PcmRlcnNbal0uUHJpY2UKfQpmdW5jIChib29rIFNlbGxPcmRlckJvb2spIFN3YXAoaSwgaiBpbnQpIHsKCWJvb2suT3JkZXJzW2ldLCBib29rLk9yZGVyc1tqXSA9IGJvb2suT3JkZXJzW2pdLCBib29rLk9yZGVyc1tpXQp9CgovLyBJbnNlcnRPcmRlciBpbnNlcnRzIHRoZSBvcmRlciBpbiB0aGUgZGVjcmVhc2luZyBvcmRlciBpbiB0aGUgYm9vawovLyBpdCBkb2Vzbid0IHNldCB0aGUgSUQgb3IgY2hlY2sgaWYgdGhlIElEIGFscmVhZHkgZXhpc3QKZnVuYyAoYm9vayBTZWxsT3JkZXJCb29rKSBJbnNlcnRPcmRlcihvcmRlciBPcmRlcikgT3JkZXJCb29rIHsKCS8vIEluc2VydCB0aGUgb3JkZXIgaW4gdGhlIGluY3JlYXNpbmcgb3JkZXIKCWlmIGxlbihib29rLk9yZGVycykgJmd0OyAwIHsKCQlpIDo9IHNvcnQuU2VhcmNoKGxlbihib29rLk9yZGVycyksIGZ1bmMoaSBpbnQpIGJvb2wgeyByZXR1cm4gYm9vay5PcmRlcnNbaV0uUHJpY2UgJmx0OyBvcmRlci5QcmljZSB9KQoJCW9yZGVycyA6PSBhcHBlbmQoYm9vay5PcmRlcnMsICZhbXA7b3JkZXIpCgkJY29weShvcmRlcnNbaSsxOl0sIG9yZGVyc1tpOl0pCgkJb3JkZXJzW2ldID0gJmFtcDtvcmRlcgoJCWJvb2suT3JkZXJzID0gb3JkZXJzCgl9IGVsc2UgewoJCWJvb2suT3JkZXJzID0gYXBwZW5kKGJvb2suT3JkZXJzLCAmYW1wO29yZGVyKQoJfQoKCXJldHVybiBib29rCn0KCi8vIEdldE9yZGVyIGdldHMgdGhlIG9yZGVyIGZyb20gYW4gaW5kZXgKZnVuYyAoYm9vayBTZWxsT3JkZXJCb29rKSBHZXRPcmRlcihpbmRleCBpbnQpIChvcmRlciBPcmRlciwgZXJyIGVycm9yKSB7CglpZiBpbmRleCAmZ3Q7PSBsZW4oYm9vay5PcmRlcnMpIHsKCQlyZXR1cm4gb3JkZXIsIEVyck9yZGVyTm90Rm91bmQKCX0KCglyZXR1cm4gKmJvb2suT3JkZXJzW2luZGV4XSwgbmlsCn0KCi8vIFNldE9yZGVyIGdldHMgdGhlIG9yZGVyIGZyb20gYW4gaW5kZXgKZnVuYyAoYm9vayBTZWxsT3JkZXJCb29rKSBTZXRPcmRlcihpbmRleCBpbnQsIG9yZGVyIE9yZGVyKSAoT3JkZXJCb29rLCBlcnJvcikgewoJaWYgaW5kZXggJmd0Oz0gbGVuKGJvb2suT3JkZXJzKSB7CgkJcmV0dXJuIGJvb2ssIEVyck9yZGVyTm90Rm91bmQKCX0KCglib29rLk9yZGVyc1tpbmRleF0gPSAmYW1wO29yZGVyCgoJcmV0dXJuIGJvb2ssIG5pbAp9CgovLyBHZXROZXh0T3JkZXJJRCBnZXRzIHRoZSBJRCBvZiB0aGUgbmV4dCBvcmRlciB0byBhcHBlbmQKZnVuYyAoYm9vayBTZWxsT3JkZXJCb29rKSBHZXROZXh0T3JkZXJJRCgpIGludDMyIHsKCXJldHVybiBib29rLk9yZGVySURUcmFjawp9CgovLyBJbmNyZW1lbnROZXh0T3JkZXJJRCB1cGRhdGVzIHRoZSBJRCB0cmFja2VyIGZvciBzZWxsIG9yZGVycwpmdW5jIChib29rIFNlbGxPcmRlckJvb2spIEluY3JlbWVudE5leHRPcmRlcklEKCkgT3JkZXJCb29rIHsKCS8vIEV2ZW4gbnVtYmVycyB0byBoYXZlIGRpZmZlcmVudCBJRCB0aGFuIGJ1eSBvcmRlcnMKCWJvb2suT3JkZXJJRFRyYWNrICs9IDIKCglyZXR1cm4gYm9vawp9CgovLyBHZXRPcmRlckZyb21JRCBnZXRzIGFuIG9yZGVyIGZyb20gdGhlIGJvb2sgZnJvbSBpdHMgaWQKZnVuYyAoYm9vayBTZWxsT3JkZXJCb29rKSBHZXRPcmRlckZyb21JRChpZCBpbnQzMikgKE9yZGVyLCBlcnJvcikgewoJZm9yIF8sIG9yZGVyIDo9IHJhbmdlIGJvb2suT3JkZXJzIHsKCQlpZiBvcmRlci5JZCA9PSBpZCB7CgkJCXJldHVybiAqb3JkZXIsIG5pbAoJCX0KCX0KCXJldHVybiBPcmRlcnt9LCBFcnJPcmRlck5vdEZvdW5kCn0KCi8vIFJlbW92ZU9yZGVyRnJvbUlEIHJlbW92ZXMgYW4gb3JkZXIgZnJvbSB0aGUgYm9vayBhbmQga2VlcCBpdCBvcmRlcmVkCmZ1bmMgKGJvb2sgU2VsbE9yZGVyQm9vaykgUmVtb3ZlT3JkZXJGcm9tSUQoaWQgaW50MzIpIChPcmRlckJvb2ssIGVycm9yKSB7Cglmb3IgaSwgb3JkZXIgOj0gcmFuZ2UgYm9vay5PcmRlcnMgewoJCWlmIG9yZGVyLklkID09IGlkIHsKCQkJYm9vay5PcmRlcnMgPSBhcHBlbmQoYm9vay5PcmRlcnNbOmldLCBib29rLk9yZGVyc1tpKzE6XS4uLikKCQkJcmV0dXJuIGJvb2ssIG5pbAoJCX0KCX0KCXJldHVybiBib29rLCBFcnJPcmRlck5vdEZvdW5kCn0KCmZ1bmMgTmV3U2VsbE9yZGVyQm9vayhBbW91bnREZW5vbSBzdHJpbmcsIFByaWNlRGVub20gc3RyaW5nKSBTZWxsT3JkZXJCb29rIHsKCXJldHVybiBTZWxsT3JkZXJCb29rewoJCU9yZGVySURUcmFjazogMCwKCQlBbW91bnREZW5vbTogIEFtb3VudERlbm9tLAoJCVByaWNlRGVub206ICAgUHJpY2VEZW5vbSwKCX0KfQoKLy8gTGlxdWlkYXRlRnJvbVNlbGxPcmRlciBsaXF1aWRhdGVzIHRoZSBmaXJzdCBidXkgb3JkZXIgb2YgdGhlIGJvb2sgZnJvbSB0aGUgc2VsbCBvcmRlcgovLyBpZiBubyBtYXRjaCBpcyBmb3VuZCwgcmV0dXJuIGZhbHNlIGZvciBtYXRjaApmdW5jIExpcXVpZGF0ZUZyb21TZWxsT3JkZXIoYm9vayBCdXlPcmRlckJvb2ssIG9yZGVyIE9yZGVyKSAoCgluZXdCb29rIEJ1eU9yZGVyQm9vaywKCXJlbWFpbmluZ1NlbGxPcmRlciBPcmRlciwKCWxpcXVpZGF0ZWRCdXlPcmRlciBPcmRlciwKCWdhaW4gaW50MzIsCgltYXRjaCBib29sLAoJZmlsbGVkIGJvb2wsCikgewoJcmVtYWluaW5nU2VsbE9yZGVyID0gb3JkZXIKCgkvLyBObyBtYXRjaCBpZiBubyBvcmRlcgoJaWYgYm9vay5MZW4oKSA9PSAwIHsKCQlyZXR1cm4gYm9vaywgb3JkZXIsIGxpcXVpZGF0ZWRCdXlPcmRlciwgZ2FpbiwgZmFsc2UsIGZhbHNlCgl9CgoJLy8gQ2hlY2sgaWYgbWF0Y2gKCWhpZ2hlc3RCaWQgOj0gYm9vay5PcmRlcnNbYm9vay5MZW4oKS0xXQoJaWYgb3JkZXIuUHJpY2UgJmd0OyBoaWdoZXN0QmlkLlByaWNlIHsKCQlyZXR1cm4gYm9vaywgb3JkZXIsIGxpcXVpZGF0ZWRCdXlPcmRlciwgZ2FpbiwgZmFsc2UsIGZhbHNlCgl9CgoJbGlxdWlkYXRlZEJ1eU9yZGVyID0gKmhpZ2hlc3RCaWQKCgkvLyBDaGVjayBpZiBzZWxsIG9yZGVyIGNhbiBiZSBlbnRpcmVseSBmaWxsZWQKCWlmIGhpZ2hlc3RCaWQuQW1vdW50ICZndDs9IG9yZGVyLkFtb3VudCB7CgkJcmVtYWluaW5nU2VsbE9yZGVyLkFtb3VudCA9IDAKCQlsaXF1aWRhdGVkQnV5T3JkZXIuQW1vdW50ID0gb3JkZXIuQW1vdW50CgkJZ2FpbiA9IG9yZGVyLkFtb3VudCAqIGhpZ2hlc3RCaWQuUHJpY2UKCgkJLy8gUmVtb3ZlIGhpZ2hlc3QgYmlkIGlmIGl0IGhhcyBiZWVuIGVudGlyZWx5IGxpcXVpZGF0ZWQKCQloaWdoZXN0QmlkLkFtb3VudCAtPSBvcmRlci5BbW91bnQKCQlpZiBoaWdoZXN0QmlkLkFtb3VudCA9PSAwIHsKCQkJYm9vay5PcmRlcnMgPSBib29rLk9yZGVyc1s6Ym9vay5MZW4oKS0xXQoJCX0gZWxzZSB7CgkJCWJvb2suT3JkZXJzW2Jvb2suTGVuKCktMV0gPSBoaWdoZXN0QmlkCgkJfQoJCXJldHVybiBib29rLCByZW1haW5pbmdTZWxsT3JkZXIsIGxpcXVpZGF0ZWRCdXlPcmRlciwgZ2FpbiwgdHJ1ZSwgdHJ1ZQoJfQoKCS8vIE5vdCBlbnRpcmVseSBmaWxsZWQKCWdhaW4gPSBoaWdoZXN0QmlkLkFtb3VudCAqIGhpZ2hlc3RCaWQuUHJpY2UKCWJvb2suT3JkZXJzID0gYm9vay5PcmRlcnNbOmJvb2suTGVuKCktMV0KCXJlbWFpbmluZ1NlbGxPcmRlci5BbW91bnQgLT0gaGlnaGVzdEJpZC5BbW91bnQKCglyZXR1cm4gYm9vaywgcmVtYWluaW5nU2VsbE9yZGVyLCBsaXF1aWRhdGVkQnV5T3JkZXIsIGdhaW4sIHRydWUsIGZhbHNlCn0KCi8vIEZpbGxTZWxsT3JkZXIgdHJ5IHRvIGZpbGwgdGhlIHNlbGwgb3JkZXIgd2l0aCB0aGUgb3JkZXIgYm9vayBhbmQgcmV0dXJucyBhbGwgdGhlIHNpZGUgZWZmZWN0cwpmdW5jIEZpbGxTZWxsT3JkZXIoYm9vayBCdXlPcmRlckJvb2ssIG9yZGVyIE9yZGVyKSAoCgluZXdCb29rIEJ1eU9yZGVyQm9vaywKCXJlbWFpbmluZ1NlbGxPcmRlciBPcmRlciwKCWxpcXVpZGF0ZWQgW11PcmRlciwKCWdhaW4gaW50MzIsCglmaWxsZWQgYm9vbCwKKSB7Cgl2YXIgbGlxdWlkYXRlZExpc3QgW11PcmRlcgoJdG90YWxHYWluIDo9IGludDMyKDApCglyZW1haW5pbmdTZWxsT3JkZXIgPSBvcmRlcgoKCS8vIExpcXVpZGF0ZSBhcyBsb25nIGFzIHRoZXJlIGlzIG1hdGNoCglmb3IgewoJCXZhciBtYXRjaCBib29sCgkJdmFyIGxpcXVpZGF0aW9uIE9yZGVyCgkJYm9vaywgcmVtYWluaW5nU2VsbE9yZGVyLCBsaXF1aWRhdGlvbiwgZ2FpbiwgbWF0Y2gsIGZpbGxlZCA9IExpcXVpZGF0ZUZyb21TZWxsT3JkZXIoCgkJCWJvb2ssCgkJCXJlbWFpbmluZ1NlbGxPcmRlciwKCQkpCgkJaWYgIW1hdGNoIHsKCQkJYnJlYWsKCQl9CgoJCS8vIFVwZGF0ZSBnYWlucwoJCXRvdGFsR2FpbiArPSBnYWluCgoJCS8vIFVwZGF0ZSBsaXF1aWRhdGVkCgkJbGlxdWlkYXRlZExpc3QgPSBhcHBlbmQobGlxdWlkYXRlZExpc3QsIGxpcXVpZGF0aW9uKQoKCQlpZiBmaWxsZWQgewoJCQlicmVhawoJCX0KCX0KCglyZXR1cm4gYm9vaywgcmVtYWluaW5nU2VsbE9yZGVyLCBsaXF1aWRhdGVkTGlzdCwgdG90YWxHYWluLCBmaWxsZWQKfQo="}}),l._v(" "),Z("h2",{attrs:{id:"add-the-buyorder"}},[Z("a",{staticClass:"header-anchor",attrs:{href:"#add-the-buyorder"}},[l._v("#")]),l._v(" Add The Buyorder")]),l._v(" "),Z("p",[l._v("Modify the "),Z("code",[l._v("buyOrderBook.proto")]),l._v(" file to have the fields for creating a buy order on the orderbook.\nThe proto definition for the "),Z("code",[l._v("BuyOrderBook")]),l._v(" should look like follows:")]),l._v(" "),Z("tm-code-block",{staticClass:"codeblock",attrs:{language:"proto",base64:"Ly8gcHJvdG8vYnV5T3JkZXJCb29rLnByb3RvCnN5bnRheCA9ICZxdW90O3Byb3RvMyZxdW90OzsKcGFja2FnZSB0ZW5kZXJtaW50LmludGVyY2hhbmdlLmliY2RleDsKCm9wdGlvbiBnb19wYWNrYWdlID0gJnF1b3Q7Z2l0aHViLmNvbS90ZW5kZXJtaW50L2ludGVyY2hhbmdlL3gvaWJjZGV4L3R5cGVzJnF1b3Q7OwoKaW1wb3J0ICZxdW90O2liY2RleC9vcmRlci5wcm90byZxdW90OzsKCm1lc3NhZ2UgQnV5T3JkZXJCb29rIHsKICBzdHJpbmcgaW5kZXggPSAyOwogIGludDMyIG9yZGVySURUcmFjayA9IDM7CiAgc3RyaW5nIGFtb3VudERlbm9tID0gNDsKICBzdHJpbmcgcHJpY2VEZW5vbSA9IDU7CiAgcmVwZWF0ZWQgT3JkZXIgb3JkZXJzID0gNjsKfQo="}}),l._v(" "),Z("p",[l._v("For the buy orders, create a "),Z("code",[l._v("buyorder.go")]),l._v(" file in the "),Z("code",[l._v("types")]),l._v(" directory and add the following code:")]),l._v(" "),Z("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKaW1wb3J0ICgKCSZxdW90O3NvcnQmcXVvdDsKKQoKLy8gc29ydC5JbnRlcmZhY2UKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIExlbigpIGludCB7CglyZXR1cm4gbGVuKGJvb2suT3JkZXJzKQp9CmZ1bmMgKGJvb2sgQnV5T3JkZXJCb29rKSBMZXNzKGksIGogaW50KSBib29sIHsKCS8vIEJ1eSBvcmRlcnMgYXJlIGRlY3JlYXNpbmdseSBzb3J0ZWQKCXJldHVybiBib29rLk9yZGVyc1tpXS5QcmljZSAmbHQ7IGJvb2suT3JkZXJzW2pdLlByaWNlCn0KZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIFN3YXAoaSwgaiBpbnQpIHsKCWJvb2suT3JkZXJzW2ldLCBib29rLk9yZGVyc1tqXSA9IGJvb2suT3JkZXJzW2pdLCBib29rLk9yZGVyc1tpXQp9CgovLyBJbnNlcnRPcmRlciBpbnNlcnRzIHRoZSBvcmRlciBpbiB0aGUgaW5jcmVhc2luZyBvcmRlciBpbiB0aGUgYm9vawovLyBpdCBkb2Vzbid0IHNldCB0aGUgSUQgb3IgY2hlY2sgaWYgdGhlIElEIGFscmVhZHkgZXhpc3QKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIEluc2VydE9yZGVyKG9yZGVyIE9yZGVyKSBPcmRlckJvb2sgewoJLy8gSW5zZXJ0IHRoZSBvcmRlciBpbiB0aGUgaW5jcmVhc2luZyBvcmRlcgoJaWYgbGVuKGJvb2suT3JkZXJzKSAmZ3Q7IDAgewoJCWkgOj0gc29ydC5TZWFyY2gobGVuKGJvb2suT3JkZXJzKSwgZnVuYyhpIGludCkgYm9vbCB7IHJldHVybiBib29rLk9yZGVyc1tpXS5QcmljZSAmZ3Q7IG9yZGVyLlByaWNlIH0pCgkJb3JkZXJzIDo9IGFwcGVuZChib29rLk9yZGVycywgJmFtcDtvcmRlcikKCQljb3B5KG9yZGVyc1tpKzE6XSwgb3JkZXJzW2k6XSkKCQlvcmRlcnNbaV0gPSAmYW1wO29yZGVyCgkJYm9vay5PcmRlcnMgPSBvcmRlcnMKCX0gZWxzZSB7CgkJYm9vay5PcmRlcnMgPSBhcHBlbmQoYm9vay5PcmRlcnMsICZhbXA7b3JkZXIpCgl9CgoJcmV0dXJuIGJvb2sKfQoKLy8gR2V0T3JkZXIgZ2V0cyB0aGUgb3JkZXIgZnJvbSBhbiBpbmRleApmdW5jIChib29rIEJ1eU9yZGVyQm9vaykgR2V0T3JkZXIoaW5kZXggaW50KSAob3JkZXIgT3JkZXIsIGVyciBlcnJvcikgewoJaWYgaW5kZXggJmd0Oz0gbGVuKGJvb2suT3JkZXJzKSB7CgkJcmV0dXJuIG9yZGVyLCBFcnJPcmRlck5vdEZvdW5kCgl9CgoJcmV0dXJuICpib29rLk9yZGVyc1tpbmRleF0sIG5pbAp9CgovLyBTZXRPcmRlciBnZXRzIHRoZSBvcmRlciBmcm9tIGFuIGluZGV4CmZ1bmMgKGJvb2sgQnV5T3JkZXJCb29rKSBTZXRPcmRlcihpbmRleCBpbnQsIG9yZGVyIE9yZGVyKSAoT3JkZXJCb29rLCBlcnJvcikgewoJaWYgaW5kZXggJmd0Oz0gbGVuKGJvb2suT3JkZXJzKSB7CgkJcmV0dXJuIGJvb2ssIEVyck9yZGVyTm90Rm91bmQKCX0KCglib29rLk9yZGVyc1tpbmRleF0gPSAmYW1wO29yZGVyCgoJcmV0dXJuIGJvb2ssIG5pbAp9CgovLyBHZXROZXh0T3JkZXJJRCBnZXRzIHRoZSBJRCBvZiB0aGUgbmV4dCBvcmRlciB0byBhcHBlbmQKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIEdldE5leHRPcmRlcklEKCkgaW50MzIgewoJcmV0dXJuIGJvb2suT3JkZXJJRFRyYWNrCn0KCi8vIEluY3JlbWVudE5leHRPcmRlcklEIHVwZGF0ZXMgdGhlIElEIHRyYWNrZXIgZm9yIGJ1eSBvcmRlcnMKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIEluY3JlbWVudE5leHRPcmRlcklEKCkgT3JkZXJCb29rIHsKCS8vIEV2ZW4gbnVtYmVycyB0byBoYXZlIGRpZmZlcmVudCBJRCB0aGFuIGJ1eSBvcmRlcnMKCWJvb2suT3JkZXJJRFRyYWNrICs9IDIKCglyZXR1cm4gYm9vawp9CgovLyBHZXRPcmRlckZyb21JRCBnZXRzIGFuIG9yZGVyIGZyb20gdGhlIGJvb2sgZnJvbSBpdHMgaWQKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIEdldE9yZGVyRnJvbUlEKGlkIGludDMyKSAoT3JkZXIsIGVycm9yKSB7Cglmb3IgXywgb3JkZXIgOj0gcmFuZ2UgYm9vay5PcmRlcnMgewoJCWlmIG9yZGVyLklkID09IGlkIHsKCQkJcmV0dXJuICpvcmRlciwgbmlsCgkJfQoJfQoJcmV0dXJuIE9yZGVye30sIEVyck9yZGVyTm90Rm91bmQKfQoKLy8gUmVtb3ZlT3JkZXJGcm9tSUQgcmVtb3ZlcyBhbiBvcmRlciBmcm9tIHRoZSBib29rIGFuZCBrZWVwIGl0IG9yZGVyZWQKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIFJlbW92ZU9yZGVyRnJvbUlEKGlkIGludDMyKSAoT3JkZXJCb29rLCBlcnJvcikgewoJZm9yIGksIG9yZGVyIDo9IHJhbmdlIGJvb2suT3JkZXJzIHsKCQlpZiBvcmRlci5JZCA9PSBpZCB7CgkJCWJvb2suT3JkZXJzID0gYXBwZW5kKGJvb2suT3JkZXJzWzppXSwgYm9vay5PcmRlcnNbaSsxOl0uLi4pCgkJCXJldHVybiBib29rLCBuaWwKCQl9Cgl9CglyZXR1cm4gYm9vaywgRXJyT3JkZXJOb3RGb3VuZAp9CgpmdW5jIE5ld0J1eU9yZGVyQm9vayhBbW91bnREZW5vbSBzdHJpbmcsIFByaWNlRGVub20gc3RyaW5nKSBCdXlPcmRlckJvb2sgewoJcmV0dXJuIEJ1eU9yZGVyQm9va3sKCQlPcmRlcklEVHJhY2s6IDEsCgkJQW1vdW50RGVub206ICBBbW91bnREZW5vbSwKCQlQcmljZURlbm9tOiAgIFByaWNlRGVub20sCgl9Cn0KCi8vIExpcXVpZGF0ZUZyb21CdXlPcmRlciBsaXF1aWRhdGVzIHRoZSBmaXJzdCBzZWxsIG9yZGVyIG9mIHRoZSBib29rIGZyb20gdGhlIGJ1eSBvcmRlcgovLyBpZiBubyBtYXRjaCBpcyBmb3VuZCwgcmV0dXJuIGZhbHNlIGZvciBtYXRjaApmdW5jIExpcXVpZGF0ZUZyb21CdXlPcmRlcihib29rIFNlbGxPcmRlckJvb2ssIG9yZGVyIE9yZGVyKSAoCgluZXdCb29rIFNlbGxPcmRlckJvb2ssCglyZW1haW5pbmdCdXlPcmRlciBPcmRlciwKCWxpcXVpZGF0ZWRTZWxsT3JkZXIgT3JkZXIsCglwdXJjaGFzZSBpbnQzMiwKCW1hdGNoIGJvb2wsCglmaWxsZWQgYm9vbCwKKSB7CglyZW1haW5pbmdCdXlPcmRlciA9IG9yZGVyCgoJLy8gTm8gbWF0Y2ggaWYgbm8gb3JkZXIKCWlmIGJvb2suTGVuKCkgPT0gMCB7CgkJcmV0dXJuIGJvb2ssIG9yZGVyLCBsaXF1aWRhdGVkU2VsbE9yZGVyLCBwdXJjaGFzZSwgZmFsc2UsIGZhbHNlCgl9CgoJLy8gQ2hlY2sgaWYgbWF0Y2gKCWxvd2VzdEFzayA6PSBib29rLk9yZGVyc1tib29rLkxlbigpLTFdCglpZiBvcmRlci5QcmljZSAmbHQ7IGxvd2VzdEFzay5QcmljZSB7CgkJcmV0dXJuIGJvb2ssIG9yZGVyLCBsaXF1aWRhdGVkU2VsbE9yZGVyLCBwdXJjaGFzZSwgZmFsc2UsIGZhbHNlCgl9CgoJbGlxdWlkYXRlZFNlbGxPcmRlciA9ICpsb3dlc3RBc2sKCgkvLyBDaGVjayBpZiBidXkgb3JkZXIgY2FuIGJlIGVudGlyZWx5IGZpbGxlZAoJaWYgbG93ZXN0QXNrLkFtb3VudCAmZ3Q7PSBvcmRlci5BbW91bnQgewoJCXJlbWFpbmluZ0J1eU9yZGVyLkFtb3VudCA9IDAKCQlsaXF1aWRhdGVkU2VsbE9yZGVyLkFtb3VudCA9IG9yZGVyLkFtb3VudAoJCXB1cmNoYXNlID0gb3JkZXIuQW1vdW50CgoJCS8vIFJlbW92ZSBsb3dlc3QgYXNrIGlmIGl0IGhhcyBiZWVuIGVudGlyZWx5IGxpcXVpZGF0ZWQKCQlsb3dlc3RBc2suQW1vdW50IC09IG9yZGVyLkFtb3VudAoJCWlmIGxvd2VzdEFzay5BbW91bnQgPT0gMCB7CgkJCWJvb2suT3JkZXJzID0gYm9vay5PcmRlcnNbOmJvb2suTGVuKCktMV0KCQl9IGVsc2UgewoJCQlib29rLk9yZGVyc1tib29rLkxlbigpLTFdID0gbG93ZXN0QXNrCgkJfQoKCQlyZXR1cm4gYm9vaywgcmVtYWluaW5nQnV5T3JkZXIsIGxpcXVpZGF0ZWRTZWxsT3JkZXIsIHB1cmNoYXNlLCB0cnVlLCB0cnVlCgl9CgoJLy8gTm90IGVudGlyZWx5IGZpbGxlZAoJcHVyY2hhc2UgPSBsb3dlc3RBc2suQW1vdW50Cglib29rLk9yZGVycyA9IGJvb2suT3JkZXJzWzpib29rLkxlbigpLTFdCglyZW1haW5pbmdCdXlPcmRlci5BbW91bnQgLT0gbG93ZXN0QXNrLkFtb3VudAoKCXJldHVybiBib29rLCByZW1haW5pbmdCdXlPcmRlciwgbGlxdWlkYXRlZFNlbGxPcmRlciwgcHVyY2hhc2UsIHRydWUsIGZhbHNlCn0KCi8vIEZpbGxCdXlPcmRlciB0cnkgdG8gZmlsbCB0aGUgYnV5IG9yZGVyIHdpdGggdGhlIG9yZGVyIGJvb2sgYW5kIHJldHVybnMgYWxsIHRoZSBzaWRlIGVmZmVjdHMKZnVuYyBGaWxsQnV5T3JkZXIoYm9vayBTZWxsT3JkZXJCb29rLCBvcmRlciBPcmRlcikgKAoJbmV3Qm9vayBTZWxsT3JkZXJCb29rLAoJcmVtYWluaW5nQnV5T3JkZXIgT3JkZXIsCglsaXF1aWRhdGVkIFtdT3JkZXIsCglwdXJjaGFzZSBpbnQzMiwKCWZpbGxlZCBib29sLAopIHsKCXZhciBsaXF1aWRhdGVkTGlzdCBbXU9yZGVyCgl0b3RhbFB1cmNoYXNlIDo9IGludDMyKDApCglyZW1haW5pbmdCdXlPcmRlciA9IG9yZGVyCgoJLy8gTGlxdWlkYXRlIGFzIGxvbmcgYXMgdGhlcmUgaXMgbWF0Y2gKCWZvciB7CgkJdmFyIG1hdGNoIGJvb2wKCQl2YXIgbGlxdWlkYXRpb24gT3JkZXIKCQlib29rLCByZW1haW5pbmdCdXlPcmRlciwgbGlxdWlkYXRpb24sIHB1cmNoYXNlLCBtYXRjaCwgZmlsbGVkID0gTGlxdWlkYXRlRnJvbUJ1eU9yZGVyKAoJCQlib29rLAoJCQlyZW1haW5pbmdCdXlPcmRlciwKCQkpCgkJaWYgIW1hdGNoIHsKCQkJYnJlYWsKCQl9CgoJCS8vIFVwZGF0ZSBnYWlucwoJCXRvdGFsUHVyY2hhc2UgKz0gcHVyY2hhc2UKCgkJLy8gVXBkYXRlIGxpcXVpZGF0ZWQKCQlsaXF1aWRhdGVkTGlzdCA9IGFwcGVuZChsaXF1aWRhdGVkTGlzdCwgbGlxdWlkYXRpb24pCgoJCWlmIGZpbGxlZCB7CgkJCWJyZWFrCgkJfQoJfQoKCXJldHVybiBib29rLCByZW1haW5pbmdCdXlPcmRlciwgbGlxdWlkYXRlZExpc3QsIHRvdGFsUHVyY2hhc2UsIGZpbGxlZAp9Cg=="}}),l._v(" "),Z("p",[l._v("This finishes your code for the orderbook module with buy and sell orders.\nIn the next chapters, you will make them IBC compatible.\nYou will have to deal with IBC packets that are sent over a blockchain.\nThese packets will be received and acknowledged by the recipient blockchain.")])],1)}),[],!1,null,null,null);c.default=y.exports}}]);