(window.webpackJsonp=window.webpackJsonp||[]).push([[150],{780:function(c,g,l){"use strict";l.r(g);var C=l(1),d=Object(C.a)({},(function(){var c=this,g=c.$createElement,l=c._self._c||g;return l("ContentSlotsDistributor",{attrs:{"slot-key":c.$parent.slotKey}},[l("h1",{attrs:{id:"module-migration"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#module-migration"}},[c._v("#")]),c._v(" Module migration")]),c._v(" "),l("p",[c._v("In this section, you migrate the "),l("code",[c._v("pofe")]),c._v(" module from your v0.39 application.")]),c._v(" "),l("h2",{attrs:{id:"module-differences"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#module-differences"}},[c._v("#")]),c._v(" Module differences")]),c._v(" "),l("p",[c._v("Before you start the migration, review the differences between v0.39 and v0.40 and later Stargate modules. This overview shows the differences for modules that are scaffolded with Starport:")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"IyAjIHJlbW92ZWQgaW4gU3RhcmFndGUKIyArKysgYWRkZWQgaW4gU3RhcmdhdGUgCgrilJzilIDilIAgcHJvdG8K4pSCICAg4pSU4pSA4pSAIHBvZmUK4pSCICAgICAgIOKUnOKUgOKUgCArKysgY2xhaW0ucHJvdG8K4pSCICAgICAgIOKUnOKUgOKUgCArKysgZ2VuZXNpcy5wcm90bwrilIIgICAgICAg4pSU4pSA4pSAICsrKyBxdWVyeS5wcm90bwrilJTilIDilIAgeAogICAg4pSU4pSA4pSAIHBvZmUKICAgICAgICDilJzilIDilIAgY2xpZW50CiAgICAgICAg4pSCICAg4pSc4pSA4pSAIGNsaQogICAgICAgIOKUgiAgIOKUgiAgIOKUnOKUgOKUgCBxdWVyeS5nbwogICAgICAgIOKUgiAgIOKUgiAgIOKUnOKUgOKUgCBxdWVyeUNsYWltLmdvCiAgICAgICAg4pSCICAg4pSCICAg4pSc4pSA4pSAIHR4LmdvCiAgICAgICAg4pSCICAg4pSCICAg4pSU4pSA4pSAIHR4Q2xhaW0uZ28KICAgICAgICDilIIgICDilJTilIDilIAgcmVzdAogICAgICAgIOKUgiAgICAgICDilJzilIDilIAgcXVlcnlDbGFpbS5nbwogICAgICAgIOKUgiAgICAgICDilJzilIDilIAgcmVzdC5nbwogICAgICAgIOKUgiAgICAgICDilJTilIDilIAgdHhDbGFpbS5nbwogICAgICAgIOKUnOKUgOKUgCBnZW5lc2lzLmdvCiAgICAgICAg4pSc4pSA4pSAIGhhbmRsZXIuZ28KICAgICAgICDilJzilIDilIAgKysrIGhhbmRsZXJfY2xhaW0uZ28KICAgICAgICDilJzilIDilIAgIyBoYW5kbGVyTXNnQ3JlYXRlQ2xhaW0uZ28KICAgICAgICDilJzilIDilIAgIyBoYW5kbGVyTXNnRGVsZXRlQ2xhaW0uZ28KICAgICAgICDilJzilIDilIAgIyBoYW5kbGVyTXNnU2V0Q2xhaW0uZ28KICAgICAgICDilJzilIDilIAga2VlcGVyCiAgICAgICAg4pSCICAg4pSc4pSA4pSAIGNsYWltLmdvCiAgICAgICAg4pSCICAg4pSc4pSA4pSAICsrKyBncnBjX3F1ZXJ5LmdvCiAgICAgICAg4pSCICAg4pSc4pSA4pSAICsrKyBncnBjX3F1ZXJ5X2NsYWltLmdvCiAgICAgICAg4pSCICAg4pSc4pSA4pSAIGtlZXBlci5nbwogICAgICAgIOKUgiAgIOKUnOKUgOKUgCAjIHBhcmFtcy5nbwogICAgICAgIOKUgiAgIOKUnOKUgOKUgCAjIHF1ZXJpZXIuZ28KICAgICAgICDilIIgICDilJzilIDilIAgKysrIHF1ZXJ5LmdvCiAgICAgICAg4pSCICAg4pSU4pSA4pSAICsrKyBxdWVyeV9jbGFpbS5nbwogICAgICAgIOKUnOKUgOKUgCBtb2R1bGUuZ28KICAgICAgICDilJTilIDilIAgdHlwZXMKICAgICAgICAgICAg4pSc4pSA4pSAICMgTXNnQ3JlYXRlQ2xhaW0uZ28KICAgICAgICAgICAg4pSc4pSA4pSAICMgTXNnRGVsZXRlQ2xhaW0uZ28KICAgICAgICAgICAg4pSc4pSA4pSAICMgTXNnU2V0Q2xhaW0uZ28KICAgICAgICAgICAg4pSc4pSA4pSAICsrKyBtZXNzYWdlc19jbGFpbS5nbwogICAgICAgICAgICDilJzilIDilIAgIyBUeXBlQ2xhaW0uZ28KICAgICAgICAgICAg4pSc4pSA4pSAICsrKyBjbGFpbS5wYi5nbwogICAgICAgICAgICDilJzilIDilIAgY29kZWMuZ28KICAgICAgICAgICAg4pSc4pSA4pSAIGVycm9ycy5nbwogICAgICAgICAgICDilJzilIDilIAgIyBldmVudHMuZ28KICAgICAgICAgICAg4pSc4pSA4pSAICMgZXhwZWN0ZWRfa2VlcGVycy5nbwogICAgICAgICAgICDilJzilIDilIAgZ2VuZXNpcy5nbwogICAgICAgICAgICDilJzilIDilIAgKysrIGdlbmVzaXMucGIuZ28KICAgICAgICAgICAg4pSc4pSA4pSAIGtleXMuZ28KICAgICAgICAgICAg4pSc4pSA4pSAICMgcGFyYW1zLmdvCiAgICAgICAgICAgIOKUnOKUgOKUgCBxdWVyeS5nbwogICAgICAgICAgICDilJzilIDilIAgKysrIHF1ZXJ5LnBiLmdvCiAgICAgICAgICAgIOKUnOKUgOKUgCArKysgcXVlcnkucGIuZ3cuZ28KICAgICAgICAgICAg4pSU4pSA4pSAIHR5cGVzLmdvCg=="}}),c._v(" "),l("p",[c._v("One of the key differences is the integration of gRPC and protobuf in your application. Protobufs are an efficient method for serializing messages and the current industry standard.")]),c._v(" "),l("h2",{attrs:{id:"scaffolding-your-stargate-module"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#scaffolding-your-stargate-module"}},[c._v("#")]),c._v(" Scaffolding your Stargate module")]),c._v(" "),l("p",[c._v("In theory, you "),l("strong",[c._v("could")]),c._v(" copy a module from your existing application and make relevant changes based on the information in the "),l("a",{attrs:{href:"https://docs.cosmos.network/v0.42/migrations/app_and_modules.html#app-and-modules-migration",target:"_blank",rel:"noopener noreferrer"}},[c._v("App and Modules Migration"),l("OutboundLink")],1),c._v(" documentation.")]),c._v(" "),l("p",[c._v("This tutorial uses Starport to generate fresh Stargate-compatible files and migrate the logic from a v0.39 application. You will also change some of the logic to make your application Stargate compatible.")]),c._v(" "),l("p",[c._v("The first step is to inspect the "),l("code",[c._v("Claim")]),c._v(" type that is defined in your v0.39 application.")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gbGF1bmNocGFkL3BvZmUveC9wb2ZlL3R5cGVzL1R5cGVDbGFpbS5nbwoKcGFja2FnZSB0eXBlcwoKaW1wb3J0ICgKCXNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CikKCnR5cGUgQ2xhaW0gc3RydWN0IHsKICBDcmVhdG9yIHNkay5BY2NBZGRyZXNzIGBqc29uOiZxdW90O2NyZWF0b3ImcXVvdDsgeWFtbDomcXVvdDtjcmVhdG9yJnF1b3Q7YAogIElEICAgICAgc3RyaW5nICAgICAgICAgYGpzb246JnF1b3Q7aWQmcXVvdDsgeWFtbDomcXVvdDtpZCZxdW90O2AKICBQcm9vZiAgIHN0cmluZyAgICAgICAgIGBqc29uOiZxdW90O3Byb29mJnF1b3Q7IHlhbWw6JnF1b3Q7cHJvb2YmcXVvdDtgCn0K"}}),c._v(" "),l("p",[c._v("As "),l("code",[c._v("Creator")]),c._v(" and "),l("code",[c._v("ID")]),c._v(" are both default fields for Starport, we can use the "),l("code",[c._v("starport type")]),c._v(" command to create our "),l("code",[c._v("Claim")]),c._v(" type while defining the "),l("code",[c._v("proof")]),c._v(" as a "),l("code",[c._v("string")]),c._v(" -")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"undefined",base64:"JCBzdGFycG9ydCB0eXBlIGNsYWltIHByb29mOnN0cmluZwoK8J+OiSBDcmVhdGVkIGEgdHlwZSBgY2xhaW1gLgoK"}}),c._v(" "),l("p",[c._v("Once this is done, you should see a few new files added to your application -")]),c._v(" "),l("ul",[l("li",[l("code",[c._v("proto/pofe/claim.proto")])]),c._v(" "),l("li",[l("code",[c._v("x/pofe/{cli|rest}/{queryClaim|txClaim}.go")])]),c._v(" "),l("li",[l("code",[c._v("x/pofe/keeper/claim.go")])]),c._v(" "),l("li",[l("code",[c._v("x/pofe/keeper/grpc_query_claim.go")])]),c._v(" "),l("li",[l("code",[c._v("x/pofe/keeper/query_claim.go")])]),c._v(" "),l("li",[l("code",[c._v("x/pofe/keeper/query.go")])]),c._v(" "),l("li",[l("code",[c._v("x/pofe/types/claim.pb.go")])]),c._v(" "),l("li",[l("code",[c._v("x/pofe/types/messages_claim.go")])]),c._v(" "),l("li",[l("code",[c._v("x/pofe/types/query.pb.gw.go")])]),c._v(" "),l("li",[l("code",[c._v("x/pofe/handler_claim.go")])])]),c._v(" "),l("h2",{attrs:{id:"protobuf-and-grpc"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#protobuf-and-grpc"}},[c._v("#")]),c._v(" Protobuf and gRPC")]),c._v(" "),l("p",[c._v("Compared to your v0.39 application, the key differences in type scaffolding is the addition of "),l("code",[c._v("proto/pofe/claim.proto")]),c._v(", "),l("code",[c._v("x/pofe/keeper/grpc_query_claim.go")]),c._v(", and "),l("code",[c._v("x/pofe/types/query_pb.go")]),c._v(" files.")]),c._v(" "),l("p",[c._v("When you look inside the "),l("code",[c._v("claim.proto")]),c._v(" file, you see the following file that contains transaction ("),l("code",[c._v("tx")]),c._v(") messages. It is safe to assume that these transaction messages mutate state.")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gc3RhcmdhdGUvcG9mZS9wcm90by9wb2ZlL2NsYWltLnByb3RvCnN5bnRheCA9ICZxdW90O3Byb3RvMyZxdW90OzsKcGFja2FnZSB1c2VyLnBvZmUucG9mZTsKCm9wdGlvbiBnb19wYWNrYWdlID0gJnF1b3Q7Z2l0aHViLmNvbS91c2VyL3BvZmUveC9wb2ZlL3R5cGVzJnF1b3Q7OwoKaW1wb3J0ICZxdW90O2dvZ29wcm90by9nb2dvLnByb3RvJnF1b3Q7OwoKbWVzc2FnZSBDbGFpbSB7CiAgc3RyaW5nIGNyZWF0b3IgPSAxOwogIHN0cmluZyBpZCA9IDI7CiAgc3RyaW5nIHByb29mID0gMzsgCn0KCm1lc3NhZ2UgTXNnQ3JlYXRlQ2xhaW0gewogIHN0cmluZyBjcmVhdG9yID0gMTsKICBzdHJpbmcgcHJvb2YgPSAyOyAKfQoKbWVzc2FnZSBNc2dVcGRhdGVDbGFpbSB7CiAgc3RyaW5nIGNyZWF0b3IgPSAxOwogIHN0cmluZyBpZCA9IDI7CiAgc3RyaW5nIHByb29mID0gMzsgCn0KCm1lc3NhZ2UgTXNnRGVsZXRlQ2xhaW0gewogIHN0cmluZyBjcmVhdG9yID0gMTsKICBzdHJpbmcgaWQgPSAyOwp9Cg=="}}),c._v(" "),l("p",[c._v("You will also see a "),l("code",[c._v("query.proto")]),c._v(" file, which contains messages used for querying the state of the blockchain. You will notice that there is a gRPC Query service defined.")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gc3RhcmdhdGUvcG9mZS9wcm90by9wb2ZlL3F1ZXJ5LnByb3RvCgpzeW50YXggPSAmcXVvdDtwcm90bzMmcXVvdDs7CnBhY2thZ2UgdXNlci5wb2ZlLnBvZmU7CgppbXBvcnQgJnF1b3Q7Z29vZ2xlL2FwaS9hbm5vdGF0aW9ucy5wcm90byZxdW90OzsKaW1wb3J0ICZxdW90O2Nvc21vcy9iYXNlL3F1ZXJ5L3YxYmV0YTEvcGFnaW5hdGlvbi5wcm90byZxdW90OzsKLy8gdGhpcyBsaW5lIGlzIHVzZWQgYnkgc3RhcnBvcnQgc2NhZmZvbGRpbmcgIyAxCmltcG9ydCAmcXVvdDtwb2ZlL2NsYWltLnByb3RvJnF1b3Q7OwoKb3B0aW9uIGdvX3BhY2thZ2UgPSAmcXVvdDtnaXRodWIuY29tL3VzZXIvcG9mZS94L3BvZmUvdHlwZXMmcXVvdDs7CgovLyBRdWVyeSBkZWZpbmVzIHRoZSBnUlBDIHF1ZXJpZXIgc2VydmljZS4Kc2VydmljZSBRdWVyeSB7CiAgICAvLyB0aGlzIGxpbmUgaXMgdXNlZCBieSBzdGFycG9ydCBzY2FmZm9sZGluZyAjIDIKCXJwYyBDbGFpbShRdWVyeUdldENsYWltUmVxdWVzdCkgcmV0dXJucyAoUXVlcnlHZXRDbGFpbVJlc3BvbnNlKSB7CgkJb3B0aW9uIChnb29nbGUuYXBpLmh0dHApLmdldCA9ICZxdW90Oy91c2VyL3BvZmUvcG9mZS9jbGFpbS97aWR9JnF1b3Q7OwoJfQoJcnBjIENsYWltQWxsKFF1ZXJ5QWxsQ2xhaW1SZXF1ZXN0KSByZXR1cm5zIChRdWVyeUFsbENsYWltUmVzcG9uc2UpIHsKCQlvcHRpb24gKGdvb2dsZS5hcGkuaHR0cCkuZ2V0ID0gJnF1b3Q7L3VzZXIvcG9mZS9wb2ZlL2NsYWltJnF1b3Q7OwoJfQoKfQoKLy8gdGhpcyBsaW5lIGlzIHVzZWQgYnkgc3RhcnBvcnQgc2NhZmZvbGRpbmcgIyAzCm1lc3NhZ2UgUXVlcnlHZXRDbGFpbVJlcXVlc3QgewoJc3RyaW5nIGlkID0gMTsKfQoKbWVzc2FnZSBRdWVyeUdldENsYWltUmVzcG9uc2UgewoJQ2xhaW0gQ2xhaW0gPSAxOwp9CgptZXNzYWdlIFF1ZXJ5QWxsQ2xhaW1SZXF1ZXN0IHsKCWNvc21vcy5iYXNlLnF1ZXJ5LnYxYmV0YTEuUGFnZVJlcXVlc3QgcGFnaW5hdGlvbiA9IDE7Cn0KCm1lc3NhZ2UgUXVlcnlBbGxDbGFpbVJlc3BvbnNlIHsKCXJlcGVhdGVkIENsYWltIENsYWltID0gMTsKCWNvc21vcy5iYXNlLnF1ZXJ5LnYxYmV0YTEuUGFnZVJlc3BvbnNlIHBhZ2luYXRpb24gPSAyOwp9Cg=="}}),c._v(" "),l("p",[c._v("If you are unfamiliar with gRPC, a simple explanation is that each gRPC query is registered with a message structure that it receives, and the message structure of the response. For example, "),l("code",[c._v("QueryGetClaimRequest")]),c._v(" would require an string "),l("code",[c._v("id")]),c._v(", and would return a "),l("code",[c._v("Claim")]),c._v(", which is defined in the "),l("code",[c._v("claim.proto")]),c._v(" file in the same directory.")]),c._v(" "),l("p",[c._v("As a matter of fact, these messages will be used to generate the messages used in the application. You will notice this in "),l("code",[c._v("x/pofe/types/claim.pb.go")]),c._v(" - take for example the "),l("code",[c._v("Claim")]),c._v(" type. There will also be a few pre-generated helper functions including getters and marshaling methods for the messages.")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gQ29kZSBnZW5lcmF0ZWQgYnkgcHJvdG9jLWdlbi1nb2dvLiBETyBOT1QgRURJVC4KLy8gc291cmNlOiBwb2ZlL2NsYWltLnByb3RvCgpwYWNrYWdlIHR5cGVzCgppbXBvcnQgKAoJZm10ICZxdW90O2ZtdCZxdW90OwoJXyAmcXVvdDtnaXRodWIuY29tL2dvZ28vcHJvdG9idWYvZ29nb3Byb3RvJnF1b3Q7Cglwcm90byAmcXVvdDtnaXRodWIuY29tL2dvZ28vcHJvdG9idWYvcHJvdG8mcXVvdDsKCWlvICZxdW90O2lvJnF1b3Q7CgltYXRoICZxdW90O21hdGgmcXVvdDsKCW1hdGhfYml0cyAmcXVvdDttYXRoL2JpdHMmcXVvdDsKKQoKLy8gUmVmZXJlbmNlIGltcG9ydHMgdG8gc3VwcHJlc3MgZXJyb3JzIGlmIHRoZXkgYXJlIG5vdCBvdGhlcndpc2UgdXNlZC4KdmFyIF8gPSBwcm90by5NYXJzaGFsCnZhciBfID0gZm10LkVycm9yZgp2YXIgXyA9IG1hdGguSW5mCgovLyBUaGlzIGlzIGEgY29tcGlsZS10aW1lIGFzc2VydGlvbiB0byBlbnN1cmUgdGhhdCB0aGlzIGdlbmVyYXRlZCBmaWxlCi8vIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgcHJvdG8gcGFja2FnZSBpdCBpcyBiZWluZyBjb21waWxlZCBhZ2FpbnN0LgovLyBBIGNvbXBpbGF0aW9uIGVycm9yIGF0IHRoaXMgbGluZSBsaWtlbHkgbWVhbnMgeW91ciBjb3B5IG9mIHRoZQovLyBwcm90byBwYWNrYWdlIG5lZWRzIHRvIGJlIHVwZGF0ZWQuCmNvbnN0IF8gPSBwcm90by5Hb0dvUHJvdG9QYWNrYWdlSXNWZXJzaW9uMyAvLyBwbGVhc2UgdXBncmFkZSB0aGUgcHJvdG8gcGFja2FnZQoKdHlwZSBDbGFpbSBzdHJ1Y3QgewoJQ3JlYXRvciBzdHJpbmcgYHByb3RvYnVmOiZxdW90O2J5dGVzLDEsb3B0LG5hbWU9Y3JlYXRvcixwcm90bzMmcXVvdDsganNvbjomcXVvdDtjcmVhdG9yLG9taXRlbXB0eSZxdW90O2AKCUlkICAgICAgc3RyaW5nIGBwcm90b2J1ZjomcXVvdDtieXRlcywyLG9wdCxuYW1lPWlkLHByb3RvMyZxdW90OyBqc29uOiZxdW90O2lkLG9taXRlbXB0eSZxdW90O2AKCVByb29mICAgc3RyaW5nIGBwcm90b2J1ZjomcXVvdDtieXRlcywzLG9wdCxuYW1lPXByb29mLHByb3RvMyZxdW90OyBqc29uOiZxdW90O3Byb29mLG9taXRlbXB0eSZxdW90O2AKfQoKZnVuYyAobSAqQ2xhaW0pIFJlc2V0KCkgICAgICAgICB7ICptID0gQ2xhaW17fSB9CmZ1bmMgKG0gKkNsYWltKSBTdHJpbmcoKSBzdHJpbmcgeyByZXR1cm4gcHJvdG8uQ29tcGFjdFRleHRTdHJpbmcobSkgfQpmdW5jICgqQ2xhaW0pIFByb3RvTWVzc2FnZSgpICAgIHt9CmZ1bmMgKCpDbGFpbSkgRGVzY3JpcHRvcigpIChbXWJ5dGUsIFtdaW50KSB7CglyZXR1cm4gZmlsZURlc2NyaXB0b3JfNjc5MjgwNGMwMDQzMmRkOCwgW11pbnR7MH0KfQpmdW5jIChtICpDbGFpbSkgWFhYX1VubWFyc2hhbChiIFtdYnl0ZSkgZXJyb3IgewoJcmV0dXJuIG0uVW5tYXJzaGFsKGIpCn0KZnVuYyAobSAqQ2xhaW0pIFhYWF9NYXJzaGFsKGIgW11ieXRlLCBkZXRlcm1pbmlzdGljIGJvb2wpIChbXWJ5dGUsIGVycm9yKSB7CglpZiBkZXRlcm1pbmlzdGljIHsKCQlyZXR1cm4geHh4X21lc3NhZ2VJbmZvX0NsYWltLk1hcnNoYWwoYiwgbSwgZGV0ZXJtaW5pc3RpYykKCX0gZWxzZSB7CgkJYiA9IGJbOmNhcChiKV0KCQluLCBlcnIgOj0gbS5NYXJzaGFsVG9TaXplZEJ1ZmZlcihiKQoJCWlmIGVyciAhPSBuaWwgewoJCQlyZXR1cm4gbmlsLCBlcnIKCQl9CgkJcmV0dXJuIGJbOm5dLCBuaWwKCX0KfQpmdW5jIChtICpDbGFpbSkgWFhYX01lcmdlKHNyYyBwcm90by5NZXNzYWdlKSB7Cgl4eHhfbWVzc2FnZUluZm9fQ2xhaW0uTWVyZ2UobSwgc3JjKQp9CmZ1bmMgKG0gKkNsYWltKSBYWFhfU2l6ZSgpIGludCB7CglyZXR1cm4gbS5TaXplKCkKfQpmdW5jIChtICpDbGFpbSkgWFhYX0Rpc2NhcmRVbmtub3duKCkgewoJeHh4X21lc3NhZ2VJbmZvX0NsYWltLkRpc2NhcmRVbmtub3duKG0pCn0KCnZhciB4eHhfbWVzc2FnZUluZm9fQ2xhaW0gcHJvdG8uSW50ZXJuYWxNZXNzYWdlSW5mbwoKZnVuYyAobSAqQ2xhaW0pIEdldENyZWF0b3IoKSBzdHJpbmcgewoJaWYgbSAhPSBuaWwgewoJCXJldHVybiBtLkNyZWF0b3IKCX0KCXJldHVybiAmcXVvdDsmcXVvdDsKfQoKZnVuYyAobSAqQ2xhaW0pIEdldElkKCkgc3RyaW5nIHsKCWlmIG0gIT0gbmlsIHsKCQlyZXR1cm4gbS5JZAoJfQoJcmV0dXJuICZxdW90OyZxdW90Owp9CgpmdW5jIChtICpDbGFpbSkgR2V0UHJvb2YoKSBzdHJpbmcgewoJaWYgbSAhPSBuaWwgewoJCXJldHVybiBtLlByb29mCgl9CglyZXR1cm4gJnF1b3Q7JnF1b3Q7Cn0KCi8vIE1zZ0NyZWF0ZUNsYWltLCBNc2dVcGRhdGVDbGFpbSwgTXNnRGVsZXRlQ2xhaW0K"}}),c._v(" "),l("p",[c._v("Note that you can also generate these "),l("code",[c._v(".pb.go")]),c._v(" files by running "),l("code",[c._v("./scripts/protocgen")]),c._v(".")]),c._v(" "),l("p",[c._v("The same concept goes for the query methods - so updating the "),l("code",[c._v("proto/pofe/query.proto")]),c._v(" file and running the script will update the contents of "),l("code",[c._v("types/query.pb.go")]),c._v(" and "),l("code",[c._v("query.pb.gw.go")]),c._v(".")]),c._v(" "),l("p",[c._v("Now, we can continue to migrate our logic to Stargate!")]),c._v(" "),l("h2",{attrs:{id:"migrating-your-logic"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#migrating-your-logic"}},[c._v("#")]),c._v(" Migrating your logic")]),c._v(" "),l("p",[c._v("As the core logic that we implemented was within the CLI, we need to be able to modify the contents and adapt them to the Stargate release.")]),c._v(" "),l("p",[c._v("The most important file to note is the modification we made in the "),l("code",[c._v("launchpad/pofe/x/pofe/client/cli/txClaim.go")]),c._v(" file:")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gbGF1bmNocGFkCgpwYWNrYWdlIGNsaQoKaW1wb3J0ICgKCSZxdW90O2J1ZmlvJnF1b3Q7CgkmcXVvdDtjcnlwdG8vc2hhMjU2JnF1b3Q7CgkmcXVvdDtlbmNvZGluZy9oZXgmcXVvdDsKCSZxdW90O2lvL2lvdXRpbCZxdW90OwoKCSZxdW90O2dpdGh1Yi5jb20vc3BmMTMvY29icmEmcXVvdDsKCgkmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL2NsaWVudC9jb250ZXh0JnF1b3Q7CgkmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL2NvZGVjJnF1b3Q7CglzZGsgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcyZxdW90OwoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay94L2F1dGgmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsveC9hdXRoL2NsaWVudC91dGlscyZxdW90OwoJJnF1b3Q7Z2l0aHViLmNvbS91c2VyL3BvZmUveC9wb2ZlL3R5cGVzJnF1b3Q7CikKCi8vIENMSSB0cmFuc2FjdGlvbiBjb21tYW5kIHRvIGNyZWF0ZSBhIGNsYWltCmZ1bmMgR2V0Q21kQ3JlYXRlQ2xhaW0oY2RjICpjb2RlYy5Db2RlYykgKmNvYnJhLkNvbW1hbmQgewoJcmV0dXJuICZhbXA7Y29icmEuQ29tbWFuZHsKCQlVc2U6ICAgJnF1b3Q7Y3JlYXRlLWNsYWltIFtwYXRoLXRvLWZpbGVdJnF1b3Q7LAoJCVNob3J0OiAmcXVvdDtDcmVhdGVzIGEgbmV3IGNsYWltIGZyb20gYSBwYXRoIHRvIGEgZmlsZSZxdW90OywKCQlBcmdzOiAgY29icmEuTWluaW11bU5BcmdzKDEpLAoJCVJ1bkU6IGZ1bmMoY21kICpjb2JyYS5Db21tYW5kLCBhcmdzIFtdc3RyaW5nKSBlcnJvciB7CgkJCS8vIGFjY2VwdCBhIGZpbGVwYXRoLCByZWFkIHRoZSBmaWxlLCBhbmQgaGFzaCBpdAoJCQloYXNoZXIgOj0gc2hhMjU2Lk5ldygpCgkJCXMsIF8gOj0gaW91dGlsLlJlYWRGaWxlKGFyZ3NbMF0pCgkJCWhhc2hlci5Xcml0ZShzKQoJCQlhcmdzUHJvb2YgOj0gaGV4LkVuY29kZVRvU3RyaW5nKGhhc2hlci5TdW0obmlsKSkKCgkJCS8vIGF1dG9tYXRpY2FsbHkgc2NhZmZvbGRlZCBieSBgc3RhcnBvcnQgdHlwZWAKCQkJY2xpQ3R4IDo9IGNvbnRleHQuTmV3Q0xJQ29udGV4dCgpLldpdGhDb2RlYyhjZGMpCgkJCWluQnVmIDo9IGJ1ZmlvLk5ld1JlYWRlcihjbWQuSW5PclN0ZGluKCkpCgkJCXR4QmxkciA6PSBhdXRoLk5ld1R4QnVpbGRlckZyb21DTEkoaW5CdWYpLldpdGhUeEVuY29kZXIodXRpbHMuR2V0VHhFbmNvZGVyKGNkYykpCgkJCW1zZyA6PSB0eXBlcy5OZXdNc2dDcmVhdGVDbGFpbShjbGlDdHguR2V0RnJvbUFkZHJlc3MoKSwgc3RyaW5nKGFyZ3NQcm9vZikpCgkJCWVyciA6PSBtc2cuVmFsaWRhdGVCYXNpYygpCgkJCWlmIGVyciAhPSBuaWwgewoJCQkJcmV0dXJuIGVycgoJCQl9CgkJCXJldHVybiB1dGlscy5HZW5lcmF0ZU9yQnJvYWRjYXN0TXNncyhjbGlDdHgsIHR4QmxkciwgW11zZGsuTXNne21zZ30pCgkJfSwKCX0KfQoKZnVuYyBHZXRDbWRTZXRDbGFpbShjZGMgKmNvZGVjLkNvZGVjKSAqY29icmEuQ29tbWFuZCB7CglyZXR1cm4gJmFtcDtjb2JyYS5Db21tYW5kewoJCVVzZTogICAmcXVvdDtzZXQtY2xhaW0gW2lkXSAgW3Byb29mXSZxdW90OywKCQlTaG9ydDogJnF1b3Q7U2V0IGEgbmV3IGNsYWltJnF1b3Q7LAoJCUFyZ3M6ICBjb2JyYS5FeGFjdEFyZ3MoMiksCgkJUnVuRTogZnVuYyhjbWQgKmNvYnJhLkNvbW1hbmQsIGFyZ3MgW11zdHJpbmcpIGVycm9yIHsKCQkJaWQgOj0gYXJnc1swXQoJCQlhcmdzUHJvb2YgOj0gc3RyaW5nKGFyZ3NbMV0pCgoJCQljbGlDdHggOj0gY29udGV4dC5OZXdDTElDb250ZXh0KCkuV2l0aENvZGVjKGNkYykKCQkJaW5CdWYgOj0gYnVmaW8uTmV3UmVhZGVyKGNtZC5Jbk9yU3RkaW4oKSkKCQkJdHhCbGRyIDo9IGF1dGguTmV3VHhCdWlsZGVyRnJvbUNMSShpbkJ1ZikuV2l0aFR4RW5jb2Rlcih1dGlscy5HZXRUeEVuY29kZXIoY2RjKSkKCQkJbXNnIDo9IHR5cGVzLk5ld01zZ1NldENsYWltKGNsaUN0eC5HZXRGcm9tQWRkcmVzcygpLCBpZCwgc3RyaW5nKGFyZ3NQcm9vZikpCgkJCWVyciA6PSBtc2cuVmFsaWRhdGVCYXNpYygpCgkJCWlmIGVyciAhPSBuaWwgewoJCQkJcmV0dXJuIGVycgoJCQl9CgkJCXJldHVybiB1dGlscy5HZW5lcmF0ZU9yQnJvYWRjYXN0TXNncyhjbGlDdHgsIHR4QmxkciwgW11zZGsuTXNne21zZ30pCgkJfSwKCX0KfQoKZnVuYyBHZXRDbWREZWxldGVDbGFpbShjZGMgKmNvZGVjLkNvZGVjKSAqY29icmEuQ29tbWFuZCB7CglyZXR1cm4gJmFtcDtjb2JyYS5Db21tYW5kewoJCVVzZTogICAmcXVvdDtkZWxldGUtY2xhaW0gW2lkXSZxdW90OywKCQlTaG9ydDogJnF1b3Q7RGVsZXRlIGEgbmV3IGNsYWltIGJ5IElEJnF1b3Q7LAoJCUFyZ3M6ICBjb2JyYS5FeGFjdEFyZ3MoMSksCgkJUnVuRTogZnVuYyhjbWQgKmNvYnJhLkNvbW1hbmQsIGFyZ3MgW11zdHJpbmcpIGVycm9yIHsKCgkJCWNsaUN0eCA6PSBjb250ZXh0Lk5ld0NMSUNvbnRleHQoKS5XaXRoQ29kZWMoY2RjKQoJCQlpbkJ1ZiA6PSBidWZpby5OZXdSZWFkZXIoY21kLkluT3JTdGRpbigpKQoJCQl0eEJsZHIgOj0gYXV0aC5OZXdUeEJ1aWxkZXJGcm9tQ0xJKGluQnVmKS5XaXRoVHhFbmNvZGVyKHV0aWxzLkdldFR4RW5jb2RlcihjZGMpKQoKCQkJbXNnIDo9IHR5cGVzLk5ld01zZ0RlbGV0ZUNsYWltKGFyZ3NbMF0sIGNsaUN0eC5HZXRGcm9tQWRkcmVzcygpKQoJCQllcnIgOj0gbXNnLlZhbGlkYXRlQmFzaWMoKQoJCQlpZiBlcnIgIT0gbmlsIHsKCQkJCXJldHVybiBlcnIKCQkJfQoJCQlyZXR1cm4gdXRpbHMuR2VuZXJhdGVPckJyb2FkY2FzdE1zZ3MoY2xpQ3R4LCB0eEJsZHIsIFtdc2RrLk1zZ3ttc2d9KQoJCX0sCgl9Cn0K"}}),c._v(" "),l("p",[c._v("As well as boilerplate "),l("code",[c._v("txClaim.go")]),c._v(" file in our Stargate application:")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBjbGkKCmltcG9ydCAoCgoJJnF1b3Q7Z2l0aHViLmNvbS9zcGYxMy9jb2JyYSZxdW90OwoKICAgICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvY2xpZW50JnF1b3Q7CgkmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL2NsaWVudC9mbGFncyZxdW90OwoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay9jbGllbnQvdHgmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vdXNlci9wb2ZlL3gvcG9mZS90eXBlcyZxdW90OwopCgpmdW5jIENtZENyZWF0ZUNsYWltKCkgKmNvYnJhLkNvbW1hbmQgewoJY21kIDo9ICZhbXA7Y29icmEuQ29tbWFuZHsKCQlVc2U6ICAgJnF1b3Q7Y3JlYXRlLWNsYWltIFtwcm9vZl0mcXVvdDssCgkJU2hvcnQ6ICZxdW90O0NyZWF0ZXMgYSBuZXcgY2xhaW0mcXVvdDssCgkJQXJnczogIGNvYnJhLkV4YWN0QXJncygxKSwKCQlSdW5FOiBmdW5jKGNtZCAqY29icmEuQ29tbWFuZCwgYXJncyBbXXN0cmluZykgZXJyb3IgewogICAgICAJCWFyZ3NQcm9vZiA6PSBzdHJpbmcoYXJnc1swXSkKCiAgICAgICAgCWNsaWVudEN0eCA6PSBjbGllbnQuR2V0Q2xpZW50Q29udGV4dEZyb21DbWQoY21kKQoJCQljbGllbnRDdHgsIGVyciA6PSBjbGllbnQuUmVhZFR4Q29tbWFuZEZsYWdzKGNsaWVudEN0eCwgY21kLkZsYWdzKCkpCgkJCWlmIGVyciAhPSBuaWwgewoJCQkJcmV0dXJuIGVycgoJCQl9CgoJCQltc2cgOj0gdHlwZXMuTmV3TXNnQ3JlYXRlQ2xhaW0oY2xpZW50Q3R4LkdldEZyb21BZGRyZXNzKCkuU3RyaW5nKCksIHN0cmluZyhhcmdzUHJvb2YpKQoJCQlpZiBlcnIgOj0gbXNnLlZhbGlkYXRlQmFzaWMoKTsgZXJyICE9IG5pbCB7CgkJCQlyZXR1cm4gZXJyCgkJCX0KCQkJcmV0dXJuIHR4LkdlbmVyYXRlT3JCcm9hZGNhc3RUeENMSShjbGllbnRDdHgsIGNtZC5GbGFncygpLCBtc2cpCgkJfSwKCX0KCglmbGFncy5BZGRUeEZsYWdzVG9DbWQoY21kKQoKICAgIHJldHVybiBjbWQKfQoKZnVuYyBDbWRVcGRhdGVDbGFpbSgpICpjb2JyYS5Db21tYW5kIHsKCWNtZCA6PSAmYW1wO2NvYnJhLkNvbW1hbmR7CgkJVXNlOiAgICZxdW90O3VwZGF0ZS1jbGFpbSBbaWRdIFtwcm9vZl0mcXVvdDssCgkJU2hvcnQ6ICZxdW90O1VwZGF0ZSBhIGNsYWltJnF1b3Q7LAoJCUFyZ3M6ICBjb2JyYS5FeGFjdEFyZ3MoMiksCgkJUnVuRTogZnVuYyhjbWQgKmNvYnJhLkNvbW1hbmQsIGFyZ3MgW11zdHJpbmcpIGVycm9yIHsKICAgICAgICAgICAgaWQgOj0gYXJnc1swXQogICAgICBhcmdzUHJvb2YgOj0gc3RyaW5nKGFyZ3NbMV0pCgogICAgICAgIAljbGllbnRDdHggOj0gY2xpZW50LkdldENsaWVudENvbnRleHRGcm9tQ21kKGNtZCkKCQkJY2xpZW50Q3R4LCBlcnIgOj0gY2xpZW50LlJlYWRUeENvbW1hbmRGbGFncyhjbGllbnRDdHgsIGNtZC5GbGFncygpKQoJCQlpZiBlcnIgIT0gbmlsIHsKCQkJCXJldHVybiBlcnIKCQkJfQoKCQkJbXNnIDo9IHR5cGVzLk5ld01zZ1VwZGF0ZUNsYWltKGNsaWVudEN0eC5HZXRGcm9tQWRkcmVzcygpLlN0cmluZygpLCBpZCwgc3RyaW5nKGFyZ3NQcm9vZikpCgkJCWlmIGVyciA6PSBtc2cuVmFsaWRhdGVCYXNpYygpOyBlcnIgIT0gbmlsIHsKCQkJCXJldHVybiBlcnIKCQkJfQoJCQlyZXR1cm4gdHguR2VuZXJhdGVPckJyb2FkY2FzdFR4Q0xJKGNsaWVudEN0eCwgY21kLkZsYWdzKCksIG1zZykKCQl9LAoJfQoKCWZsYWdzLkFkZFR4RmxhZ3NUb0NtZChjbWQpCgogICAgcmV0dXJuIGNtZAp9CgpmdW5jIENtZERlbGV0ZUNsYWltKCkgKmNvYnJhLkNvbW1hbmQgewoJY21kIDo9ICZhbXA7Y29icmEuQ29tbWFuZHsKCQlVc2U6ICAgJnF1b3Q7ZGVsZXRlLWNsYWltIFtpZF0gW3Byb29mXSZxdW90OywKCQlTaG9ydDogJnF1b3Q7RGVsZXRlIGEgY2xhaW0gYnkgaWQmcXVvdDssCgkJQXJnczogIGNvYnJhLkV4YWN0QXJncygxKSwKCQlSdW5FOiBmdW5jKGNtZCAqY29icmEuQ29tbWFuZCwgYXJncyBbXXN0cmluZykgZXJyb3IgewogICAgICAgICAgICBpZCA6PSBhcmdzWzBdCgogICAgICAgIAljbGllbnRDdHggOj0gY2xpZW50LkdldENsaWVudENvbnRleHRGcm9tQ21kKGNtZCkKCQkJY2xpZW50Q3R4LCBlcnIgOj0gY2xpZW50LlJlYWRUeENvbW1hbmRGbGFncyhjbGllbnRDdHgsIGNtZC5GbGFncygpKQoJCQlpZiBlcnIgIT0gbmlsIHsKCQkJCXJldHVybiBlcnIKCQkJfQoKCQkJbXNnIDo9IHR5cGVzLk5ld01zZ0RlbGV0ZUNsYWltKGNsaWVudEN0eC5HZXRGcm9tQWRkcmVzcygpLlN0cmluZygpLCBpZCkKCQkJaWYgZXJyIDo9IG1zZy5WYWxpZGF0ZUJhc2ljKCk7IGVyciAhPSBuaWwgewoJCQkJcmV0dXJuIGVycgoJCQl9CgkJCXJldHVybiB0eC5HZW5lcmF0ZU9yQnJvYWRjYXN0VHhDTEkoY2xpZW50Q3R4LCBjbWQuRmxhZ3MoKSwgbXNnKQoJCX0sCgl9CgoJZmxhZ3MuQWRkVHhGbGFnc1RvQ21kKGNtZCkKCiAgICByZXR1cm4gY21kCn0K"}}),c._v(" "),l("p",[c._v("If we compare the two files, we will notice that there is a difference in how the commands are defined. For instance, the Stargate version of the functions no longer require a codec as an argument - eg. "),l("code",[c._v("func GetCmdXClaim(cdc *codec.Codec)")]),c._v(" vs "),l("code",[c._v("func CmdXClaim()")]),c._v(". In this case, we can remove "),l("code",[c._v("cdc *codec.Codec")]),c._v(" from each of the functions as well as the "),l("code",[c._v('"github.com/cosmos/cosmos-sdk/codec"')]),c._v(" import.")]),c._v(" "),l("p",[c._v("Another difference you will notice is how the application reads CLI commands. This includes reading the command, building the message, and Generating or broadcasting the command. For instance, the contents of the "),l("code",[c._v("GetCmdCreateClaim")]),c._v(" command will be updated as such when following the updates generated by Starport and described in further detail "),l("a",{attrs:{href:"https://docs.cosmos.network/master/migrations/app_and_modules.html#cli",target:"_blank",rel:"noopener noreferrer"}},[c._v("here"),l("OutboundLink")],1),c._v(".")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBHZXRDbWRDcmVhdGVDbGFpbSgpICpjb2JyYS5Db21tYW5kIHsKCWNtZCA6PSAmYW1wO2NvYnJhLkNvbW1hbmR7CgkJVXNlOiAgICZxdW90O2NyZWF0ZS1jbGFpbSBbcHJvb2ZdJnF1b3Q7LAoJCVNob3J0OiAmcXVvdDtDcmVhdGVzIGEgbmV3IGNsYWltJnF1b3Q7LAoJCUFyZ3M6ICBjb2JyYS5FeGFjdEFyZ3MoMSksCgkJUnVuRTogZnVuYyhjbWQgKmNvYnJhLkNvbW1hbmQsIGFyZ3MgW11zdHJpbmcpIGVycm9yIHsKCQkJaGFzaGVyIDo9IHNoYTI1Ni5OZXcoKQoJCQlzLCBfIDo9IGlvdXRpbC5SZWFkRmlsZShhcmdzWzBdKQoJCQloYXNoZXIuV3JpdGUocykKCQkJYXJnc1Byb29mIDo9IGhleC5FbmNvZGVUb1N0cmluZyhoYXNoZXIuU3VtKG5pbCkpCiAgICAgICAgCWNsaWVudEN0eCA6PSBjbGllbnQuR2V0Q2xpZW50Q29udGV4dEZyb21DbWQoY21kKQoJCQljbGllbnRDdHgsIGVyciA6PSBjbGllbnQuUmVhZFR4Q29tbWFuZEZsYWdzKGNsaWVudEN0eCwgY21kLkZsYWdzKCkpCgkJCWlmIGVyciAhPSBuaWwgewoJCQkJcmV0dXJuIGVycgoJCQl9CgoJCQltc2cgOj0gdHlwZXMuTmV3TXNnQ3JlYXRlQ2xhaW0oY2xpZW50Q3R4LkdldEZyb21BZGRyZXNzKCkuU3RyaW5nKCksIHN0cmluZyhhcmdzUHJvb2YpKQoJCQlpZiBlcnIgOj0gbXNnLlZhbGlkYXRlQmFzaWMoKTsgZXJyICE9IG5pbCB7CgkJCQlyZXR1cm4gZXJyCgkJCX0KCQkJcmV0dXJuIHR4LkdlbmVyYXRlT3JCcm9hZGNhc3RUeENMSShjbGllbnRDdHgsIGNtZC5GbGFncygpLCBtc2cpCgkJfSwKCX0KCglmbGFncy5BZGRUeEZsYWdzVG9DbWQoY21kKQoKICAgIHJldHVybiBjbWQKfQo="}}),c._v(" "),l("p",[c._v("Once we finish updating the rest of our custom logic, our new file "),l("code",[c._v("stargate/pofe/x/pofe/client/cli/txClaim.go")]),c._v(" should look as such:")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBjbGkKCmltcG9ydCAoCgkmcXVvdDtjcnlwdG8vc2hhMjU2JnF1b3Q7CgkmcXVvdDtlbmNvZGluZy9oZXgmcXVvdDsKCSZxdW90O2lvL2lvdXRpbCZxdW90OwoKCSZxdW90O2dpdGh1Yi5jb20vc3BmMTMvY29icmEmcXVvdDsKCgkmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL2NsaWVudCZxdW90OwoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay9jbGllbnQvZmxhZ3MmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvY2xpZW50L3R4JnF1b3Q7CgkmcXVvdDtnaXRodWIuY29tL3VzZXIvcG9mZS94L3BvZmUvdHlwZXMmcXVvdDsKKQoKZnVuYyBHZXRDbWRDcmVhdGVDbGFpbSgpICpjb2JyYS5Db21tYW5kIHsKCWNtZCA6PSAmYW1wO2NvYnJhLkNvbW1hbmR7CgkJVXNlOiAgICZxdW90O2NyZWF0ZS1jbGFpbSBbcHJvb2ZdJnF1b3Q7LAoJCVNob3J0OiAmcXVvdDtDcmVhdGVzIGEgbmV3IGNsYWltJnF1b3Q7LAoJCUFyZ3M6ICBjb2JyYS5FeGFjdEFyZ3MoMSksCgkJUnVuRTogZnVuYyhjbWQgKmNvYnJhLkNvbW1hbmQsIGFyZ3MgW11zdHJpbmcpIGVycm9yIHsKCQkJaGFzaGVyIDo9IHNoYTI1Ni5OZXcoKQoJCQlzLCBfIDo9IGlvdXRpbC5SZWFkRmlsZShhcmdzWzBdKQoJCQloYXNoZXIuV3JpdGUocykKCQkJYXJnc1Byb29mIDo9IGhleC5FbmNvZGVUb1N0cmluZyhoYXNoZXIuU3VtKG5pbCkpCgkJCWNsaWVudEN0eCA6PSBjbGllbnQuR2V0Q2xpZW50Q29udGV4dEZyb21DbWQoY21kKQoJCQljbGllbnRDdHgsIGVyciA6PSBjbGllbnQuUmVhZFR4Q29tbWFuZEZsYWdzKGNsaWVudEN0eCwgY21kLkZsYWdzKCkpCgkJCWlmIGVyciAhPSBuaWwgewoJCQkJcmV0dXJuIGVycgoJCQl9CgoJCQltc2cgOj0gdHlwZXMuTmV3TXNnQ3JlYXRlQ2xhaW0oY2xpZW50Q3R4LkdldEZyb21BZGRyZXNzKCkuU3RyaW5nKCksIHN0cmluZyhhcmdzUHJvb2YpKQoJCQlpZiBlcnIgOj0gbXNnLlZhbGlkYXRlQmFzaWMoKTsgZXJyICE9IG5pbCB7CgkJCQlyZXR1cm4gZXJyCgkJCX0KCQkJcmV0dXJuIHR4LkdlbmVyYXRlT3JCcm9hZGNhc3RUeENMSShjbGllbnRDdHgsIGNtZC5GbGFncygpLCBtc2cpCgkJfSwKCX0KCglmbGFncy5BZGRUeEZsYWdzVG9DbWQoY21kKQoKCXJldHVybiBjbWQKfQoKZnVuYyBHZXRDbWRVcGRhdGVDbGFpbSgpICpjb2JyYS5Db21tYW5kIHsKCWNtZCA6PSAmYW1wO2NvYnJhLkNvbW1hbmR7CgkJVXNlOiAgICZxdW90O3VwZGF0ZS1jbGFpbSBbaWRdIFtwcm9vZl0mcXVvdDssCgkJU2hvcnQ6ICZxdW90O1VwZGF0ZSBhIGNsYWltJnF1b3Q7LAoJCUFyZ3M6ICBjb2JyYS5FeGFjdEFyZ3MoMiksCgkJUnVuRTogZnVuYyhjbWQgKmNvYnJhLkNvbW1hbmQsIGFyZ3MgW11zdHJpbmcpIGVycm9yIHsKCQkJaWQgOj0gYXJnc1swXQoJCQlhcmdzUHJvb2YgOj0gc3RyaW5nKGFyZ3NbMV0pCgoJCQljbGllbnRDdHggOj0gY2xpZW50LkdldENsaWVudENvbnRleHRGcm9tQ21kKGNtZCkKCQkJY2xpZW50Q3R4LCBlcnIgOj0gY2xpZW50LlJlYWRUeENvbW1hbmRGbGFncyhjbGllbnRDdHgsIGNtZC5GbGFncygpKQoJCQlpZiBlcnIgIT0gbmlsIHsKCQkJCXJldHVybiBlcnIKCQkJfQoKCQkJbXNnIDo9IHR5cGVzLk5ld01zZ1VwZGF0ZUNsYWltKGNsaWVudEN0eC5HZXRGcm9tQWRkcmVzcygpLlN0cmluZygpLCBpZCwgc3RyaW5nKGFyZ3NQcm9vZikpCgkJCWlmIGVyciA6PSBtc2cuVmFsaWRhdGVCYXNpYygpOyBlcnIgIT0gbmlsIHsKCQkJCXJldHVybiBlcnIKCQkJfQoJCQlyZXR1cm4gdHguR2VuZXJhdGVPckJyb2FkY2FzdFR4Q0xJKGNsaWVudEN0eCwgY21kLkZsYWdzKCksIG1zZykKCQl9LAoJfQoKCWZsYWdzLkFkZFR4RmxhZ3NUb0NtZChjbWQpCgoJcmV0dXJuIGNtZAp9CgpmdW5jIEdldENtZERlbGV0ZUNsYWltKCkgKmNvYnJhLkNvbW1hbmQgewoJY21kIDo9ICZhbXA7Y29icmEuQ29tbWFuZHsKCQlVc2U6ICAgJnF1b3Q7ZGVsZXRlLWNsYWltIFtpZF0gW3Byb29mXSZxdW90OywKCQlTaG9ydDogJnF1b3Q7RGVsZXRlIGEgY2xhaW0gYnkgaWQmcXVvdDssCgkJQXJnczogIGNvYnJhLkV4YWN0QXJncygxKSwKCQlSdW5FOiBmdW5jKGNtZCAqY29icmEuQ29tbWFuZCwgYXJncyBbXXN0cmluZykgZXJyb3IgewoJCQlpZCA6PSBhcmdzWzBdCgoJCQljbGllbnRDdHggOj0gY2xpZW50LkdldENsaWVudENvbnRleHRGcm9tQ21kKGNtZCkKCQkJY2xpZW50Q3R4LCBlcnIgOj0gY2xpZW50LlJlYWRUeENvbW1hbmRGbGFncyhjbGllbnRDdHgsIGNtZC5GbGFncygpKQoJCQlpZiBlcnIgIT0gbmlsIHsKCQkJCXJldHVybiBlcnIKCQkJfQoKCQkJbXNnIDo9IHR5cGVzLk5ld01zZ0RlbGV0ZUNsYWltKGNsaWVudEN0eC5HZXRGcm9tQWRkcmVzcygpLlN0cmluZygpLCBpZCkKCQkJaWYgZXJyIDo9IG1zZy5WYWxpZGF0ZUJhc2ljKCk7IGVyciAhPSBuaWwgewoJCQkJcmV0dXJuIGVycgoJCQl9CgkJCXJldHVybiB0eC5HZW5lcmF0ZU9yQnJvYWRjYXN0VHhDTEkoY2xpZW50Q3R4LCBjbWQuRmxhZ3MoKSwgbXNnKQoJCX0sCgl9CgoJZmxhZ3MuQWRkVHhGbGFnc1RvQ21kKGNtZCkKCglyZXR1cm4gY21kCn0KCg=="}}),c._v(" "),l("p",[c._v("The last thing we need to do is rename the CLI commands in the "),l("code",[c._v("stargate/pofe/x/pofe/client/cli/tx.go")]),c._v(" file:")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBjbGkKCmltcG9ydCAoCgkmcXVvdDtmbXQmcXVvdDsKCgkmcXVvdDtnaXRodWIuY29tL3NwZjEzL2NvYnJhJnF1b3Q7CgoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay9jbGllbnQmcXVvdDsKCS8vICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvY2xpZW50L2ZsYWdzJnF1b3Q7CgkmcXVvdDtnaXRodWIuY29tL3VzZXIvcG9mZS94L3BvZmUvdHlwZXMmcXVvdDsKKQoKLy8gR2V0VHhDbWQgcmV0dXJucyB0aGUgdHJhbnNhY3Rpb24gY29tbWFuZHMgZm9yIHRoaXMgbW9kdWxlCmZ1bmMgR2V0VHhDbWQoKSAqY29icmEuQ29tbWFuZCB7CgljbWQgOj0gJmFtcDtjb2JyYS5Db21tYW5kewoJCVVzZTogICAgICAgICAgICAgICAgICAgICAgICB0eXBlcy5Nb2R1bGVOYW1lLAoJCVNob3J0OiAgICAgICAgICAgICAgICAgICAgICBmbXQuU3ByaW50ZigmcXVvdDslcyB0cmFuc2FjdGlvbnMgc3ViY29tbWFuZHMmcXVvdDssIHR5cGVzLk1vZHVsZU5hbWUpLAoJCURpc2FibGVGbGFnUGFyc2luZzogICAgICAgICB0cnVlLAoJCVN1Z2dlc3Rpb25zTWluaW11bURpc3RhbmNlOiAyLAoJCVJ1bkU6ICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQuVmFsaWRhdGVDbWQsCgl9CgogICAgLy8gdGhpcyBsaW5lIGlzIHVzZWQgYnkgc3RhcnBvcnQgc2NhZmZvbGRpbmcgIyAxCgoJY21kLkFkZENvbW1hbmQoR2V0Q21kQ3JlYXRlQ2xhaW0oKSkKCWNtZC5BZGRDb21tYW5kKEdldENtZFVwZGF0ZUNsYWltKCkpCgljbWQuQWRkQ29tbWFuZChHZXRDbWREZWxldGVDbGFpbSgpKQoKCglyZXR1cm4gY21kIAp9Cgo="}}),c._v(" "),l("p",[c._v("Once this has been updated, we can try to run the app with "),l("code",[c._v("starport serve")]),c._v(", and our application should run as expected!")]),c._v(" "),l("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBwb2ZlZCB0eCBwb2ZlIGNyZWF0ZS1jbGFpbSAkKHdoaWNoIHBvZmVkKSAtLWZyb209dXNlcjEKCgp7JnF1b3Q7Ym9keSZxdW90Ozp7JnF1b3Q7bWVzc2FnZXMmcXVvdDs6W3smcXVvdDtAdHlwZSZxdW90OzomcXVvdDsvbHVraXRzYnJpYW4ucG9mZS5wb2ZlLk1zZ0NyZWF0ZUNsYWltJnF1b3Q7LCZxdW90O2NyZWF0b3ImcXVvdDs6JnF1b3Q7Y29zbW9zMWV0NzZqNjM3aGF4cHA0a3pkZGFoNmw2Y2Z4bjl5dGNxc3JsdGowJnF1b3Q7LCZxdW90O3Byb29mJnF1b3Q7OiZxdW90O2QzMDFjNDkzM2M2ODhkMWQ4OTBlN2I0NGZlMTRkZjkxZTRiZjE0NzE5YzhhMWZkNzIwNDQ1MzY2YjA2MDUwN2QmcXVvdDt9XSwmcXVvdDttZW1vJnF1b3Q7OiZxdW90OyZxdW90OywmcXVvdDt0aW1lb3V0X2hlaWdodCZxdW90OzomcXVvdDswJnF1b3Q7LCZxdW90O2V4dGVuc2lvbl9vcHRpb25zJnF1b3Q7OltdLCZxdW90O25vbl9jcml0aWNhbF9leHRlbnNpb25fb3B0aW9ucyZxdW90OzpbXX0sJnF1b3Q7YXV0aF9pbmZvJnF1b3Q7OnsmcXVvdDtzaWduZXJfaW5mb3MmcXVvdDs6W10sJnF1b3Q7ZmVlJnF1b3Q7OnsmcXVvdDthbW91bnQmcXVvdDs6W10sJnF1b3Q7Z2FzX2xpbWl0JnF1b3Q7OiZxdW90OzIwMDAwMCZxdW90OywmcXVvdDtwYXllciZxdW90OzomcXVvdDsmcXVvdDssJnF1b3Q7Z3JhbnRlciZxdW90OzomcXVvdDsmcXVvdDt9fSwmcXVvdDtzaWduYXR1cmVzJnF1b3Q7OltdfQoKY29uZmlybSB0cmFuc2FjdGlvbiBiZWZvcmUgc2lnbmluZyBhbmQgYnJvYWRjYXN0aW5nIFt5L05dOiB5CnsmcXVvdDtoZWlnaHQmcXVvdDs6JnF1b3Q7MTk5JnF1b3Q7LCZxdW90O3R4aGFzaCZxdW90OzomcXVvdDs1MzYyNThERUZBOEE0QzQ2RkM4QUJBNzU2ODRDOTY3RDYxQkFCQkI0NjcwNThGODM4MUI4QUI1QTM0MDBBOUYzJnF1b3Q7LCZxdW90O2NvZGVzcGFjZSZxdW90OzomcXVvdDsmcXVvdDssJnF1b3Q7Y29kZSZxdW90OzowLCZxdW90O2RhdGEmcXVvdDs6JnF1b3Q7MEEwRDBBMEI0MzcyNjU2MTc0NjU0MzZDNjE2OTZEJnF1b3Q7LCZxdW90O3Jhd19sb2cmcXVvdDs6JnF1b3Q7W3tcJnF1b3Q7ZXZlbnRzXCZxdW90Ozpbe1wmcXVvdDt0eXBlXCZxdW90OzpcJnF1b3Q7bWVzc2FnZVwmcXVvdDssXCZxdW90O2F0dHJpYnV0ZXNcJnF1b3Q7Olt7XCZxdW90O2tleVwmcXVvdDs6XCZxdW90O2FjdGlvblwmcXVvdDssXCZxdW90O3ZhbHVlXCZxdW90OzpcJnF1b3Q7Q3JlYXRlQ2xhaW1cJnF1b3Q7fV19XX1dJnF1b3Q7LCZxdW90O2xvZ3MmcXVvdDs6W3smcXVvdDttc2dfaW5kZXgmcXVvdDs6MCwmcXVvdDtsb2cmcXVvdDs6JnF1b3Q7JnF1b3Q7LCZxdW90O2V2ZW50cyZxdW90OzpbeyZxdW90O3R5cGUmcXVvdDs6JnF1b3Q7bWVzc2FnZSZxdW90OywmcXVvdDthdHRyaWJ1dGVzJnF1b3Q7Olt7JnF1b3Q7a2V5JnF1b3Q7OiZxdW90O2FjdGlvbiZxdW90OywmcXVvdDt2YWx1ZSZxdW90OzomcXVvdDtDcmVhdGVDbGFpbSZxdW90O31dfV19XSwmcXVvdDtpbmZvJnF1b3Q7OiZxdW90OyZxdW90OywmcXVvdDtnYXNfd2FudGVkJnF1b3Q7OiZxdW90OzIwMDAwMCZxdW90OywmcXVvdDtnYXNfdXNlZCZxdW90OzomcXVvdDs0NzAxMSZxdW90OywmcXVvdDt0eCZxdW90OzpudWxsLCZxdW90O3RpbWVzdGFtcCZxdW90OzomcXVvdDsmcXVvdDt9Cg=="}}),c._v(" "),l("h2",{attrs:{id:"migrating-your-own-application"}},[l("a",{staticClass:"header-anchor",attrs:{href:"#migrating-your-own-application"}},[c._v("#")]),c._v(" Migrating your own application")]),c._v(" "),l("p",[c._v("Throughout this tutorial, you learned how to use Starport to migrate your application from v0.39 to v0.40 and later Stargate. Starport always generates the most up-to-date Cosmos SDK boilerplate code.")]),c._v(" "),l("p",[c._v("Although it is possible to manually change your application code, this tutorial minimizes the changes required to migrate an application. Instead of manually modifying each file that required updates, you migrated only the custom logic that was implemented. The generated boilerplate code also serves as a useful reference to examine the fundamental changes within the application.")])],1)}),[],!1,null,null,null);g.default=d.exports}}]);