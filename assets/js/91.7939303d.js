(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{617:function(l,Z,c){"use strict";c.r(Z);var b=c(0),g=Object(b.a)({},(function(){var l=this,Z=l.$createElement,c=l._self._c||Z;return c("ContentSlotsDistributor",{attrs:{"slot-key":l.$parent.slotKey}},[c("h1",{attrs:{id:"create-the-order-book"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#create-the-order-book"}},[l._v("#")]),l._v(" Create the Order Book")]),l._v(" "),c("p",[l._v("In this chapter you implement the code for the order book, for buy orders and sell orders.")]),l._v(" "),c("p",[l._v("In this chapter you will create a "),c("code",[l._v("orderbook.go")]),l._v(" file with the interface for the order book.\nThe order book will allow to publish buy or sell orders. The order book for a certain pair of token has to be registered first. After registering the order book for a pair of token, you can add sell orders and buy orders.\nYou will create the "),c("code",[l._v("sellorder.go")]),l._v(" file with the interface of a sell order. A sell order contains the data of the token denomination and a price you offer to sell a token for.\nYou will create the "),c("code",[l._v("buyorder.go")]),l._v(" file with the interface of a buy order. A buy order contains the data of the token denomination and a price you offer to buy a token for. Buy orders and sell orders will live on different blockchain apps.\nWhen a buy and a sell order match, the exchange will be executed.")]),l._v(" "),c("h2",{attrs:{id:"add-the-order-book"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#add-the-order-book"}},[l._v("#")]),l._v(" Add The Order Book")]),l._v(" "),c("p",[l._v("The protobuffer definition defines the data that an order book has.\nAdd the "),c("code",[l._v("Order")]),l._v(" message to the "),c("code",[l._v("order.proto")]),l._v(" file.")]),l._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"proto",base64:"Ly8gcHJvdG8vaWJjZGV4L29yZGVyLnByb3RvCnN5bnRheCA9ICZxdW90O3Byb3RvMyZxdW90OzsKcGFja2FnZSB1c2VybmFtZS5pbnRlcmNoYW5nZS5pYmNkZXg7CgpvcHRpb24gZ29fcGFja2FnZSA9ICZxdW90O2dpdGh1Yi5jb20vdXNlcm5hbWUvaW50ZXJjaGFuZ2UveC9pYmNkZXgvdHlwZXMmcXVvdDs7CgptZXNzYWdlIE9yZGVyIHsKICBpbnQzMiBpZCA9IDE7CiAgc3RyaW5nIGNyZWF0b3IgPSAyOwogIGludDMyIGFtb3VudCA9IDM7CiAgaW50MzIgcHJpY2UgPSA0Owp9Cg=="}}),l._v(" "),c("p",[l._v("Create a new file "),c("code",[l._v("orderbook.go")]),l._v(" in the "),c("code",[l._v("ibcdex")]),l._v(" module "),c("code",[l._v("types")]),l._v(" directory.\nIn this file, you will define the logic to create a new order book.")]),l._v(" "),c("p",[l._v("Create a "),c("code",[l._v("orderbook.go")]),l._v(" file and add the code:")]),l._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC9pYmNkZXgvdHlwZXMvb3JkZXJib29rLmdvCnBhY2thZ2UgdHlwZXMKCmltcG9ydCAoCgkmcXVvdDtlcnJvcnMmcXVvdDsKCSZxdW90O3NvcnQmcXVvdDsKKQoKY29uc3QgKAoJTWF4QW1vdW50ID0gaW50MzIoMTAwMDAwKQoJTWF4UHJpY2UgID0gaW50MzIoMTAwMDAwKQopCgp2YXIgKAoJRXJyTWF4QW1vdW50ICAgICA9IGVycm9ycy5OZXcoJnF1b3Q7bWF4IGFtb3VudCByZWFjaGVkJnF1b3Q7KQoJRXJyTWF4UHJpY2UgICAgICA9IGVycm9ycy5OZXcoJnF1b3Q7bWF4IHByaWNlIHJlYWNoZWQmcXVvdDspCglFcnJaZXJvQW1vdW50ICAgID0gZXJyb3JzLk5ldygmcXVvdDthbW91bnQgaXMgemVybyZxdW90OykKCUVyclplcm9QcmljZSAgICAgPSBlcnJvcnMuTmV3KCZxdW90O3ByaWNlIGlzIHplcm8mcXVvdDspCglFcnJPcmRlck5vdEZvdW5kID0gZXJyb3JzLk5ldygmcXVvdDtvcmRlciBub3QgZm91bmQmcXVvdDspCikKCnR5cGUgT3JkZXJCb29rIGludGVyZmFjZSB7Cglzb3J0LkludGVyZmFjZQoJSW5zZXJ0T3JkZXIoT3JkZXIpIE9yZGVyQm9vawoJR2V0T3JkZXIoaW50KSAoT3JkZXIsIGVycm9yKQoJU2V0T3JkZXIoaW50LCBPcmRlcikgKE9yZGVyQm9vaywgZXJyb3IpCglHZXROZXh0T3JkZXJJRCgpIGludDMyCglJbmNyZW1lbnROZXh0T3JkZXJJRCgpIE9yZGVyQm9vawoJR2V0T3JkZXJGcm9tSUQoaW50MzIpIChPcmRlciwgZXJyb3IpCglSZW1vdmVPcmRlckZyb21JRChpbnQzMikgKE9yZGVyQm9vaywgZXJyb3IpCn0KCi8vIFVwZGF0ZU9yZGVyQm9vayB1cGRhdGVzIGFuIG9yZGVyIGJvb2sgd2l0aCBhbiBvcmRlcgovLyBpZiB0aGUgSUQgYWxyZWFkeSBleGlzdCwgaXQgYXBwZW5kIHRoZSBhbW91bnQgdG8gdGhlIGV4aXN0aW5nIG9yZGVyICh3aXRob3V0IGNoZWNraW5nIHByaWNlKQovLyBpZiBpdCBkb2Vzbid0IGV4aXN0LCB0aGUgb3JkZXIgaXMgaW5zZXJ0ZWQKZnVuYyBVcGRhdGVPcmRlckJvb2soYm9vayBPcmRlckJvb2ssIG9yZGVyIE9yZGVyKSBPcmRlckJvb2sgewoJLy8gU2VhcmNoIG9mIHRoZSBvcmRlciBvZiB0aGUgc2FtZSBJRAoJdmFyIGZvdW5kIGJvb2wKCXZhciBvcmRlclRvVXBkYXRlIE9yZGVyCgl2YXIgaSBpbnQKCWZvciBpID0gYm9vay5MZW4oKSAtIDE7IGkgJmd0Oz0gMDsgaS0tIHsKCQlvcmRlclRvVXBkYXRlLCBfID0gYm9vay5HZXRPcmRlcihpKQoJCWlmIG9yZGVyVG9VcGRhdGUuSWQgPT0gb3JkZXIuSWQgewoJCQlmb3VuZCA9IHRydWUKCQkJYnJlYWsKCQl9Cgl9CgoJLy8gSWYgb3JkZXIgZm91bmQKCWlmIGZvdW5kIHsKCQlvcmRlclRvVXBkYXRlLkFtb3VudCArPSBvcmRlci5BbW91bnQKCQlib29rLCBfID0gYm9vay5TZXRPcmRlcihpLCBvcmRlclRvVXBkYXRlKQoJfSBlbHNlIHsKCQlib29rID0gYm9vay5JbnNlcnRPcmRlcihvcmRlcikKCX0KCglyZXR1cm4gYm9vawp9CgovLyBSZXN0b3JlT3JkZXJCb29rIHJlc3RvcmVzIHRoZSBvcmRlcmJvb2sgZnJvbSBhbiBvcmRlcmJvb2sgdHJhbnNpdGlvbgpmdW5jIFJlc3RvcmVPcmRlckJvb2soYm9vayBPcmRlckJvb2ssIGxpcXVpZGF0ZWQgW11PcmRlcikgT3JkZXJCb29rIHsKCS8vIFJlc3RvcmUgYWxsIGxpcXVpZGF0aW9uIGluc2lkZSB0aGUgb3JkZXJib29rCglmb3IgXywgbGlxdWlkYXRpb24gOj0gcmFuZ2UgbGlxdWlkYXRlZCB7CgkJYm9vayA9IFVwZGF0ZU9yZGVyQm9vayhib29rLCBsaXF1aWRhdGlvbikKCX0KCglyZXR1cm4gYm9vawp9CgovLyBBcHBlbmRPcmRlciBpbml0aWFsaXplcyBhbmQgYXBwZW5kcyBhIG5ldyBvcmRlciBpbiBhIGJvb2sgZnJvbSBvcmRlciBpbmZvcm1hdGlvbgpmdW5jIEFwcGVuZE9yZGVyKGJvb2sgT3JkZXJCb29rLCBjcmVhdG9yIHN0cmluZywgYW1vdW50IGludDMyLCBwcmljZSBpbnQzMikgKE9yZGVyQm9vaywgaW50MzIsIGVycm9yKSB7CglpZiBlcnIgOj0gY2hlY2tBbW91bnRBbmRQcmljZShhbW91bnQsIHByaWNlKTsgZXJyICE9IG5pbCB7CgkJcmV0dXJuIGJvb2ssIDAsIGVycgoJfQoKCS8vIEluaXRpYWxpemUgdGhlIG9yZGVyCgl2YXIgb3JkZXIgT3JkZXIKCW9yZGVyLklkID0gYm9vay5HZXROZXh0T3JkZXJJRCgpCglvcmRlci5DcmVhdG9yID0gY3JlYXRvcgoJb3JkZXIuQW1vdW50ID0gYW1vdW50CglvcmRlci5QcmljZSA9IHByaWNlCgoJLy8gSW5jcmVtZW50IElEIHRyYWNrZXIKCWJvb2sgPSBib29rLkluY3JlbWVudE5leHRPcmRlcklEKCkKCgkvLyBJbnNlcnQgdGhlIG9yZGVyCglib29rID0gYm9vay5JbnNlcnRPcmRlcihvcmRlcikKCglyZXR1cm4gYm9vaywgb3JkZXIuSWQsIG5pbAp9CgovLyBjaGVja0Ftb3VudEFuZFByaWNlIGNoZWNrcyBjb3JyZWN0IGFtb3VudCBvciBwcmljZQpmdW5jIGNoZWNrQW1vdW50QW5kUHJpY2UoYW1vdW50IGludDMyLCBwcmljZSBpbnQzMikgZXJyb3IgewoJaWYgYW1vdW50ID09IGludDMyKDApIHsKCQlyZXR1cm4gRXJyWmVyb0Ftb3VudAoJfQoJaWYgYW1vdW50ICZndDsgTWF4QW1vdW50IHsKCQlyZXR1cm4gRXJyTWF4QW1vdW50Cgl9CglpZiBwcmljZSA9PSBpbnQzMigwKSB7CgkJcmV0dXJuIEVyclplcm9QcmljZQoJfQoJaWYgcHJpY2UgJmd0OyBNYXhQcmljZSB7CgkJcmV0dXJuIEVyck1heFByaWNlCgl9CgoJcmV0dXJuIG5pbAp9Cg=="}}),l._v(" "),c("h2",{attrs:{id:"add-the-sellorder"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#add-the-sellorder"}},[l._v("#")]),l._v(" Add The Sellorder")]),l._v(" "),c("p",[l._v("Modify the "),c("code",[l._v("sellOrderBook.proto")]),l._v(" file to have the fields for creating a sell order on the order book.\nThe proto definition for the "),c("code",[l._v("SellOrderBook")]),l._v(" should look like follows:")]),l._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"proto",base64:"Ly8gcHJvdG8vaWJjZGV4L3NlbGxPcmRlckJvb2sucHJvdG8Kc3ludGF4ID0gJnF1b3Q7cHJvdG8zJnF1b3Q7OwpwYWNrYWdlIHVzZXJuYW1lLmludGVyY2hhbmdlLmliY2RleDsKCm9wdGlvbiBnb19wYWNrYWdlID0gJnF1b3Q7Z2l0aHViLmNvbS91c2VybmFtZS9pbnRlcmNoYW5nZS94L2liY2RleC90eXBlcyZxdW90OzsKCmltcG9ydCAmcXVvdDtpYmNkZXgvb3JkZXIucHJvdG8mcXVvdDs7IC8vICZsdDstLQoKbWVzc2FnZSBTZWxsT3JkZXJCb29rIHsKICBzdHJpbmcgY3JlYXRvciA9IDE7CiAgc3RyaW5nIGluZGV4ID0gMjsKICBpbnQzMiBvcmRlcklEVHJhY2sgPSAzOwogIHN0cmluZyBhbW91bnREZW5vbSA9IDQ7CiAgc3RyaW5nIHByaWNlRGVub20gPSA1OwogIHJlcGVhdGVkIE9yZGVyIG9yZGVycyA9IDY7ICAvLyAmbHQ7LS0KfQo="}}),l._v(" "),c("p",[l._v("For the code of the sell orders, create a "),c("code",[l._v("sellorder.go")]),l._v(" file in the "),c("code",[l._v("types")]),l._v(" directory and add the following code:")]),l._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC9pYmNkZXgvdHlwZXMvc2VsbG9yZGVyLmdvCnBhY2thZ2UgdHlwZXMKCmltcG9ydCAoCgkmcXVvdDtzb3J0JnF1b3Q7CikKCi8vIHNvcnQuSW50ZXJmYWNlCmZ1bmMgKGJvb2sgU2VsbE9yZGVyQm9vaykgTGVuKCkgaW50IHsKCXJldHVybiBsZW4oYm9vay5PcmRlcnMpCn0KZnVuYyAoYm9vayBTZWxsT3JkZXJCb29rKSBMZXNzKGksIGogaW50KSBib29sIHsKCXJldHVybiBib29rLk9yZGVyc1tpXS5QcmljZSAmZ3Q7IGJvb2suT3JkZXJzW2pdLlByaWNlCn0KZnVuYyAoYm9vayBTZWxsT3JkZXJCb29rKSBTd2FwKGksIGogaW50KSB7Cglib29rLk9yZGVyc1tpXSwgYm9vay5PcmRlcnNbal0gPSBib29rLk9yZGVyc1tqXSwgYm9vay5PcmRlcnNbaV0KfQoKLy8gSW5zZXJ0T3JkZXIgaW5zZXJ0cyB0aGUgb3JkZXIgaW4gdGhlIGRlY3JlYXNpbmcgb3JkZXIgaW4gdGhlIGJvb2sKLy8gaXQgZG9lc24ndCBzZXQgdGhlIElEIG9yIGNoZWNrIGlmIHRoZSBJRCBhbHJlYWR5IGV4aXN0CmZ1bmMgKGJvb2sgU2VsbE9yZGVyQm9vaykgSW5zZXJ0T3JkZXIob3JkZXIgT3JkZXIpIE9yZGVyQm9vayB7CgkvLyBJbnNlcnQgdGhlIG9yZGVyIGluIHRoZSBpbmNyZWFzaW5nIG9yZGVyCglpZiBsZW4oYm9vay5PcmRlcnMpICZndDsgMCB7CgkJaSA6PSBzb3J0LlNlYXJjaChsZW4oYm9vay5PcmRlcnMpLCBmdW5jKGkgaW50KSBib29sIHsgcmV0dXJuIGJvb2suT3JkZXJzW2ldLlByaWNlICZsdDsgb3JkZXIuUHJpY2UgfSkKCQlvcmRlcnMgOj0gYXBwZW5kKGJvb2suT3JkZXJzLCAmYW1wO29yZGVyKQoJCWNvcHkob3JkZXJzW2krMTpdLCBvcmRlcnNbaTpdKQoJCW9yZGVyc1tpXSA9ICZhbXA7b3JkZXIKCQlib29rLk9yZGVycyA9IG9yZGVycwoJfSBlbHNlIHsKCQlib29rLk9yZGVycyA9IGFwcGVuZChib29rLk9yZGVycywgJmFtcDtvcmRlcikKCX0KCglyZXR1cm4gYm9vawp9CgovLyBHZXRPcmRlciBnZXRzIHRoZSBvcmRlciBmcm9tIGFuIGluZGV4CmZ1bmMgKGJvb2sgU2VsbE9yZGVyQm9vaykgR2V0T3JkZXIoaW5kZXggaW50KSAob3JkZXIgT3JkZXIsIGVyciBlcnJvcikgewoJaWYgaW5kZXggJmd0Oz0gbGVuKGJvb2suT3JkZXJzKSB7CgkJcmV0dXJuIG9yZGVyLCBFcnJPcmRlck5vdEZvdW5kCgl9CgoJcmV0dXJuICpib29rLk9yZGVyc1tpbmRleF0sIG5pbAp9CgovLyBTZXRPcmRlciBnZXRzIHRoZSBvcmRlciBmcm9tIGFuIGluZGV4CmZ1bmMgKGJvb2sgU2VsbE9yZGVyQm9vaykgU2V0T3JkZXIoaW5kZXggaW50LCBvcmRlciBPcmRlcikgKE9yZGVyQm9vaywgZXJyb3IpIHsKCWlmIGluZGV4ICZndDs9IGxlbihib29rLk9yZGVycykgewoJCXJldHVybiBib29rLCBFcnJPcmRlck5vdEZvdW5kCgl9CgoJYm9vay5PcmRlcnNbaW5kZXhdID0gJmFtcDtvcmRlcgoKCXJldHVybiBib29rLCBuaWwKfQoKLy8gR2V0TmV4dE9yZGVySUQgZ2V0cyB0aGUgSUQgb2YgdGhlIG5leHQgb3JkZXIgdG8gYXBwZW5kCmZ1bmMgKGJvb2sgU2VsbE9yZGVyQm9vaykgR2V0TmV4dE9yZGVySUQoKSBpbnQzMiB7CglyZXR1cm4gYm9vay5PcmRlcklEVHJhY2sKfQoKLy8gSW5jcmVtZW50TmV4dE9yZGVySUQgdXBkYXRlcyB0aGUgSUQgdHJhY2tlciBmb3Igc2VsbCBvcmRlcnMKZnVuYyAoYm9vayBTZWxsT3JkZXJCb29rKSBJbmNyZW1lbnROZXh0T3JkZXJJRCgpIE9yZGVyQm9vayB7CgkvLyBFdmVuIG51bWJlcnMgdG8gaGF2ZSBkaWZmZXJlbnQgSUQgdGhhbiBidXkgb3JkZXJzCglib29rLk9yZGVySURUcmFjayArPSAyCgoJcmV0dXJuIGJvb2sKfQoKLy8gR2V0T3JkZXJGcm9tSUQgZ2V0cyBhbiBvcmRlciBmcm9tIHRoZSBib29rIGZyb20gaXRzIGlkCmZ1bmMgKGJvb2sgU2VsbE9yZGVyQm9vaykgR2V0T3JkZXJGcm9tSUQoaWQgaW50MzIpIChPcmRlciwgZXJyb3IpIHsKCWZvciBfLCBvcmRlciA6PSByYW5nZSBib29rLk9yZGVycyB7CgkJaWYgb3JkZXIuSWQgPT0gaWQgewoJCQlyZXR1cm4gKm9yZGVyLCBuaWwKCQl9Cgl9CglyZXR1cm4gT3JkZXJ7fSwgRXJyT3JkZXJOb3RGb3VuZAp9CgovLyBSZW1vdmVPcmRlckZyb21JRCByZW1vdmVzIGFuIG9yZGVyIGZyb20gdGhlIGJvb2sgYW5kIGtlZXAgaXQgb3JkZXJlZApmdW5jIChib29rIFNlbGxPcmRlckJvb2spIFJlbW92ZU9yZGVyRnJvbUlEKGlkIGludDMyKSAoT3JkZXJCb29rLCBlcnJvcikgewoJZm9yIGksIG9yZGVyIDo9IHJhbmdlIGJvb2suT3JkZXJzIHsKCQlpZiBvcmRlci5JZCA9PSBpZCB7CgkJCWJvb2suT3JkZXJzID0gYXBwZW5kKGJvb2suT3JkZXJzWzppXSwgYm9vay5PcmRlcnNbaSsxOl0uLi4pCgkJCXJldHVybiBib29rLCBuaWwKCQl9Cgl9CglyZXR1cm4gYm9vaywgRXJyT3JkZXJOb3RGb3VuZAp9CgpmdW5jIE5ld1NlbGxPcmRlckJvb2soQW1vdW50RGVub20gc3RyaW5nLCBQcmljZURlbm9tIHN0cmluZykgU2VsbE9yZGVyQm9vayB7CglyZXR1cm4gU2VsbE9yZGVyQm9va3sKCQlPcmRlcklEVHJhY2s6IDAsCgkJQW1vdW50RGVub206ICBBbW91bnREZW5vbSwKCQlQcmljZURlbm9tOiAgIFByaWNlRGVub20sCgl9Cn0KCi8vIExpcXVpZGF0ZUZyb21TZWxsT3JkZXIgbGlxdWlkYXRlcyB0aGUgZmlyc3QgYnV5IG9yZGVyIG9mIHRoZSBib29rIGZyb20gdGhlIHNlbGwgb3JkZXIKLy8gaWYgbm8gbWF0Y2ggaXMgZm91bmQsIHJldHVybiBmYWxzZSBmb3IgbWF0Y2gKZnVuYyBMaXF1aWRhdGVGcm9tU2VsbE9yZGVyKGJvb2sgQnV5T3JkZXJCb29rLCBvcmRlciBPcmRlcikgKAoJbmV3Qm9vayBCdXlPcmRlckJvb2ssCglyZW1haW5pbmdTZWxsT3JkZXIgT3JkZXIsCglsaXF1aWRhdGVkQnV5T3JkZXIgT3JkZXIsCglnYWluIGludDMyLAoJbWF0Y2ggYm9vbCwKCWZpbGxlZCBib29sLAopIHsKCXJlbWFpbmluZ1NlbGxPcmRlciA9IG9yZGVyCgoJLy8gTm8gbWF0Y2ggaWYgbm8gb3JkZXIKCWlmIGJvb2suTGVuKCkgPT0gMCB7CgkJcmV0dXJuIGJvb2ssIG9yZGVyLCBsaXF1aWRhdGVkQnV5T3JkZXIsIGdhaW4sIGZhbHNlLCBmYWxzZQoJfQoKCS8vIENoZWNrIGlmIG1hdGNoCgloaWdoZXN0QmlkIDo9IGJvb2suT3JkZXJzW2Jvb2suTGVuKCktMV0KCWlmIG9yZGVyLlByaWNlICZndDsgaGlnaGVzdEJpZC5QcmljZSB7CgkJcmV0dXJuIGJvb2ssIG9yZGVyLCBsaXF1aWRhdGVkQnV5T3JkZXIsIGdhaW4sIGZhbHNlLCBmYWxzZQoJfQoKCWxpcXVpZGF0ZWRCdXlPcmRlciA9ICpoaWdoZXN0QmlkCgoJLy8gQ2hlY2sgaWYgc2VsbCBvcmRlciBjYW4gYmUgZW50aXJlbHkgZmlsbGVkCglpZiBoaWdoZXN0QmlkLkFtb3VudCAmZ3Q7PSBvcmRlci5BbW91bnQgewoJCXJlbWFpbmluZ1NlbGxPcmRlci5BbW91bnQgPSAwCgkJbGlxdWlkYXRlZEJ1eU9yZGVyLkFtb3VudCA9IG9yZGVyLkFtb3VudAoJCWdhaW4gPSBvcmRlci5BbW91bnQgKiBoaWdoZXN0QmlkLlByaWNlCgoJCS8vIFJlbW92ZSBoaWdoZXN0IGJpZCBpZiBpdCBoYXMgYmVlbiBlbnRpcmVseSBsaXF1aWRhdGVkCgkJaGlnaGVzdEJpZC5BbW91bnQgLT0gb3JkZXIuQW1vdW50CgkJaWYgaGlnaGVzdEJpZC5BbW91bnQgPT0gMCB7CgkJCWJvb2suT3JkZXJzID0gYm9vay5PcmRlcnNbOmJvb2suTGVuKCktMV0KCQl9IGVsc2UgewoJCQlib29rLk9yZGVyc1tib29rLkxlbigpLTFdID0gaGlnaGVzdEJpZAoJCX0KCQlyZXR1cm4gYm9vaywgcmVtYWluaW5nU2VsbE9yZGVyLCBsaXF1aWRhdGVkQnV5T3JkZXIsIGdhaW4sIHRydWUsIHRydWUKCX0KCgkvLyBOb3QgZW50aXJlbHkgZmlsbGVkCglnYWluID0gaGlnaGVzdEJpZC5BbW91bnQgKiBoaWdoZXN0QmlkLlByaWNlCglib29rLk9yZGVycyA9IGJvb2suT3JkZXJzWzpib29rLkxlbigpLTFdCglyZW1haW5pbmdTZWxsT3JkZXIuQW1vdW50IC09IGhpZ2hlc3RCaWQuQW1vdW50CgoJcmV0dXJuIGJvb2ssIHJlbWFpbmluZ1NlbGxPcmRlciwgbGlxdWlkYXRlZEJ1eU9yZGVyLCBnYWluLCB0cnVlLCBmYWxzZQp9CgovLyBGaWxsU2VsbE9yZGVyIHRyeSB0byBmaWxsIHRoZSBzZWxsIG9yZGVyIHdpdGggdGhlIG9yZGVyIGJvb2sgYW5kIHJldHVybnMgYWxsIHRoZSBzaWRlIGVmZmVjdHMKZnVuYyBGaWxsU2VsbE9yZGVyKGJvb2sgQnV5T3JkZXJCb29rLCBvcmRlciBPcmRlcikgKAoJbmV3Qm9vayBCdXlPcmRlckJvb2ssCglyZW1haW5pbmdTZWxsT3JkZXIgT3JkZXIsCglsaXF1aWRhdGVkIFtdT3JkZXIsCglnYWluIGludDMyLAoJZmlsbGVkIGJvb2wsCikgewoJdmFyIGxpcXVpZGF0ZWRMaXN0IFtdT3JkZXIKCXRvdGFsR2FpbiA6PSBpbnQzMigwKQoJcmVtYWluaW5nU2VsbE9yZGVyID0gb3JkZXIKCgkvLyBMaXF1aWRhdGUgYXMgbG9uZyBhcyB0aGVyZSBpcyBtYXRjaAoJZm9yIHsKCQl2YXIgbWF0Y2ggYm9vbAoJCXZhciBsaXF1aWRhdGlvbiBPcmRlcgoJCWJvb2ssIHJlbWFpbmluZ1NlbGxPcmRlciwgbGlxdWlkYXRpb24sIGdhaW4sIG1hdGNoLCBmaWxsZWQgPSBMaXF1aWRhdGVGcm9tU2VsbE9yZGVyKAoJCQlib29rLAoJCQlyZW1haW5pbmdTZWxsT3JkZXIsCgkJKQoJCWlmICFtYXRjaCB7CgkJCWJyZWFrCgkJfQoKCQkvLyBVcGRhdGUgZ2FpbnMKCQl0b3RhbEdhaW4gKz0gZ2FpbgoKCQkvLyBVcGRhdGUgbGlxdWlkYXRlZAoJCWxpcXVpZGF0ZWRMaXN0ID0gYXBwZW5kKGxpcXVpZGF0ZWRMaXN0LCBsaXF1aWRhdGlvbikKCgkJaWYgZmlsbGVkIHsKCQkJYnJlYWsKCQl9Cgl9CgoJcmV0dXJuIGJvb2ssIHJlbWFpbmluZ1NlbGxPcmRlciwgbGlxdWlkYXRlZExpc3QsIHRvdGFsR2FpbiwgZmlsbGVkCn0K"}}),l._v(" "),c("h2",{attrs:{id:"add-the-buyorder"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#add-the-buyorder"}},[l._v("#")]),l._v(" Add The Buyorder")]),l._v(" "),c("p",[l._v("Modify the "),c("code",[l._v("buyOrderBook.proto")]),l._v(" file to have the fields for creating a buy order on the order book.\nThe proto definition for the "),c("code",[l._v("BuyOrderBook")]),l._v(" should look like follows:")]),l._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"proto",base64:"Ly8gcHJvdG8vaWJjZGV4L2J1eU9yZGVyQm9vay5wcm90bwpzeW50YXggPSAmcXVvdDtwcm90bzMmcXVvdDs7CnBhY2thZ2UgdXNlcm5hbWUuaW50ZXJjaGFuZ2UuaWJjZGV4OwoKb3B0aW9uIGdvX3BhY2thZ2UgPSAmcXVvdDtnaXRodWIuY29tL3VzZXJuYW1lL2ludGVyY2hhbmdlL3gvaWJjZGV4L3R5cGVzJnF1b3Q7OwoKaW1wb3J0ICZxdW90O2liY2RleC9vcmRlci5wcm90byZxdW90OzsgLy8gJmx0Oy0tCgptZXNzYWdlIEJ1eU9yZGVyQm9vayB7CiAgc3RyaW5nIGNyZWF0b3IgPSAxOwogIHN0cmluZyBpbmRleCA9IDI7CiAgaW50MzIgb3JkZXJJRFRyYWNrID0gMzsKICBzdHJpbmcgYW1vdW50RGVub20gPSA0OwogIHN0cmluZyBwcmljZURlbm9tID0gNTsKICByZXBlYXRlZCBPcmRlciBvcmRlcnMgPSA2OyAvLyAmbHQ7LS0KfQo="}}),l._v(" "),c("p",[l._v("For the buy orders, create a "),c("code",[l._v("buyorder.go")]),l._v(" file in the "),c("code",[l._v("types")]),l._v(" directory and add the following code:")]),l._v(" "),c("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC9pYmNkZXgvdHlwZXMvYnV5b3JkZXIuZ28KcGFja2FnZSB0eXBlcwoKaW1wb3J0ICgKCSZxdW90O3NvcnQmcXVvdDsKKQoKLy8gc29ydC5JbnRlcmZhY2UKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIExlbigpIGludCB7CglyZXR1cm4gbGVuKGJvb2suT3JkZXJzKQp9CmZ1bmMgKGJvb2sgQnV5T3JkZXJCb29rKSBMZXNzKGksIGogaW50KSBib29sIHsKCS8vIEJ1eSBvcmRlcnMgYXJlIGRlY3JlYXNpbmdseSBzb3J0ZWQKCXJldHVybiBib29rLk9yZGVyc1tpXS5QcmljZSAmbHQ7IGJvb2suT3JkZXJzW2pdLlByaWNlCn0KZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIFN3YXAoaSwgaiBpbnQpIHsKCWJvb2suT3JkZXJzW2ldLCBib29rLk9yZGVyc1tqXSA9IGJvb2suT3JkZXJzW2pdLCBib29rLk9yZGVyc1tpXQp9CgovLyBJbnNlcnRPcmRlciBpbnNlcnRzIHRoZSBvcmRlciBpbiB0aGUgaW5jcmVhc2luZyBvcmRlciBpbiB0aGUgYm9vawovLyBpdCBkb2Vzbid0IHNldCB0aGUgSUQgb3IgY2hlY2sgaWYgdGhlIElEIGFscmVhZHkgZXhpc3QKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIEluc2VydE9yZGVyKG9yZGVyIE9yZGVyKSBPcmRlckJvb2sgewoJLy8gSW5zZXJ0IHRoZSBvcmRlciBpbiB0aGUgaW5jcmVhc2luZyBvcmRlcgoJaWYgbGVuKGJvb2suT3JkZXJzKSAmZ3Q7IDAgewoJCWkgOj0gc29ydC5TZWFyY2gobGVuKGJvb2suT3JkZXJzKSwgZnVuYyhpIGludCkgYm9vbCB7IHJldHVybiBib29rLk9yZGVyc1tpXS5QcmljZSAmZ3Q7IG9yZGVyLlByaWNlIH0pCgkJb3JkZXJzIDo9IGFwcGVuZChib29rLk9yZGVycywgJmFtcDtvcmRlcikKCQljb3B5KG9yZGVyc1tpKzE6XSwgb3JkZXJzW2k6XSkKCQlvcmRlcnNbaV0gPSAmYW1wO29yZGVyCgkJYm9vay5PcmRlcnMgPSBvcmRlcnMKCX0gZWxzZSB7CgkJYm9vay5PcmRlcnMgPSBhcHBlbmQoYm9vay5PcmRlcnMsICZhbXA7b3JkZXIpCgl9CgoJcmV0dXJuIGJvb2sKfQoKLy8gR2V0T3JkZXIgZ2V0cyB0aGUgb3JkZXIgZnJvbSBhbiBpbmRleApmdW5jIChib29rIEJ1eU9yZGVyQm9vaykgR2V0T3JkZXIoaW5kZXggaW50KSAob3JkZXIgT3JkZXIsIGVyciBlcnJvcikgewoJaWYgaW5kZXggJmd0Oz0gbGVuKGJvb2suT3JkZXJzKSB7CgkJcmV0dXJuIG9yZGVyLCBFcnJPcmRlck5vdEZvdW5kCgl9CgoJcmV0dXJuICpib29rLk9yZGVyc1tpbmRleF0sIG5pbAp9CgovLyBTZXRPcmRlciBnZXRzIHRoZSBvcmRlciBmcm9tIGFuIGluZGV4CmZ1bmMgKGJvb2sgQnV5T3JkZXJCb29rKSBTZXRPcmRlcihpbmRleCBpbnQsIG9yZGVyIE9yZGVyKSAoT3JkZXJCb29rLCBlcnJvcikgewoJaWYgaW5kZXggJmd0Oz0gbGVuKGJvb2suT3JkZXJzKSB7CgkJcmV0dXJuIGJvb2ssIEVyck9yZGVyTm90Rm91bmQKCX0KCglib29rLk9yZGVyc1tpbmRleF0gPSAmYW1wO29yZGVyCgoJcmV0dXJuIGJvb2ssIG5pbAp9CgovLyBHZXROZXh0T3JkZXJJRCBnZXRzIHRoZSBJRCBvZiB0aGUgbmV4dCBvcmRlciB0byBhcHBlbmQKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIEdldE5leHRPcmRlcklEKCkgaW50MzIgewoJcmV0dXJuIGJvb2suT3JkZXJJRFRyYWNrCn0KCi8vIEluY3JlbWVudE5leHRPcmRlcklEIHVwZGF0ZXMgdGhlIElEIHRyYWNrZXIgZm9yIGJ1eSBvcmRlcnMKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIEluY3JlbWVudE5leHRPcmRlcklEKCkgT3JkZXJCb29rIHsKCS8vIEV2ZW4gbnVtYmVycyB0byBoYXZlIGRpZmZlcmVudCBJRCB0aGFuIGJ1eSBvcmRlcnMKCWJvb2suT3JkZXJJRFRyYWNrICs9IDIKCglyZXR1cm4gYm9vawp9CgovLyBHZXRPcmRlckZyb21JRCBnZXRzIGFuIG9yZGVyIGZyb20gdGhlIGJvb2sgZnJvbSBpdHMgaWQKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIEdldE9yZGVyRnJvbUlEKGlkIGludDMyKSAoT3JkZXIsIGVycm9yKSB7Cglmb3IgXywgb3JkZXIgOj0gcmFuZ2UgYm9vay5PcmRlcnMgewoJCWlmIG9yZGVyLklkID09IGlkIHsKCQkJcmV0dXJuICpvcmRlciwgbmlsCgkJfQoJfQoJcmV0dXJuIE9yZGVye30sIEVyck9yZGVyTm90Rm91bmQKfQoKLy8gUmVtb3ZlT3JkZXJGcm9tSUQgcmVtb3ZlcyBhbiBvcmRlciBmcm9tIHRoZSBib29rIGFuZCBrZWVwIGl0IG9yZGVyZWQKZnVuYyAoYm9vayBCdXlPcmRlckJvb2spIFJlbW92ZU9yZGVyRnJvbUlEKGlkIGludDMyKSAoT3JkZXJCb29rLCBlcnJvcikgewoJZm9yIGksIG9yZGVyIDo9IHJhbmdlIGJvb2suT3JkZXJzIHsKCQlpZiBvcmRlci5JZCA9PSBpZCB7CgkJCWJvb2suT3JkZXJzID0gYXBwZW5kKGJvb2suT3JkZXJzWzppXSwgYm9vay5PcmRlcnNbaSsxOl0uLi4pCgkJCXJldHVybiBib29rLCBuaWwKCQl9Cgl9CglyZXR1cm4gYm9vaywgRXJyT3JkZXJOb3RGb3VuZAp9CgpmdW5jIE5ld0J1eU9yZGVyQm9vayhBbW91bnREZW5vbSBzdHJpbmcsIFByaWNlRGVub20gc3RyaW5nKSBCdXlPcmRlckJvb2sgewoJcmV0dXJuIEJ1eU9yZGVyQm9va3sKCQlPcmRlcklEVHJhY2s6IDEsCgkJQW1vdW50RGVub206ICBBbW91bnREZW5vbSwKCQlQcmljZURlbm9tOiAgIFByaWNlRGVub20sCgl9Cn0KCi8vIExpcXVpZGF0ZUZyb21CdXlPcmRlciBsaXF1aWRhdGVzIHRoZSBmaXJzdCBzZWxsIG9yZGVyIG9mIHRoZSBib29rIGZyb20gdGhlIGJ1eSBvcmRlcgovLyBpZiBubyBtYXRjaCBpcyBmb3VuZCwgcmV0dXJuIGZhbHNlIGZvciBtYXRjaApmdW5jIExpcXVpZGF0ZUZyb21CdXlPcmRlcihib29rIFNlbGxPcmRlckJvb2ssIG9yZGVyIE9yZGVyKSAoCgluZXdCb29rIFNlbGxPcmRlckJvb2ssCglyZW1haW5pbmdCdXlPcmRlciBPcmRlciwKCWxpcXVpZGF0ZWRTZWxsT3JkZXIgT3JkZXIsCglwdXJjaGFzZSBpbnQzMiwKCW1hdGNoIGJvb2wsCglmaWxsZWQgYm9vbCwKKSB7CglyZW1haW5pbmdCdXlPcmRlciA9IG9yZGVyCgoJLy8gTm8gbWF0Y2ggaWYgbm8gb3JkZXIKCWlmIGJvb2suTGVuKCkgPT0gMCB7CgkJcmV0dXJuIGJvb2ssIG9yZGVyLCBsaXF1aWRhdGVkU2VsbE9yZGVyLCBwdXJjaGFzZSwgZmFsc2UsIGZhbHNlCgl9CgoJLy8gQ2hlY2sgaWYgbWF0Y2gKCWxvd2VzdEFzayA6PSBib29rLk9yZGVyc1tib29rLkxlbigpLTFdCglpZiBvcmRlci5QcmljZSAmbHQ7IGxvd2VzdEFzay5QcmljZSB7CgkJcmV0dXJuIGJvb2ssIG9yZGVyLCBsaXF1aWRhdGVkU2VsbE9yZGVyLCBwdXJjaGFzZSwgZmFsc2UsIGZhbHNlCgl9CgoJbGlxdWlkYXRlZFNlbGxPcmRlciA9ICpsb3dlc3RBc2sKCgkvLyBDaGVjayBpZiBidXkgb3JkZXIgY2FuIGJlIGVudGlyZWx5IGZpbGxlZAoJaWYgbG93ZXN0QXNrLkFtb3VudCAmZ3Q7PSBvcmRlci5BbW91bnQgewoJCXJlbWFpbmluZ0J1eU9yZGVyLkFtb3VudCA9IDAKCQlsaXF1aWRhdGVkU2VsbE9yZGVyLkFtb3VudCA9IG9yZGVyLkFtb3VudAoJCXB1cmNoYXNlID0gb3JkZXIuQW1vdW50CgoJCS8vIFJlbW92ZSBsb3dlc3QgYXNrIGlmIGl0IGhhcyBiZWVuIGVudGlyZWx5IGxpcXVpZGF0ZWQKCQlsb3dlc3RBc2suQW1vdW50IC09IG9yZGVyLkFtb3VudAoJCWlmIGxvd2VzdEFzay5BbW91bnQgPT0gMCB7CgkJCWJvb2suT3JkZXJzID0gYm9vay5PcmRlcnNbOmJvb2suTGVuKCktMV0KCQl9IGVsc2UgewoJCQlib29rLk9yZGVyc1tib29rLkxlbigpLTFdID0gbG93ZXN0QXNrCgkJfQoKCQlyZXR1cm4gYm9vaywgcmVtYWluaW5nQnV5T3JkZXIsIGxpcXVpZGF0ZWRTZWxsT3JkZXIsIHB1cmNoYXNlLCB0cnVlLCB0cnVlCgl9CgoJLy8gTm90IGVudGlyZWx5IGZpbGxlZAoJcHVyY2hhc2UgPSBsb3dlc3RBc2suQW1vdW50Cglib29rLk9yZGVycyA9IGJvb2suT3JkZXJzWzpib29rLkxlbigpLTFdCglyZW1haW5pbmdCdXlPcmRlci5BbW91bnQgLT0gbG93ZXN0QXNrLkFtb3VudAoKCXJldHVybiBib29rLCByZW1haW5pbmdCdXlPcmRlciwgbGlxdWlkYXRlZFNlbGxPcmRlciwgcHVyY2hhc2UsIHRydWUsIGZhbHNlCn0KCi8vIEZpbGxCdXlPcmRlciB0cnkgdG8gZmlsbCB0aGUgYnV5IG9yZGVyIHdpdGggdGhlIG9yZGVyIGJvb2sgYW5kIHJldHVybnMgYWxsIHRoZSBzaWRlIGVmZmVjdHMKZnVuYyBGaWxsQnV5T3JkZXIoYm9vayBTZWxsT3JkZXJCb29rLCBvcmRlciBPcmRlcikgKAoJbmV3Qm9vayBTZWxsT3JkZXJCb29rLAoJcmVtYWluaW5nQnV5T3JkZXIgT3JkZXIsCglsaXF1aWRhdGVkIFtdT3JkZXIsCglwdXJjaGFzZSBpbnQzMiwKCWZpbGxlZCBib29sLAopIHsKCXZhciBsaXF1aWRhdGVkTGlzdCBbXU9yZGVyCgl0b3RhbFB1cmNoYXNlIDo9IGludDMyKDApCglyZW1haW5pbmdCdXlPcmRlciA9IG9yZGVyCgoJLy8gTGlxdWlkYXRlIGFzIGxvbmcgYXMgdGhlcmUgaXMgbWF0Y2gKCWZvciB7CgkJdmFyIG1hdGNoIGJvb2wKCQl2YXIgbGlxdWlkYXRpb24gT3JkZXIKCQlib29rLCByZW1haW5pbmdCdXlPcmRlciwgbGlxdWlkYXRpb24sIHB1cmNoYXNlLCBtYXRjaCwgZmlsbGVkID0gTGlxdWlkYXRlRnJvbUJ1eU9yZGVyKAoJCQlib29rLAoJCQlyZW1haW5pbmdCdXlPcmRlciwKCQkpCgkJaWYgIW1hdGNoIHsKCQkJYnJlYWsKCQl9CgoJCS8vIFVwZGF0ZSBnYWlucwoJCXRvdGFsUHVyY2hhc2UgKz0gcHVyY2hhc2UKCgkJLy8gVXBkYXRlIGxpcXVpZGF0ZWQKCQlsaXF1aWRhdGVkTGlzdCA9IGFwcGVuZChsaXF1aWRhdGVkTGlzdCwgbGlxdWlkYXRpb24pCgoJCWlmIGZpbGxlZCB7CgkJCWJyZWFrCgkJfQoJfQoKCXJldHVybiBib29rLCByZW1haW5pbmdCdXlPcmRlciwgbGlxdWlkYXRlZExpc3QsIHRvdGFsUHVyY2hhc2UsIGZpbGxlZAp9Cg=="}}),l._v(" "),c("p",[l._v("This finishes your code for the order book module with buy and sell orders.\nIn the next chapters, you will make them IBC compatible.\nYou will have to implement how IBC packets are handled that are sent over a blockchain.\nThese packets will be received and acknowledged by the recipient blockchain.")])],1)}),[],!1,null,null,null);Z.default=g.exports}}]);