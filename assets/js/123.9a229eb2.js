(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{614:function(c,l,d){"use strict";d.r(l);var Z=d(0),b=Object(Z.a)({},(function(){var c=this,l=c.$createElement,d=c._self._c||l;return d("ContentSlotsDistributor",{attrs:{"slot-key":c.$parent.slotKey}},[d("h1",{attrs:{id:"keeper"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#keeper"}},[c._v("#")]),c._v(" Keeper")]),c._v(" "),d("h2",{attrs:{id:"create-scavenge"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#create-scavenge"}},[c._v("#")]),c._v(" Create Scavenge")]),c._v(" "),d("p",[c._v("Create scavenge method should do the following:")]),c._v(" "),d("ul",[d("li",[c._v("Check that a scavenge with a given solution hash doesn't exist")]),c._v(" "),d("li",[c._v("Send tokens from scavenge creator account to a module account")]),c._v(" "),d("li",[c._v("Write the scavenge to the store")])]),c._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC9zY2F2ZW5nZS9rZWVwZXIvbXNnX3NlcnZlcl9zdWJtaXRfc2NhdmVuZ2UuZ28KcGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCgkmcXVvdDtjb250ZXh0JnF1b3Q7CgoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb25hdXQvc2NhdmVuZ2UveC9zY2F2ZW5nZS90eXBlcyZxdW90OwoJc2RrICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdHlwZXMmcXVvdDsKCSZxdW90O2dpdGh1Yi5jb20vdGVuZGVybWludC90ZW5kZXJtaW50L2NyeXB0byZxdW90OwoJc2RrZXJyb3JzICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdHlwZXMvZXJyb3JzJnF1b3Q7CikKCmZ1bmMgKGsgbXNnU2VydmVyKSBTdWJtaXRTY2F2ZW5nZShnb0N0eCBjb250ZXh0LkNvbnRleHQsIG1zZyAqdHlwZXMuTXNnU3VibWl0U2NhdmVuZ2UpICgqdHlwZXMuTXNnU3VibWl0U2NhdmVuZ2VSZXNwb25zZSwgZXJyb3IpIHsKICAvLyBnZXQgY29udGV4dCB0aGF0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBlbnZpcm9ubWVudCwgc3VjaCBhcyBibG9jayBoZWlnaHQKCWN0eCA6PSBzZGsuVW53cmFwU0RLQ29udGV4dChnb0N0eCkKICAvLyBjcmVhdGUgYSBuZXcgc2NhdmVuZ2UgZnJvbSB0aGUgZGF0YSBpbiB0aGUgTXNnU3VibWl0U2NhdmVuZ2UgbWVzc2FnZQoJdmFyIHNjYXZlbmdlID0gdHlwZXMuU2NhdmVuZ2V7CgkJSW5kZXg6ICAgICAgICBtc2cuU29sdXRpb25IYXNoLAoJCUNyZWF0b3I6ICAgICAgbXNnLkNyZWF0b3IsCgkJRGVzY3JpcHRpb246ICBtc2cuRGVzY3JpcHRpb24sCgkJU29sdXRpb25IYXNoOiBtc2cuU29sdXRpb25IYXNoLAoJCVJld2FyZDogICAgICAgbXNnLlJld2FyZCwKCX0KICAvLyB0cnkgZ2V0dGluZyBhIHNjYXZlbmdlIGZyb20gdGhlIHN0b3JlIHVzaW5nIHRoZSBzb2x1dGlvbiBoYXNoIGFzIHRoZSBrZXkKCV8sIGlzRm91bmQgOj0gay5HZXRTY2F2ZW5nZShjdHgsIHNjYXZlbmdlLlNvbHV0aW9uSGFzaCkKICAvLyByZXR1cm4gYW4gZXJyb3IgaWYgYSBzY2F2ZW5nZSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgc3RvcmUKCWlmIGlzRm91bmQgewoJCXJldHVybiBuaWwsIHNka2Vycm9ycy5XcmFwKHNka2Vycm9ycy5FcnJJbnZhbGlkUmVxdWVzdCwgJnF1b3Q7U2NhdmVuZ2Ugd2l0aCB0aGF0IHNvbHV0aW9uIGhhc2ggYWxyZWFkeSBleGlzdHMmcXVvdDspCgl9CiAgLy8gZ2V0IGFkZHJlc3Mgb2YgdGhlIFNjYXZlbmdlIG1vZHVsZSBhY2NvdW50Cgltb2R1bGVBY2N0IDo9IHNkay5BY2NBZGRyZXNzKGNyeXB0by5BZGRyZXNzSGFzaChbXWJ5dGUodHlwZXMuTW9kdWxlTmFtZSkpKQogIC8vIGNvbnZlcnQgdGhlIG1lc3NhZ2UgY3JlYXRvciBhZGRyZXNzIGZyb20gYSBzdHJpbmcgaW50byBzZGsuQWNjQWRkcmVzcwoJc2NhdmVuZ2VyLCBlcnIgOj0gc2RrLkFjY0FkZHJlc3NGcm9tQmVjaDMyKHNjYXZlbmdlLkNyZWF0b3IpCglpZiBlcnIgIT0gbmlsIHsKCQlwYW5pYyhlcnIpCgl9CiAgLy8gY29udmVydCB0b2tlbnMgZnJvbSBzdHJpbmcgaW50byBzZGsuQ29pbnMKCXJld2FyZCwgZXJyIDo9IHNkay5QYXJzZUNvaW5zTm9ybWFsaXplZChzY2F2ZW5nZS5SZXdhcmQpCglpZiBlcnIgIT0gbmlsIHsKCQlwYW5pYyhlcnIpCgl9CiAgLy8gc2VuZCB0b2tlbnMgZnJvbSB0aGUgc2NhdmVuZ2UgY3JlYXRvciB0byB0aGUgbW9kdWxlIGFjY291bnQKCXNka0Vycm9yIDo9IGsuYmFua0tlZXBlci5TZW5kQ29pbnMoY3R4LCBzY2F2ZW5nZXIsIG1vZHVsZUFjY3QsIHJld2FyZCkKCWlmIHNka0Vycm9yICE9IG5pbCB7CgkJcmV0dXJuIG5pbCwgc2RrRXJyb3IKCX0KICAvLyB3cml0ZSB0aGUgc2NhdmVuZ2UgdG8gdGhlIHN0b3JlCglrLlNldFNjYXZlbmdlKGN0eCwgc2NhdmVuZ2UpCglyZXR1cm4gJmFtcDt0eXBlcy5Nc2dTdWJtaXRTY2F2ZW5nZVJlc3BvbnNle30sIG5pbAp9Cg=="}}),c._v(" "),d("p",[c._v("Notice the use of "),d("code",[c._v("moduleAcct")]),c._v(". This account is not controlled by a public key pair, but is a reference to an account that is owned by this actual module. It is used to hold the bounty reward that is attached to a scavenge until that scavenge has been solved, at which point the bounty is paid to the account who solved the scavenge.")]),c._v(" "),d("p",[d("code",[c._v("SubmitScavenge")]),c._v(" uses "),d("code",[c._v("SendCoins")]),c._v(" method from the "),d("code",[c._v("bank")]),c._v(" module. In the beginning when scaffolding a module you used "),d("code",[c._v("--dep bank")]),c._v(" to specify a dependency between the "),d("code",[c._v("scavenge")]),c._v(" and "),d("code",[c._v("bank")]),c._v(" modules. This created an "),d("code",[c._v("expected_keepers.go")]),c._v(" file with a "),d("code",[c._v("BankKeeper")]),c._v(" interface. Add "),d("code",[c._v("SendCoins")]),c._v(" to be able to use it in the keeper methods of the "),d("code",[c._v("scavenge")]),c._v(" module.")]),c._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC9zY2F2ZW5nZS90eXBlcy9leHBlY3RlZF9rZWVwZXJzLmdvCnBhY2thZ2UgdHlwZXMKCmltcG9ydCAoCglzZGsgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcyZxdW90OwopCgp0eXBlIEJhbmtLZWVwZXIgaW50ZXJmYWNlIHsKCVNlbmRDb2lucyhjdHggc2RrLkNvbnRleHQsIGZyb21BZGRyIHNkay5BY2NBZGRyZXNzLCB0b0FkZHIgc2RrLkFjY0FkZHJlc3MsIGFtdCBzZGsuQ29pbnMpIGVycm9yCn0KCg=="}}),c._v(" "),d("h2",{attrs:{id:"commit-solution"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#commit-solution"}},[c._v("#")]),c._v(" Commit Solution")]),c._v(" "),d("p",[c._v("Commit solution method should do the following:")]),c._v(" "),d("ul",[d("li",[c._v("Check that commit with a given hash doesn't exist in the store")]),c._v(" "),d("li",[c._v("Write a new commit to the store")])]),c._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC9zY2F2ZW5nZS9rZWVwZXIvbXNnX3NlcnZlcl9jb21taXRfc29sdXRpb24uZ28KcGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCgkmcXVvdDtjb250ZXh0JnF1b3Q7CgoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb25hdXQvc2NhdmVuZ2UveC9zY2F2ZW5nZS90eXBlcyZxdW90OwoJc2RrICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdHlwZXMmcXVvdDsKCXNka2Vycm9ycyAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzL2Vycm9ycyZxdW90OwopCgpmdW5jIChrIG1zZ1NlcnZlcikgQ29tbWl0U29sdXRpb24oZ29DdHggY29udGV4dC5Db250ZXh0LCBtc2cgKnR5cGVzLk1zZ0NvbW1pdFNvbHV0aW9uKSAoKnR5cGVzLk1zZ0NvbW1pdFNvbHV0aW9uUmVzcG9uc2UsIGVycm9yKSB7CgljdHggOj0gc2RrLlVud3JhcFNES0NvbnRleHQoZ29DdHgpCiAgLy8gY3JlYXRlIGEgbmV3IGNvbW1pdCBmcm9tIHRoZSBpbmZvcm1hdGlvbiBpbiB0aGUgTXNnQ29tbWl0U29sdXRpb24gbWVzc2FnZQoJdmFyIGNvbW1pdCA9IHR5cGVzLkNvbW1pdHsKCQlJbmRleDogICAgICAgICAgICAgICAgIG1zZy5Tb2x1dGlvblNjYXZlbmdlckhhc2gsCgkJQ3JlYXRvcjogICAgICAgICAgICAgICBtc2cuQ3JlYXRvciwKCQlTb2x1dGlvbkhhc2g6ICAgICAgICAgIG1zZy5Tb2x1dGlvbkhhc2gsCgkJU29sdXRpb25TY2F2ZW5nZXJIYXNoOiBtc2cuU29sdXRpb25TY2F2ZW5nZXJIYXNoLAoJfQogIC8vIHRyeSBnZXR0aW5nIGEgY29tbWl0IGZyb20gdGhlIHN0b3JlIHVzaW5nIHRoZSBzb2x1dGlvbitzY2F2ZW5nZXIgaGFzaCBhcyB0aGUga2V5CglfLCBpc0ZvdW5kIDo9IGsuR2V0Q29tbWl0KGN0eCwgY29tbWl0LlNvbHV0aW9uU2NhdmVuZ2VySGFzaCkKCS8vIHJldHVybiBhbiBlcnJvciBpZiBhIGNvbW1pdCBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgc3RvcmUKCWlmIGlzRm91bmQgewoJCXJldHVybiBuaWwsIHNka2Vycm9ycy5XcmFwKHNka2Vycm9ycy5FcnJJbnZhbGlkUmVxdWVzdCwgJnF1b3Q7Q29tbWl0IHdpdGggdGhhdCBoYXNoIGFscmVhZHkgZXhpc3RzJnF1b3Q7KQoJfQogIC8vIHdyaXRlIGNvbW1pdCB0byB0aGUgc3RvcmUKCWsuU2V0Q29tbWl0KGN0eCwgY29tbWl0KQoJcmV0dXJuICZhbXA7dHlwZXMuTXNnQ29tbWl0U29sdXRpb25SZXNwb25zZXt9LCBuaWwKfQo="}}),c._v(" "),d("h2",{attrs:{id:"reveal-solution"}},[d("a",{staticClass:"header-anchor",attrs:{href:"#reveal-solution"}},[c._v("#")]),c._v(" Reveal Solution")]),c._v(" "),d("p",[c._v("Reveal solution method should do the following:")]),c._v(" "),d("ul",[d("li",[c._v("Check that a commit with a given hash exists in the store")]),c._v(" "),d("li",[c._v("Check that a scavenge with a given solution hash exists in the store")]),c._v(" "),d("li",[c._v("Check that the scavenge hasn't already been solved")]),c._v(" "),d("li",[c._v("Send tokens from the module account to the account that revealed the correct anwer")]),c._v(" "),d("li",[c._v("Write the updated scavenge to the store")])]),c._v(" "),d("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC9zY2F2ZW5nZS9rZWVwZXIvbXNnX3NlcnZlcl9yZXZlYWxfc29sdXRpb24uZ28KcGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCgkmcXVvdDtjb250ZXh0JnF1b3Q7CgoJJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb25hdXQvc2NhdmVuZ2UveC9zY2F2ZW5nZS90eXBlcyZxdW90OwoJc2RrICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdHlwZXMmcXVvdDsKCXNka2Vycm9ycyAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzL2Vycm9ycyZxdW90OwoKCSZxdW90O2dpdGh1Yi5jb20vdGVuZGVybWludC90ZW5kZXJtaW50L2NyeXB0byZxdW90OwopCgpmdW5jIChrIG1zZ1NlcnZlcikgUmV2ZWFsU29sdXRpb24oZ29DdHggY29udGV4dC5Db250ZXh0LCBtc2cgKnR5cGVzLk1zZ1JldmVhbFNvbHV0aW9uKSAoKnR5cGVzLk1zZ1JldmVhbFNvbHV0aW9uUmVzcG9uc2UsIGVycm9yKSB7CgljdHggOj0gc2RrLlVud3JhcFNES0NvbnRleHQoZ29DdHgpCiAgLy8gY29uY2F0ZW5hdGUgYSBzb2x1dGlvbiBhbmQgYSBzY2F2ZW5nZXIgYWRkcmVzcyBhbmQgY29udmVydCBpdCB0byBieXRlcwoJdmFyIHNvbHV0aW9uU2NhdmVuZ2VyQnl0ZXMgPSBbXWJ5dGUobXNnLlNvbHV0aW9uICsgbXNnLkNyZWF0b3IpCiAgLy8gZmluZCB0aGUgaGFzaCBvZiBzb2x1dGlvbiBhbmQgYWRkcmVzcwoJdmFyIHNvbHV0aW9uU2NhdmVuZ2VySGFzaCA9IHNoYTI1Ni5TdW0yNTYoc29sdXRpb25TY2F2ZW5nZXJCeXRlcykKICAvLyBjb252ZXJ0IHRoZSBoYXNoIHRvIGEgc3RyaW5nCgl2YXIgc29sdXRpb25TY2F2ZW5nZXJIYXNoU3RyaW5nID0gaGV4LkVuY29kZVRvU3RyaW5nKHNvbHV0aW9uU2NhdmVuZ2VySGFzaFs6XSkKICAvLyB0cnkgZ2V0dGluZyBhIGNvbW1pdCB1c2luZyB0aGUgdGhlIGhhc2ggb2Ygc29sdXRpb24gYW5kIGFkZHJlc3MKCV8sIGlzRm91bmQgOj0gay5HZXRDb21taXQoY3R4LCBzb2x1dGlvblNjYXZlbmdlckhhc2hTdHJpbmcpCiAgLy8gcmV0dXJuIGFuIGVycm9yIGlmIGEgY29tbWl0IGRvZXNuJ3QgZXhpc3QKCWlmICFpc0ZvdW5kIHsKCQlyZXR1cm4gbmlsLCBzZGtlcnJvcnMuV3JhcChzZGtlcnJvcnMuRXJySW52YWxpZFJlcXVlc3QsICZxdW90O0NvbW1pdCB3aXRoIHRoYXQgaGFzaCBkb2Vzbid0IGV4aXN0cyZxdW90OykKCX0KICAvLyBmaW5kIGEgaGFzaCBvZiB0aGUgc29sdXRpb24KCXZhciBzb2x1dGlvbkhhc2ggPSBzaGEyNTYuU3VtMjU2KFtdYnl0ZShtc2cuU29sdXRpb24pKQogIC8vIGVuY29kZSB0aGUgc29sdXRpb24gaGFzaCB0byBzdHJpbmcKCXZhciBzb2x1dGlvbkhhc2hTdHJpbmcgPSBoZXguRW5jb2RlVG9TdHJpbmcoc29sdXRpb25IYXNoWzpdKQoJdmFyIHNjYXZlbmdlIHR5cGVzLlNjYXZlbmdlCiAgLy8gZ2V0IGEgc2NhdmVuZ2UgZnJvbSB0aGUgc3RyZSB1c2luZyB0aGUgc29sdXRpb24gaGFzaAoJc2NhdmVuZ2UsIGlzRm91bmQgPSBrLkdldFNjYXZlbmdlKGN0eCwgc29sdXRpb25IYXNoU3RyaW5nKQogIC8vIHJldHVybiBhbiBlcnJvciBpZiB0aGUgc29sdXRpb24gZG9lc24ndCBleGlzdAoJaWYgIWlzRm91bmQgewoJCXJldHVybiBuaWwsIHNka2Vycm9ycy5XcmFwKHNka2Vycm9ycy5FcnJJbnZhbGlkUmVxdWVzdCwgJnF1b3Q7U2NhdmVuZ2Ugd2l0aCB0aGF0IHNvbHV0aW9uIGhhc2ggZG9lc24ndCBleGlzdHMmcXVvdDspCgl9CiAgLy8gY2hlY2sgdGhhdCB0aGUgc2NhdmVuZ2VyIHByb3BlcnR5IGNvbnRhaW5zIGEgdmFsaWQgYWRkcmVzcwoJXywgZXJyIDo9IHNkay5BY2NBZGRyZXNzRnJvbUJlY2gzMihzY2F2ZW5nZS5TY2F2ZW5nZXIpCiAgLy8gcmV0dXJuIGFuIGVycm9yIGlmIGEgc2NhdmVuZ2UgaGFzIGFscmVhZHkgYmVlbiBzb2x2ZWQKCWlmIGVyciA9PSBuaWwgewoJCXJldHVybiBuaWwsIHNka2Vycm9ycy5XcmFwKHNka2Vycm9ycy5FcnJJbnZhbGlkUmVxdWVzdCwgJnF1b3Q7U2NhdmVuZ2UgaGFzIGFscmVhZHkgYmVlbiBzb2x2ZWQmcXVvdDspCgl9CiAgLy8gc2F2ZSB0aGUgc2NhdmViZ2VyIGFkZHJlc3MgdG8gdGhlIHNjYXZlbmdlCglzY2F2ZW5nZS5TY2F2ZW5nZXIgPSBtc2cuQ3JlYXRvcgogIC8vIHNhdmUgdGhlIGNvcnJlY3Qgc29sdXRpb24gdG8gdGhlIHNjYXZlbmdlCglzY2F2ZW5nZS5Tb2x1dGlvbiA9IG1zZy5Tb2x1dGlvbgogIC8vIGdldCBhZGRyZXNzIG9mIHRoZSBtb2R1bGUgYWNjb3VudAoJbW9kdWxlQWNjdCA6PSBzZGsuQWNjQWRkcmVzcyhjcnlwdG8uQWRkcmVzc0hhc2goW11ieXRlKHR5cGVzLk1vZHVsZU5hbWUpKSkKICAvLyBjb252ZXJ0IHNjYXZlbmdlciBhZGRyZXNzIGZyb20gc3RyaW5nIHRvIHNkay5BY2NBZGRyZXNzCglzY2F2ZW5nZXIsIGVyciA6PSBzZGsuQWNjQWRkcmVzc0Zyb21CZWNoMzIoc2NhdmVuZ2UuU2NhdmVuZ2VyKQoJaWYgZXJyICE9IG5pbCB7CgkJcGFuaWMoZXJyKQoJfQogIC8vIHBhcnNlIHRva2VucyBmcm9tIGEgc3RyaW5nIHRvIHNkay5Db2lucwoJcmV3YXJkLCBlcnIgOj0gc2RrLlBhcnNlQ29pbnNOb3JtYWxpemVkKHNjYXZlbmdlLlJld2FyZCkKCWlmIGVyciAhPSBuaWwgewoJCXBhbmljKGVycikKCX0KICAvLyBzZW5kIHRva2VucyBmcm9tIGEgbW9kdWxlIGFjY291bnQgdG8gdGhlIHNjYXZlbmdlcgoJc2RrRXJyb3IgOj0gay5iYW5rS2VlcGVyLlNlbmRDb2lucyhjdHgsIG1vZHVsZUFjY3QsIHNjYXZlbmdlciwgcmV3YXJkKQoJaWYgc2RrRXJyb3IgIT0gbmlsIHsKCQlyZXR1cm4gbmlsLCBzZGtFcnJvcgoJfQogIC8vIHNhdmUgdGhlIHVkcGF0ZWQgc2NhdmVuZ2UgdG8gdGhlIHN0b3JlCglrLlNldFNjYXZlbmdlKGN0eCwgc2NhdmVuZ2UpCglyZXR1cm4gJmFtcDt0eXBlcy5Nc2dSZXZlYWxTb2x1dGlvblJlc3BvbnNle30sIG5pbAp9Cg=="}})],1)}),[],!1,null,null,null);l.default=b.exports}}]);