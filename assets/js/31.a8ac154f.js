(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{539:function(e,t,o){e.exports=o.p+"assets/img/1.a77cdc5b.png"},540:function(e,t,o){e.exports=o.p+"assets/img/2.19ff4acf.png"},603:function(e,t,o){"use strict";o.r(t);var a=o(0),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"polling-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#polling-app"}},[e._v("#")]),e._v(" Polling app")]),e._v(" "),a("p",[e._v("This tutorial creates a simple blockchain poll application.")]),e._v(" "),a("p",[a("img",{attrs:{src:o(539),alt:"Application screenshot"}})]),e._v(" "),a("p",[e._v("This tutorial builds understanding as it walks you through creating a blockchain app, adding and modifying types for a transaction, editing messages, and designing the front-end app.")]),e._v(" "),a("p",[a("strong",[e._v("You will learn how to")])]),e._v(" "),a("ul",[a("li",[e._v("Create a simple blockchain poll application")]),e._v(" "),a("li",[e._v("Design a front-end app that lets an end user sign in, create polls, cast votes, and see voting results")]),e._v(" "),a("li",[e._v("Add logic to require funds to execute the create poll transaction")]),e._v(" "),a("li",[e._v("Modify a REST endpoint")]),e._v(" "),a("li",[e._v("Modify CLI transactions")]),e._v(" "),a("li",[e._v("Add module components to the front-end app")]),e._v(" "),a("li",[e._v("Add a bank keeper to the module")]),e._v(" "),a("li",[e._v("Modify a message")])]),e._v(" "),a("h2",{attrs:{id:"requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),a("p",[e._v("This tutorial requires "),a("a",{attrs:{href:"https://docs.starport.network/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Starport"),a("OutboundLink")],1),e._v(" v0.15.1.")]),e._v(" "),a("p",[a("strong",[e._v("Important")]),e._v(" The tutorial is based on this specific version of Starport and is not supported for other versions.")]),e._v(" "),a("p",[e._v("The Starport tool is the easiest way to build a blockchain and accelerates chain development.")]),e._v(" "),a("p",[e._v("To install "),a("code",[e._v("starport")]),e._v(" into "),a("code",[e._v("/usr/local/bin")]),e._v(", run the following command:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"Y3VybCBodHRwczovL2dldC5zdGFycG9ydC5uZXR3b3JrL3N0YXJwb3J0QHYwLjE1LjEhIHwgYmFzaAo="}}),e._v(" "),a("p",[e._v("When the installation succeeds, you see this message:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"SW5zdGFsbGVkIGF0IC91c3IvbG9jYWwvYmluL3N0YXJwb3J0Cg=="}}),e._v(" "),a("p",[e._v("You can use Starport in a "),a("a",{attrs:{href:"http://gitpod.io/#https://github.com/tendermint/starport/tree/v0.15.1",target:"_blank",rel:"noopener noreferrer"}},[e._v("browser-based IDE"),a("OutboundLink")],1),e._v(", but this tutorial assumes you are using a local Starport installation. See "),a("a",{attrs:{href:"https://docs.starport.network/intro/install.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Install Starport"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"voting-app-goals"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#voting-app-goals"}},[e._v("#")]),e._v(" Voting App Goals")]),e._v(" "),a("p",[e._v("Create a blockchain poll app with a voting module. The app requires that the app end user can:")]),e._v(" "),a("ul",[a("li",[e._v("Sign in")]),e._v(" "),a("li",[e._v("Create polls")]),e._v(" "),a("li",[e._v("Cast votes")]),e._v(" "),a("li",[e._v("See voting results")])]),e._v(" "),a("p",[e._v("Design the app so that you can:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Collect transaction fees:")]),e._v(" "),a("ul",[a("li",[e._v("The create poll transaction fee is 200 tokens.")]),e._v(" "),a("li",[e._v("Voting is free.")])])]),e._v(" "),a("li",[a("p",[e._v("Restrict transactions only to signed in poll app end users.")])])]),e._v(" "),a("h2",{attrs:{id:"build-your-blockchain-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-your-blockchain-app"}},[e._v("#")]),e._v(" Build your Blockchain App")]),e._v(" "),a("p",[e._v("Use Starport to scaffold the blockchain app and the voting module.")]),e._v(" "),a("p",{attrs:{synopsis:""}},[a("strong",[e._v("Important")]),e._v(" In the code examples throughout this tutorial, when you see "),a("code",[e._v("username")]),e._v(" be sure to substitute it with "),a("em",[e._v("your username")]),e._v(". You need to do this in some of the Vue and REST API examples later. The app end user in this tutorial is alice.")]),e._v(" "),a("h3",{attrs:{id:"build-the-new-blockchain"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-the-new-blockchain"}},[e._v("#")]),e._v(" Build the new blockchain")]),e._v(" "),a("p",[e._v("To scaffold a new blockchain named voter:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3RhcnBvcnQgYXBwIGdpdGh1Yi5jb20vdXNlcm5hbWUvdm90ZXIK"}}),e._v(" "),a("p",[e._v("A new directory named "),a("code",[e._v("voter")]),e._v(" is created in your home directory.")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("voter")]),e._v(" directory contains a working blockchain app and all of the code you need to build and launch a blockchain-based app, including these files and directories:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("app")]),e._v(" contains files that connect all of the moving parts of your application")]),e._v(" "),a("li",[a("code",[e._v("cmd")]),e._v(" is responsible for the "),a("code",[e._v("voterd")]),e._v(" daemon that starts and interacts with the app")]),e._v(" "),a("li",[a("code",[e._v("proto")]),e._v(" contains the protobuf types")]),e._v(" "),a("li",[a("code",[e._v("vue")]),e._v(" contains the web user interface as shown at the top of this tutorial")]),e._v(" "),a("li",[a("code",[e._v("x")]),e._v(" contains the Cosmos SDK "),a("code",[e._v("voter")]),e._v(" module")])]),e._v(" "),a("p",[e._v("Cosmos SDK modules are the building blocks of apps. If you are new to Cosmos SDK modules, see "),a("a",{attrs:{href:"https://docs.cosmos.network/master/building-modules/intro.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Introduction to SDK Modules"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"launch-the-voter-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#launch-the-voter-app"}},[e._v("#")]),e._v(" Launch the voter app")]),e._v(" "),a("p",[e._v("To launch the app from the "),a("code",[e._v("voter")]),e._v(" project directory:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"Y2Qgdm90ZXIKc3RhcnBvcnQgc2VydmUK"}}),e._v(" "),a("p",[e._v("The following output is returned, along with any errors that might show up in your application. Two default users and their mnemonic pass phrases are created.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"Q29zbW9zIFNESydzIHZlcnNpb24gaXM6IFN0YXJnYXRlIHYwLjQwLjAgKG9yIGFib3ZlKQoK8J+boO+4jyAgQnVpbGRpbmcgcHJvdG8uLi4K8J+TpiBJbnN0YWxsaW5nIGRlcGVuZGVuY2llcy4uLgrwn5ug77iPICBCdWlsZGluZyB0aGUgYXBwLi4uCvCfkr8gSW5pdGlhbGl6aW5nIHRoZSBhcHAuLi4K8J+ZgiBDcmVhdGVkIGFjY291bnQgJnF1b3Q7YWxpY2UmcXVvdDsgd2l0aCBhZGRyZXNzICZxdW90O2Nvc21vczFxbjY2Mm1zc2owd3RhZ254eXZsZDdwa3NqYWdoenZtc3c4ODl0NyZxdW90OyB3aXRoIG1uZW1vbmljOiAmcXVvdDthbmdlciBkcml2ZSBydW53YXkga2VlbiBlbnJvbGwgc2hvb3QgZnJlcXVlbnQgZGVudGlzdCBjYXB0YWluIG5laXRoZXIgd2lyZSBwZXJzb24gZW50cnkgZXhhY3QgaW5jb21lIHNhaWwgZGl2b3JjZSBmcmVzaCBpbml0aWFsIGZlZWwgYm9zcyBtdWxlIHRhcmdldCBmbHkmcXVvdDsK8J+ZgiBDcmVhdGVkIGFjY291bnQgJnF1b3Q7Ym9iJnF1b3Q7IHdpdGggYWRkcmVzcyAmcXVvdDtjb3Ntb3MxamZ4MGpxZWFtd2o2ZG56aGs1ZzY0bDUzeWRjbXJzbWRtNmhsY3cmcXVvdDsgd2l0aCBtbmVtb25pYzogJnF1b3Q7eWFyZCBsYXllciB2YWN1dW0gc2lkZSBjb3lvdGUgY291c2luIGFub3RoZXIgc2V0dGxlIGFncmVlIHRodW5kZXIgbHVtYmVyIGJlZm9yZSBwb3J0aW9uIGVtYm9keSBob29kIHByYWN0aWNlIGNhcHRhaW4gYXhpcyBmaXNoIHplcm8gbW90aGVyIGJpdHRlciBleGFtcGxlIHNraSZxdW90Owrwn4yNIFJ1bm5pbmcgYSBDb3Ntb3MgJ3ZvdGVyJyBhcHAgd2l0aCBUZW5kZXJtaW50IGF0IGh0dHA6Ly9sb2NhbGhvc3Q6MjY2NTcuCvCfjI0gUnVubmluZyBhIHNlcnZlciBhdCBodHRwOi8vbG9jYWxob3N0OjEzMTcgKExDRCkK8J+MjSBSdW5uaW5nIGEgZmF1Y2V0IGF0IGh0dHA6Ly86NDUwMAoK8J+agCBHZXQgc3RhcnRlZDogaHR0cDovL2xvY2FsaG9zdDoxMjM0NQo="}}),e._v(" "),a("p",[a("strong",[e._v("Congratulations!")]),e._v(" You successfully created and launched a blockchain application.")]),e._v(" "),a("h2",{attrs:{id:"add-a-poll-transaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-a-poll-transaction"}},[e._v("#")]),e._v(" Add a Poll Transaction")]),e._v(" "),a("p",[e._v("The voter app doesn't do anything yet, so the next step is to add some types. Adding types generates files that implement create, read, update, and delete (CRUD) functionality for a custom new type.")]),e._v(" "),a("p",[e._v("The voting applications has two types of entities: polls and votes.")]),e._v(" "),a("h3",{attrs:{id:"add-the-poll-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-the-poll-type"}},[e._v("#")]),e._v(" Add the poll type")]),e._v(" "),a("p",[e._v("A poll type has a "),a("code",[e._v("title")]),e._v(" and a list of "),a("code",[e._v("options")]),e._v(".")]),e._v(" "),a("p",[e._v("In a new terminal window, run the following command in the "),a("code",[e._v("voter")]),e._v(" directory:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3RhcnBvcnQgdHlwZSBwb2xsIHRpdGxlIG9wdGlvbnMK"}}),e._v(" "),a("p",[e._v("After the poll type is successfully created, you see:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"",base64:"8J+OiSBDcmVhdGVkIGEgdHlwZSBgcG9sbGAK"}}),e._v(" "),a("p",[e._v("With this command, you generated the code that handles the creation of "),a("code",[e._v("poll")]),e._v(" items.")]),e._v(" "),a("h3",{attrs:{id:"view-the-front-end-user-interface"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#view-the-front-end-user-interface"}},[e._v("#")]),e._v(" View the Front-end User Interface")]),e._v(" "),a("p",[e._v("To see the front-end app form for creating polls:")]),e._v(" "),a("ul",[a("li",[e._v("Run "),a("code",[e._v("starport serve")])]),e._v(" "),a("li",[e._v("Visit "),a("a",{attrs:{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:8080"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("It takes a few minutes to rebuild the app, so give it a couple of seconds. If your "),a("code",[e._v("localhost:8080")]),e._v(" is already in use, your app can be viewed on the next available port.")]),e._v(" "),a("p",[a("img",{attrs:{src:o(540),alt:"Application screenshot"}})]),e._v(" "),a("h3",{attrs:{id:"sign-in-as-alice"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sign-in-as-alice"}},[e._v("#")]),e._v(" Sign in as Alice")]),e._v(" "),a("p",[e._v("On the front-end app, sign in as end user Alice. The mnemonic passphrases for Alice and Bob were printed in the console after you ran the "),a("code",[e._v("starport serve")]),e._v(" command.")]),e._v(" "),a("p",[e._v("After you are signed in as Alice, you can import an existing wallet that was created with the app. The wallet in the voter app can handle multiple accounts, so give your wallet a descriptive name. Using a descriptive wallet name helps you recognize this wallet in future transactions. For this example, naming this wallet "),a("code",[e._v("voter")]),e._v(" makes sense.")]),e._v(" "),a("ol",[a("li",[e._v("Click "),a("strong",[e._v("Access Wallet")]),e._v(" and then click "),a("strong",[e._v("Import existing wallet")]),e._v(".")]),e._v(" "),a("li",[e._v("Enter the passphrase for Alice that was output to your console when you launched the voter app with the "),a("code",[e._v("starport serve")]),e._v(" command.")]),e._v(" "),a("li",[e._v("Name your wallet "),a("code",[e._v("voter")]),e._v(" and enter a password.")]),e._v(" "),a("li",[e._v("Click "),a("strong",[e._v("Done")]),e._v(".")])]),e._v(" "),a("p",[e._v("Now you want to view the custom "),a("code",[e._v("poll")]),e._v(" type you created earlier.")]),e._v(" "),a("h2",{attrs:{id:"view-the-poll-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#view-the-poll-type"}},[e._v("#")]),e._v(" View the Poll Type")]),e._v(" "),a("p",[e._v("To view the newly created "),a("code",[e._v("poll")]),e._v(" transaction type, click the "),a("strong",[e._v("Custom Type")]),e._v(" navigation point on the web browser front-end app.")]),e._v(" "),a("p",[e._v("To see the workflow to create a poll, enter an example value for the title and poll options. A new object is created and displayed next to the new poll form. You have successfully created an object and stored it on the blockchain!")]),e._v(" "),a("p",[e._v("This object, however, does not look and work exactly like a poll. You need to be able to add option fields and store them as an array. You want the option fields to display as interactive buttons.")]),e._v(" "),a("p",[e._v("Take a look at some of the files modified by the "),a("code",[e._v("starport type")]),e._v(" command.")]),e._v(" "),a("h2",{attrs:{id:"modify-the-protobuffer-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modify-the-protobuffer-types"}},[e._v("#")]),e._v(" Modify the Protobuffer Types")]),e._v(" "),a("p",[e._v("To have multiple options in the poll, you must change the value "),a("code",[e._v("string options")]),e._v(" in the Protobuffer definitions.")]),e._v(" "),a("ol",[a("li",[e._v("In the "),a("code",[e._v("proto/voter")]),e._v(" directory, open the "),a("code",[e._v("poll.proto")]),e._v(" file.")]),e._v(" "),a("li",[e._v("To allow passing an array of strings, add the keyword "),a("code",[e._v("repeated")]),e._v(" before "),a("code",[e._v("string options")]),e._v(":")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"proto",base64:"bWVzc2FnZSBQb2xsIHsKc3RyaW5nIGNyZWF0b3IgPSAxOwp1aW50NjQgaWQgPSAyOwpzdHJpbmcgdGl0bGUgPSAzOwpyZXBlYXRlZCBzdHJpbmcgb3B0aW9ucyA9IDQ7Cn0K"}}),e._v(" "),a("p",[e._v("In the "),a("code",[e._v("proto/voter/tx.proto")]),e._v(" file, update the CRUD (Create, Read, Update and Delete) types for the poll transaction.")]),e._v(" "),a("ol",[a("li",[e._v("Add the keyword "),a("code",[e._v("repeated")]),e._v(" before "),a("code",[e._v("string options")]),e._v(" for the "),a("code",[e._v("MsgCreatePoll")]),e._v(" message:")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"proto",base64:"ICAgbWVzc2FnZSBNc2dDcmVhdGVQb2xsIHsKICAgc3RyaW5nIGNyZWF0b3IgPSAxOwogICBzdHJpbmcgdGl0bGUgPSAyOwogICByZXBlYXRlZCBzdHJpbmcgb3B0aW9ucyA9IDM7CiAgIH0K"}}),e._v(" "),a("p",[e._v("And the "),a("code",[e._v("MsgUpdatePoll")]),e._v(" message:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"proto",base64:"ICBtZXNzYWdlIE1zZ1VwZGF0ZVBvbGwgewogIHN0cmluZyBjcmVhdG9yID0gMTsKICB1aW50NjQgaWQgPSAyOwogIHN0cmluZyB0aXRsZSA9IDM7CiAgcmVwZWF0ZWQgc3RyaW5nIG9wdGlvbnMgPSA0OwogIH0K"}}),e._v(" "),a("h2",{attrs:{id:"modify-the-poll-transaction-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modify-the-poll-transaction-message"}},[e._v("#")]),e._v(" Modify the Poll Transaction Message")]),e._v(" "),a("p",[e._v("Navigate to the "),a("code",[e._v("message_poll.go")]),e._v(" file at "),a("code",[e._v("x/voter/types/message_poll.go")]),e._v(" that defines a message that creates a poll.")]),e._v(" "),a("ol",[a("li",[e._v("To store the options as a list instead of a string, replace "),a("code",[e._v("options string")]),e._v(" with "),a("code",[e._v("options []string")]),e._v(" in the "),a("code",[e._v("NewMsgCreatePoll")]),e._v(" function:")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC92b3Rlci90eXBlcy9tZXNzYWdlX3BvbGwuZ28KZnVuYyBOZXdNc2dDcmVhdGVQb2xsKGNyZWF0b3Igc3RyaW5nLCB0aXRsZSBzdHJpbmcsIG9wdGlvbnMgW11zdHJpbmcpICpNc2dDcmVhdGVQb2xsIHsKICAgIHJldHVybiAmYW1wO01zZ0NyZWF0ZVBvbGx7CiAgICAgICAgQ3JlYXRvcjogY3JlYXRvciwKICAgICAgICBUaXRsZTogICB0aXRsZSwKICAgICAgICBPcHRpb25zOiBvcHRpb25zLAogICAgfQp9Cg=="}}),e._v(" "),a("p",[e._v("And also in the "),a("code",[e._v("NewMsgUpdatePoll")]),e._v(" function:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC92b3Rlci90eXBlcy9tZXNzYWdlX3BvbGwuZ28KZnVuYyBOZXdNc2dVcGRhdGVQb2xsKGNyZWF0b3Igc3RyaW5nLCBpZCB1aW50NjQsIHRpdGxlIHN0cmluZywgb3B0aW9ucyBbXXN0cmluZykgKk1zZ1VwZGF0ZVBvbGwgewogICAgcmV0dXJuICZhbXA7TXNnVXBkYXRlUG9sbHsKICAgICAgICBJZDogICAgICBpZCwKICAgICAgICBDcmVhdG9yOiBjcmVhdG9yLAogICAgICAgIFRpdGxlOiAgIHRpdGxlLAogICAgICAgIE9wdGlvbnM6IG9wdGlvbnMsCiAgICB9Cn0K"}}),e._v(" "),a("h2",{attrs:{id:"about-the-poll-keeper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#about-the-poll-keeper"}},[e._v("#")]),e._v(" About the Poll Keeper")]),e._v(" "),a("p",[e._v("To write anything to a blockchain or perform any other state transition, a client makes an HTTP POST request. In our case, the voter web app is the client.")]),e._v(" "),a("p",[e._v("The POST request with a title and options goes to the "),a("a",{attrs:{href:"http://localhost:1317/voter/poll",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:1317/voter/poll"),a("OutboundLink")],1),e._v(" endpoint handler that is defined in "),a("code",[e._v("x/voter/client/rest/txPoll.go")]),e._v(".")]),e._v(" "),a("p",[e._v("The handler creates an unsigned transaction that contains an array of messages. The client then signs the transaction and sends it to "),a("a",{attrs:{href:"http://localhost:1317/txs",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:1317/txs"),a("OutboundLink")],1),e._v(". The application processes the transaction by sending each message to a corresponding handler, in our case "),a("code",[e._v("x/voter/handler.go")]),e._v(".")]),e._v(" "),a("p",[e._v("A handler then calls a "),a("code",[e._v("CreatePoll")]),e._v(" function that is defined in "),a("code",[e._v("x/voter/keeper/poll.go")]),e._v(" that writes the poll data into the store.")]),e._v(" "),a("h3",{attrs:{id:"modify-the-poll-keeper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modify-the-poll-keeper"}},[e._v("#")]),e._v(" Modify the Poll Keeper")]),e._v(" "),a("p",[e._v("The keeper adds the polls to the blockchain database.")]),e._v(" "),a("p",[e._v("Navigate to the "),a("code",[e._v("poll.go")]),e._v(" file at "),a("code",[e._v("x/voter/keeper/poll.go")]),e._v(". You need to make the same changes to modify the poll keeper to use the list of options.")]),e._v(" "),a("ul",[a("li",[e._v("Change the "),a("code",[e._v("options")]),e._v(" parameter from "),a("code",[e._v("string")]),e._v(" to "),a("code",[e._v("[]string")]),e._v(" in the "),a("code",[e._v("AppendPoll")]),e._v(" function:")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC92b3Rlci9rZWVwZXIvcG9sbC5nbwpmdW5jIChrIEtlZXBlcikgQXBwZW5kUG9sbCgKICAgIGN0eCBzZGsuQ29udGV4dCwKICAgIGNyZWF0b3Igc3RyaW5nLAogICAgdGl0bGUgc3RyaW5nLAogICAgb3B0aW9ucyBbXXN0cmluZywKKSB1aW50NjQgewogICAgLy8gQ3JlYXRlIHRoZSBwb2xsCiAgICBjb3VudCA6PSBrLkdldFBvbGxDb3VudChjdHgpCiAgICB2YXIgcG9sbCA9IHR5cGVzLlBvbGx7CiAgICAgICAgQ3JlYXRvcjogY3JlYXRvciwKICAgICAgICBJZDogICAgICBjb3VudCwKICAgICAgICBUaXRsZTogICB0aXRsZSwKICAgICAgICBPcHRpb25zOiBvcHRpb25zLAogICAgfQoKICAgIHN0b3JlIDo9IHByZWZpeC5OZXdTdG9yZShjdHguS1ZTdG9yZShrLnN0b3JlS2V5KSwgdHlwZXMuS2V5UHJlZml4KHR5cGVzLlBvbGxLZXkpKQogICAgdmFsdWUgOj0gay5jZGMuTXVzdE1hcnNoYWxCaW5hcnlCYXJlKCZhbXA7cG9sbCkKICAgIHN0b3JlLlNldChHZXRQb2xsSURCeXRlcyhwb2xsLklkKSwgdmFsdWUpCgogICAgLy8gVXBkYXRlIHBvbGwgY291bnQKICAgIGsuU2V0UG9sbENvdW50KGN0eCwgY291bnQrMSkKCiAgICByZXR1cm4gY291bnQKfQo="}}),e._v(" "),a("h2",{attrs:{id:"modify-the-rest-endpoint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modify-the-rest-endpoint"}},[e._v("#")]),e._v(" Modify the REST Endpoint")]),e._v(" "),a("p",[e._v("The REST endpoint is defined in the "),a("code",[e._v("txPoll.go")]),e._v(" file at "),a("code",[e._v("x/voter/client/rest/txPoll.go")]),e._v(".")]),e._v(" "),a("ol",[a("li",[e._v("Replace "),a("code",[e._v("Options string")]),e._v(" with "),a("code",[e._v("Options []string")]),e._v(" in the "),a("code",[e._v("createPollRequest")]),e._v(" struct.")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBjcmVhdGVQb2xsUmVxdWVzdCBzdHJ1Y3QgewpCYXNlUmVxIHJlc3QuQmFzZVJlcSBganNvbjomcXVvdDtiYXNlX3JlcSZxdW90O2AKQ3JlYXRvciBzdHJpbmcgICAgICAgYGpzb246JnF1b3Q7Y3JlYXRvciZxdW90O2AKVGl0bGUgICBzdHJpbmcgICAgICAgYGpzb246JnF1b3Q7dGl0bGUmcXVvdDtgCk9wdGlvbnMgW11zdHJpbmcgICAgIGBqc29uOiZxdW90O29wdGlvbnMmcXVvdDtgCn0K"}}),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[e._v("And also in the "),a("code",[e._v("updatePollRequest")]),e._v(" struct.")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSB1cGRhdGVQb2xsUmVxdWVzdCBzdHJ1Y3QgewogICAgQmFzZVJlcSByZXN0LkJhc2VSZXEgYGpzb246JnF1b3Q7YmFzZV9yZXEmcXVvdDtgCiAgICBDcmVhdG9yIHN0cmluZyAgICAgICBganNvbjomcXVvdDtjcmVhdG9yJnF1b3Q7YAogICAgVGl0bGUgICBzdHJpbmcgICAgICAgYGpzb246JnF1b3Q7dGl0bGUmcXVvdDtgCiAgICBPcHRpb25zIFtdc3RyaW5nICAgICBganNvbjomcXVvdDtvcHRpb25zJnF1b3Q7YAp9Cg=="}}),e._v(" "),a("h3",{attrs:{id:"modify-the-cli-transaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modify-the-cli-transaction"}},[e._v("#")]),e._v(" Modify the CLI Transaction")]),e._v(" "),a("p",[e._v("A poll app end user can also interact with your application by using a command line interface.")]),e._v(" "),a("p",[e._v("The CLI definition is available at "),a("code",[e._v("x/voter/client/cli/txPoll.go")]),e._v(".")]),e._v(" "),a("p",[e._v("For example:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"dm90ZXJjbGkgdHggdm90ZXIgY3JlYXRlLXBvbGwgJnF1b3Q7VGV4dCBlZGl0b3JzJnF1b3Q7ICZxdW90O0VtYWNzJnF1b3Q7ICZxdW90O1ZpbSZxdW90OyAtLWZyb20gYWxpY2UK"}}),e._v(" "),a("p",[e._v("This command generates a transaction with a create poll message, signs the transaction using the private key of app end user "),a("code",[e._v("alice")]),e._v(", and broadcasts the transaction to the blockchain. Remember, "),a("code",[e._v("alice")]),e._v(" is one of two users that this tutorial created by default.")]),e._v(" "),a("p",[e._v("The modification you need to make is to change a line that reads arguments from the console.")]),e._v(" "),a("p",[e._v("In the function "),a("code",[e._v("CmdCreatePoll")]),e._v(" replace:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"QXJnczogIGNvYnJhLkV4YWN0QXJncygyKSwK"}}),e._v(" "),a("p",[e._v("with")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"QXJnczogIGNvYnJhLk1pbmltdW1OQXJncygyKSwK"}}),e._v(" "),a("p",[e._v("and replace:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"YXJnc09wdGlvbnMgOj0gc3RyaW5nKGFyZ3NbMV0pCg=="}}),e._v(" "),a("p",[e._v("with")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"YXJnc09wdGlvbnMgOj0gYXJnc1sxOmxlbihhcmdzKV0K"}}),e._v(" "),a("p",[e._v("The variable "),a("code",[e._v("msg")]),e._v(" is defined to read a string of argOptions, so delete the stringification from "),a("code",[e._v("argsOptions")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"bXNnIDo9IHR5cGVzLk5ld01zZ0NyZWF0ZVBvbGwoY2xpZW50Q3R4LkdldEZyb21BZGRyZXNzKCkuU3RyaW5nKCksIHN0cmluZyhhcmdzVGl0bGUpLCBhcmdzT3B0aW9ucykK"}}),e._v(" "),a("p",[e._v("You end up with the following function:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBDbWRDcmVhdGVQb2xsKCkgKmNvYnJhLkNvbW1hbmQgewogICAgY21kIDo9ICZhbXA7Y29icmEuQ29tbWFuZHsKICAgICAgICBVc2U6ICAgJnF1b3Q7Y3JlYXRlLXBvbGwgW3RpdGxlXSBbb3B0aW9uc10mcXVvdDssCiAgICAgICAgU2hvcnQ6ICZxdW90O0NyZWF0ZXMgYSBuZXcgcG9sbCZxdW90OywKICAgICAgICBBcmdzOiAgY29icmEuTWluaW11bU5BcmdzKDIpLAogICAgICAgIFJ1bkU6IGZ1bmMoY21kICpjb2JyYS5Db21tYW5kLCBhcmdzIFtdc3RyaW5nKSBlcnJvciB7CiAgICAgICAgICAgIGFyZ3NUaXRsZSA6PSBzdHJpbmcoYXJnc1swXSkKICAgICAgICAgICAgYXJnc09wdGlvbnMgOj0gYXJnc1sxOmxlbihhcmdzKV0KCiAgICAgICAgICAgIGNsaWVudEN0eCwgZXJyIDo9IGNsaWVudC5HZXRDbGllbnRUeENvbnRleHQoY21kKQogICAgICAgICAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICAgICAgICAgIHJldHVybiBlcnIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbXNnIDo9IHR5cGVzLk5ld01zZ0NyZWF0ZVBvbGwoY2xpZW50Q3R4LkdldEZyb21BZGRyZXNzKCkuU3RyaW5nKCksIHN0cmluZyhhcmdzVGl0bGUpLCBhcmdzT3B0aW9ucykKICAgICAgICAgICAgaWYgZXJyIDo9IG1zZy5WYWxpZGF0ZUJhc2ljKCk7IGVyciAhPSBuaWwgewogICAgICAgICAgICAgICAgcmV0dXJuIGVycgogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0eC5HZW5lcmF0ZU9yQnJvYWRjYXN0VHhDTEkoY2xpZW50Q3R4LCBjbWQuRmxhZ3MoKSwgbXNnKQogICAgICAgIH0sCiAgICB9CgogICAgZmxhZ3MuQWRkVHhGbGFnc1RvQ21kKGNtZCkKCiAgICByZXR1cm4gY21kCn0K"}}),e._v(" "),a("p",[e._v("Now make similar changes for the function "),a("code",[e._v("CmdUpdatePoll")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"QXJnczogIGNvYnJhLk1pbmltdW1OQXJncygzKSwK"}}),e._v(" "),a("p",[e._v("and")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"YXJnc09wdGlvbnMgOj0gYXJnc1syOmxlbihhcmdzKV0K"}}),e._v(" "),a("p",[e._v("and")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"bXNnIDo9IHR5cGVzLk5ld01zZ1VwZGF0ZVBvbGwoY2xpZW50Q3R4LkdldEZyb21BZGRyZXNzKCkuU3RyaW5nKCksIGlkLCBzdHJpbmcoYXJnc1RpdGxlKSwgYXJnc09wdGlvbnMpCg=="}}),e._v(" "),a("p",[e._v("These changes assume that all arguments after the first one represent a list of options.")]),e._v(" "),a("p",[e._v("You end up with the following function:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyBDbWRVcGRhdGVQb2xsKCkgKmNvYnJhLkNvbW1hbmQgewogICAgY21kIDo9ICZhbXA7Y29icmEuQ29tbWFuZHsKICAgICAgICBVc2U6ICAgJnF1b3Q7dXBkYXRlLXBvbGwgW2lkXSBbdGl0bGVdIFtvcHRpb25zXSZxdW90OywKICAgICAgICBTaG9ydDogJnF1b3Q7VXBkYXRlIGEgcG9sbCZxdW90OywKICAgICAgICBBcmdzOiAgY29icmEuTWluaW11bU5BcmdzKDMpLAogICAgICAgIFJ1bkU6IGZ1bmMoY21kICpjb2JyYS5Db21tYW5kLCBhcmdzIFtdc3RyaW5nKSBlcnJvciB7CiAgICAgICAgICAgIGlkLCBlcnIgOj0gc3RyY29udi5QYXJzZVVpbnQoYXJnc1swXSwgMTAsIDY0KQogICAgICAgICAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICAgICAgICAgIHJldHVybiBlcnIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXJnc1RpdGxlIDo9IHN0cmluZyhhcmdzWzFdKQogICAgICAgICAgICBhcmdzT3B0aW9ucyA6PSBhcmdzWzI6bGVuKGFyZ3MpXQoKICAgICAgICAgICAgY2xpZW50Q3R4LCBlcnIgOj0gY2xpZW50LkdldENsaWVudFR4Q29udGV4dChjbWQpCiAgICAgICAgICAgIGlmIGVyciAhPSBuaWwgewogICAgICAgICAgICAgICAgcmV0dXJuIGVycgogICAgICAgICAgICB9CgogICAgICAgICAgICBtc2cgOj0gdHlwZXMuTmV3TXNnVXBkYXRlUG9sbChjbGllbnRDdHguR2V0RnJvbUFkZHJlc3MoKS5TdHJpbmcoKSwgaWQsIHN0cmluZyhhcmdzVGl0bGUpLCBhcmdzT3B0aW9ucykKICAgICAgICAgICAgaWYgZXJyIDo9IG1zZy5WYWxpZGF0ZUJhc2ljKCk7IGVyciAhPSBuaWwgewogICAgICAgICAgICAgICAgcmV0dXJuIGVycgogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0eC5HZW5lcmF0ZU9yQnJvYWRjYXN0VHhDTEkoY2xpZW50Q3R4LCBjbWQuRmxhZ3MoKSwgbXNnKQogICAgICAgIH0sCiAgICB9CgogICAgZmxhZ3MuQWRkVHhGbGFnc1RvQ21kKGNtZCkKCiAgICByZXR1cm4gY21kCn0K"}}),e._v(" "),a("p",[e._v("For the app to recognize the changes that you have made, reset the application before you run it again. To reset the app:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"c3RhcnBvcnQgc2VydmUgLS1yZXNldC1vbmNlCg=="}}),e._v(" "),a("h2",{attrs:{id:"add-the-votes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-the-votes"}},[e._v("#")]),e._v(" Add the Votes")]),e._v(" "),a("p",[e._v("At this point, you have created a blockchain that lets app end users create polls. Now it's time to enable the app end users to cast votes on an existing poll.")]),e._v(" "),a("p",[e._v("To create the vote type:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3RhcnBvcnQgdHlwZSB2b3RlIHBvbGxJRCBvcHRpb24K"}}),e._v(" "),a("p",[e._v("This command creates a vote type transaction with:")]),e._v(" "),a("ul",[a("li",[e._v("A poll ID")]),e._v(" "),a("li",[e._v("An option that is a string representation of the selected answer")])]),e._v(" "),a("p",[e._v("Now, restart the application. Remember to use the "),a("code",[e._v("--reset-once")]),e._v(" flag to recognize the code changes.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"bash",base64:"c3RhcnBvcnQgc2VydmUgLS1yZXNldC1vbmNlCg=="}}),e._v(" "),a("p",[e._v("Each time you reset the application state, all of the data from your previously created state is saved.")]),e._v(" "),a("p",{attrs:{synopsis:""}},[e._v("Each time the app restarts, the app end users alice and bob receive new passphrases and new tokens. Make sure to update the wallet accounts in the front-end app after you reset the state of the blockchain.")]),e._v(" "),a("p",[e._v("Now that you have made all the required changes to the app, take a look at the client-side application.")]),e._v(" "),a("h2",{attrs:{id:"front-end-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#front-end-application"}},[e._v("#")]),e._v(" Front-end Application")]),e._v(" "),a("p",[e._v("Starport automatically generated a basic front end for the app. For convenience, "),a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js"),a("OutboundLink")],1),e._v(" framework is used with "),a("a",{attrs:{href:"https://vuex.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vuex"),a("OutboundLink")],1),e._v(" for state management. Because all features of the app are exposed through an HTTP API, you can build clients using any language or framework.")]),e._v(" "),a("p",[e._v("For the front-end app, you can focus on the content of these directories:")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("vue/src/views")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("vue/src/components")])]),e._v(" "),a("p",[e._v("These directories contain the code for the page templates of your app.")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("vue/src/store/")])]),e._v(" "),a("p",[e._v("Handles sending transactions and receiving data from your blockchain and the "),a("a",{attrs:{href:"https://github.com/tendermint/vue/",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("@tendermint/vue")]),a("OutboundLink")],1),e._v("directory that contains UI components, like buttons and forms. This directory contains the generated protobuffer file definitions that were defined in the "),a("code",[e._v("vue/src/store/generated/username/voter/username.voter.voter")]),e._v(" directory.")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("vue/src/store/generated/username/voter/username.voter.voter/index.js")]),e._v(" has the generated transactions "),a("code",[e._v("MsgCreatePoll")]),e._v(", "),a("code",[e._v("MsgUpdatePoll")]),e._v(", "),a("code",[e._v("MsgDeletePoll")]),e._v(" that use the "),a("a",{attrs:{href:"https://github.com/cosmwasm/cosmjs",target:"_blank",rel:"noopener noreferrer"}},[e._v("CosmJS"),a("OutboundLink")],1),e._v(" library for handling wallets, creating, signing and broadcasting transactions and defines a Vuex store.")])])]),e._v(" "),a("h2",{attrs:{id:"add-the-voter-module-component-to-the-front-end"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-the-voter-module-component-to-the-front-end"}},[e._v("#")]),e._v(" Add the Voter Module Component to the Front End")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Navigate to the "),a("code",[e._v("views")]),e._v(" directory in "),a("code",[e._v("vue/src/views")]),e._v(".")])]),e._v(" "),a("li",[a("p",[e._v("Since you don't need the default form component, replace these two lines in "),a("code",[e._v("vue/src/views/Types.vue")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Jmx0O1NwVHlwZSBtb2R1bGVQYXRoPSZxdW90O3VzZXJuYW1lLnZvdGVyLnZvdGVyJnF1b3Q7IG1vZHVsZVR5cGU9JnF1b3Q7Vm90ZSZxdW90OyAgLyZndDsKJmx0O1NwVHlwZSBtb2R1bGVQYXRoPSZxdW90O3VzZXJuYW1lLnZvdGVyLnZvdGVyJnF1b3Q7IG1vZHVsZVR5cGU9JnF1b3Q7UG9sbCZxdW90OyAgLyZndDsK"}}),e._v(" "),a("p",[e._v("with two new components and the "),a("code",[e._v("Voter Module")]),e._v(" title:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Jmx0O1NwSDMmZ3Q7CiAgVm90ZXIgTW9kdWxlCiZsdDsvU3BIMyZndDsKJmx0O3BvbGwtZm9ybSAvJmd0OwombHQ7cG9sbC1saXN0IC8mZ3Q7Cg=="}})],1),e._v(" "),a("li",[a("p",[e._v("To import the component, add the import statements in the "),a("code",[e._v("<script>")]),e._v(" tag after the template code. The "),a("code",[e._v("<script>")]),e._v(" tag contains JavaScript code.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Jmx0O3NjcmlwdCZndDsKaW1wb3J0IFBvbGxGb3JtIGZyb20gJnF1b3Q7Li4vY29tcG9uZW50cy9Qb2xsRm9ybSZxdW90OzsKaW1wb3J0IFBvbGxMaXN0IGZyb20gJnF1b3Q7Li4vY29tcG9uZW50cy9Qb2xsTGlzdCZxdW90OzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVHlwZXMnLAogIGNvbXBvbmVudHM6IHsgUG9sbEZvcm0sIFBvbGxMaXN0IH0sCn0KJmx0Oy9zY3JpcHQmZ3Q7Cg=="}})],1)]),e._v(" "),a("p",[e._v("Now you can start creating the PollForm and PollList components.")]),e._v(" "),a("h3",{attrs:{id:"create-the-pollform-component"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-the-pollform-component"}},[e._v("#")]),e._v(" Create the PollForm Component")]),e._v(" "),a("p",{attrs:{synopsis:""}},[a("strong",[e._v("Note:")]),e._v(" Some of the following steps depend on one another. If you look at your front-end app before you have updated all of the components that depend on one another, the front-end app might not load. Don't worry if the front-end app doesn't load at this point, this expected behavior happens because you have not yet completed code updates for all of the dependencies. Just complete the steps. Everything should work fine after the tutorial is completed and the pieces are wired up correctly.")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("For the PollForm, create a new file "),a("code",[e._v("PollForm.vue")]),e._v(" in the "),a("code",[e._v("vue/src/components")]),e._v(" directory.")])]),e._v(" "),a("li",[a("p",[e._v("Add this code to give the PollForm component a title and two buttons:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"vue",base64:"Jmx0O3RlbXBsYXRlJmd0OwogICZsdDtkaXYmZ3Q7CiAgICAmbHQ7ZGl2IGNsYXNzPSZxdW90O3NwLXZvdGVyX19tYWluIHNwLWJveCBzcC1zaGFkb3cgc3AtZm9ybS1ncm91cCZxdW90OyZndDsKICAgICAgICAmbHQ7Zm9ybSBjbGFzcz0mcXVvdDtzcC12b3Rlcl9fbWFpbl9fZm9ybSZxdW90OyZndDsKICAgICAgICAgICZsdDtkaXYgY2xhc3M9JnF1b3Q7c3Atdm90ZXJfX21haW5fX3JjcHRfX2hlYWRlciBzcC1ib3gtaGVhZGVyJnF1b3Q7Jmd0OwogICAgICAgICAgICBDcmVhdGUgYSBQb2xsCiAgICAgICAgICAmbHQ7L2RpdiZndDsKCiAgICAgICAgICAmbHQ7aW5wdXQgY2xhc3M9JnF1b3Q7c3AtaW5wdXQmcXVvdDsgcGxhY2Vob2xkZXI9JnF1b3Q7VGl0bGUmcXVvdDsgdi1tb2RlbD0mcXVvdDt0aXRsZSZxdW90OyAvJmd0OwogICAgICAgICAgJmx0O2RpdiB2LWZvcj0mcXVvdDsob3B0aW9uLCBpbmRleCkgaW4gb3B0aW9ucyZxdW90OyB2LWJpbmQ6a2V5PSZxdW90OydvcHRpb24nICsgaW5kZXgmcXVvdDsmZ3Q7CiAgICAgICAgICAgICZsdDtpbnB1dCBjbGFzcz0mcXVvdDtzcC1pbnB1dCZxdW90OyBwbGFjZWhvbGRlcj0mcXVvdDtPcHRpb24mcXVvdDsgdi1tb2RlbD0mcXVvdDtvcHRpb24udGl0bGUmcXVvdDsgLyZndDsKICAgICAgICAgICZsdDsvZGl2Jmd0OwogICAgICAgICAgJmx0O3NwLWJ1dHRvbiBAY2xpY2s9JnF1b3Q7YWRkJnF1b3Q7Jmd0OysgQWRkIG9wdGlvbiZsdDsvc3AtYnV0dG9uJmd0OwogICAgICAgICAgJmx0O3NwLWJ1dHRvbiBAY2xpY2s9JnF1b3Q7c3VibWl0JnF1b3Q7Jmd0O0NyZWF0ZSBwb2xsJmx0Oy9zcC1idXR0b24mZ3Q7CiAgICAgICAgJmx0Oy9mb3JtJmd0OwogICAgJmx0Oy9kaXYmZ3Q7CiAgJmx0Oy9kaXYmZ3Q7CiZsdDsvdGVtcGxhdGUmZ3Q7Cg=="}})],1),e._v(" "),a("li",[a("p",[e._v("After the template code, add code in the "),a("code",[e._v("<script>")]),e._v(" tag to enable the PollForm to manage user input of the user and broadcast transactions to the blockchain when the form gets submitted. The "),a("code",[e._v("<script>")]),e._v(" tag marks this code as JavaScript rather than template code.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICZxdW90O1BvbGxGb3JtJnF1b3Q7LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogJnF1b3Q7JnF1b3Q7LAogICAgICBvcHRpb25zOiBbewogICAgICAgIHRpdGxlOiAmcXVvdDsmcXVvdDssCiAgICAgIH1dLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CgogICAgY3VycmVudEFjY291bnQoKSB7CiAgICAgIGlmICh0aGlzLl9kZXBzTG9hZGVkKSB7CiAgICAgICAgaWYgKHRoaXMubG9nZ2VkSW4pIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjb21tb24vd2FsbGV0L2FkZHJlc3MnXQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gbnVsbAogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgICB9CiAgICB9LAogICAgbG9nZ2VkSW4oKSB7CiAgICAgIGlmICh0aGlzLl9kZXBzTG9hZGVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NvbW1vbi93YWxsZXQvbG9nZ2VkSW4nXQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGQoKSB7CiAgICAgIHRoaXMub3B0aW9ucyA9IFsuLi50aGlzLm9wdGlvbnMsIHsgdGl0bGU6ICZxdW90OyZxdW90OyB9XTsKICAgIH0sCiAgICBhc3luYyBzdWJtaXQoKSB7CiAgICAgIGNvbnN0IHZhbHVlID0gewogICAgICAgIGNyZWF0b3I6IHRoaXMuY3VycmVudEFjY291bnQsCiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLm1hcCgobykgPSZndDsgby50aXRsZSksCiAgICAgIH07CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCZxdW90O3VzZXJuYW1lLnZvdGVyLnZvdGVyL3NlbmRNc2dDcmVhdGVQb2xsJnF1b3Q7LCB7CiAgICAgICAgdmFsdWUsCiAgICAgICAgZmVlOiBbXSwKICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="}})],1),e._v(" "),a("li",[a("p",[e._v("Refresh the page.")])]),e._v(" "),a("li",[a("p",[e._v("Sign in as an app end user with a password.")])]),e._v(" "),a("li",[a("p",[e._v("Create a new poll. It takes a few seconds to process the transaction.")])]),e._v(" "),a("li",[a("p",[e._v("Now, visit "),a("a",{attrs:{href:"http://localhost:1317/voter/poll",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:1317/voter/poll"),a("OutboundLink")],1),e._v(". This endpoint is defined in "),a("code",[e._v("x/voter/client/rest/queryPoll.go")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogICZxdW90O2hlaWdodCZxdW90OzogJnF1b3Q7MCZxdW90OywKICAmcXVvdDtyZXN1bHQmcXVvdDs6IFsKICAgIHsKICAgICAgJnF1b3Q7Y3JlYXRvciZxdW90OzogJnF1b3Q7Y29zbW9zMTlxcWE3ajczNzM1dzRwY3g5bWtrYXhyMDBhZjdwNDMybjYydHY2JnF1b3Q7LAogICAgICAmcXVvdDtpZCZxdW90OzogJnF1b3Q7ODI2NDc3YWItMDAwNS00ZTY4LTgwMzEtMTk3NThkMzMxNjgxJnF1b3Q7LAogICAgICAmcXVvdDt0aXRsZSZxdW90OzogJnF1b3Q7QSBwb2xsIHRpdGxlJnF1b3Q7LAogICAgICAmcXVvdDtvcHRpb25zJnF1b3Q7OiBbJnF1b3Q7Rmlyc3Qgb3B0aW9uJnF1b3Q7LCAmcXVvdDtUaGUgc2Vjb25kIG9wdGlvbiZxdW90O10KICAgIH0KICBdCn0K"}})],1)]),e._v(" "),a("h3",{attrs:{id:"create-the-poll-list-component"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-the-poll-list-component"}},[e._v("#")]),e._v(" Create the Poll List Component")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Create a new "),a("code",[e._v("PollList.vue")]),e._v(" file for the component in "),a("code",[e._v("vue/src/components/")]),e._v(".")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Jmx0O3RlbXBsYXRlJmd0OwogICZsdDtkaXYmZ3Q7CiAgICAmbHQ7U3BIMyZndDsgTGlzdCBvZiBQb2xscyAmbHQ7L1NwSDMmZ3Q7CiAgICAmbHQ7ZGl2IHYtZm9yPSZxdW90O3BvbGwgaW4gcG9sbHMmcXVvdDsgdi1iaW5kOmtleT0mcXVvdDsncG9sbCcgKyBwb2xsLmlkJnF1b3Q7Jmd0OwogICAgICAmbHQ7U3BIMyZndDsge3twb2xsLmlkfX0uIHt7IHBvbGwudGl0bGUgfX0gJmx0Oy9TcEgzJmd0OwogICAgICAmbHQ7YXBwLXJhZGlvLWl0ZW0KICAgICAgICBAY2xpY2s9JnF1b3Q7c3VibWl0KHBvbGwuaWQsIG9wdGlvbikmcXVvdDsKICAgICAgICB2LWZvcj0mcXVvdDtvcHRpb24gaW4gcG9sbC5vcHRpb25zJnF1b3Q7CiAgICAgICAgdi1iaW5kOmtleT0mcXVvdDtvcHRpb24mcXVvdDsKICAgICAgICA6dmFsdWU9JnF1b3Q7b3B0aW9uJnF1b3Q7CiAgICAgIC8mZ3Q7CiAgICAgICZsdDthcHAtdGV4dCB0eXBlPSZxdW90O3N1YnRpdGxlJnF1b3Q7Jmd0O1Jlc3VsdHM6IHt7IHJlc3VsdHMocG9sbC5pZCkgfX0mbHQ7L2FwcC10ZXh0Jmd0OwogICAgJmx0Oy9kaXYmZ3Q7CiAgJmx0Oy9kaXYmZ3Q7CiZsdDsvdGVtcGxhdGUmZ3Q7CiZsdDtzdHlsZSZndDsKLm9wdGlvbi1yYWRpbyAmZ3Q7IC5idXR0b24gewogIGhlaWdodDogNDBweDsKICB3aWR0aDogNTAlOwp9CiZsdDsvc3R5bGUmZ3Q7Cg=="}})],1),e._v(" "),a("li",[a("p",[e._v("Add the "),a("code",[e._v("<script>")]),e._v(" tag and the JavaScript code to import the UI components:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Jmx0O3NjcmlwdCZndDsKaW1wb3J0IEFwcFJhZGlvSXRlbSBmcm9tICZxdW90Oy4vQXBwUmFkaW9JdGVtJnF1b3Q7OwppbXBvcnQgQXBwVGV4dCBmcm9tICZxdW90Oy4vQXBwVGV4dCZxdW90OzsKaW1wb3J0IHsgY291bnRCeSB9IGZyb20gJnF1b3Q7bG9kYXNoJnF1b3Q7OwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgQXBwVGV4dCwgQXBwUmFkaW9JdGVtIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkOiAmcXVvdDsmcXVvdDssCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKCiAgICBjdXJyZW50QWNjb3VudCgpIHsKICAgICAgaWYgKHRoaXMuX2RlcHNMb2FkZWQpIHsKICAgICAgICBpZiAodGhpcy5sb2dnZWRJbikgewogICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NvbW1vbi93YWxsZXQvYWRkcmVzcyddCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBudWxsCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsCiAgICAgIH0KICAgIH0sCiAgICBsb2dnZWRJbigpIHsKICAgICAgaWYgKHRoaXMuX2RlcHNMb2FkZWQpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY29tbW9uL3dhbGxldC9sb2dnZWRJbiddCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgIH0sCiAgICBwb2xscygpIHsKICAgICAgcmV0dXJuICgKICAgICAgICB0aGlzLiRzdG9yZS5nZXR0ZXJzWyZxdW90O3VzZXJuYW1lLnZvdGVyLnZvdGVyL2dldFBvbGxBbGwmcXVvdDtdKHsKICAgICAgICAgIHBhcmFtczoge30KICAgICAgICB9KT8uUG9sbCA/PyBbXQogICAgICApOwogICAgfSwKICAgIHZvdGVzKCkgewogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMuJHN0b3JlLmdldHRlcnNbJnF1b3Q7dXNlcm5hbWUudm90ZXIudm90ZXIvZ2V0Vm90ZUFsbCZxdW90O10oewogICAgICAgICAgcGFyYW1zOiB7fQogICAgICAgIH0pPy5Wb3RlID8/IFtdCiAgICAgICk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgcmVzdWx0cyhpZCkgewogICAgICBjb25zdCByZXN1bHRzID0gdGhpcy52b3Rlcy5maWx0ZXIoKHYpID0mZ3Q7IHYucG9sbElEID09PSBpZCk7CiAgICAgIHJldHVybiBjb3VudEJ5KHJlc3VsdHMsICZxdW90O29wdGlvbiZxdW90Oyk7CiAgICB9LAogICAgYXN5bmMgc3VibWl0KHBvbGxJRCwgb3B0aW9uKSB7CiAgICAgIAogICAgICBjb25zdCB2YWx1ZSA9IHsgY3JlYXRvcjogdGhpcy5jdXJyZW50QWNjb3VudCwgcG9sbElELCBvcHRpb24gfTsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJnF1b3Q7dXNlcm5hbWUudm90ZXIudm90ZXIvc2VuZE1zZ0NyZWF0ZVZvdGUmcXVvdDssIHsKICAgICAgICB2YWx1ZSwKICAgICAgICBmZWU6IFtdLAogICAgICB9KTsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJnF1b3Q7dXNlcm5hbWUudm90ZXIudm90ZXIvUXVlcnlQb2xsQWxsJnF1b3Q7LCB7CiAgICAgICAgb3B0aW9uczogeyBzdWJzY3JpYmU6IHRydWUsIGFsbDogdHJ1ZSB9LAogICAgICAgIHBhcmFtczoge30sCiAgICAgIH0pOwogICAgfSwKICB9LAp9OwombHQ7L3NjcmlwdCZndDsK"}})],1)]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("PollList")]),e._v(" component you just created lists every poll, including the options for that poll as buttons. Selecting an option triggers a "),a("code",[e._v("submit")]),e._v(" method that broadcasts a transaction with a create vote message and fetches data back from your application.")]),e._v(" "),a("p",[e._v("Two components are still missing from your app to make look more like a voting poll. Now you can add the "),a("code",[e._v("AppRadioItem.vue")]),e._v(" and "),a("code",[e._v("AppText.vue")]),e._v(" UI options.")]),e._v(" "),a("h3",{attrs:{id:"add-the-options-component"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-the-options-component"}},[e._v("#")]),e._v(" Add the Options Component")]),e._v(" "),a("p",[e._v("In "),a("code",[e._v("vue/src/components/AppRadioItem.vue")]),e._v(", add:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Jmx0O3RlbXBsYXRlJmd0OwogICZsdDtkaXYmZ3Q7CiAgICAmbHQ7YnV0dG9uIGNsYXNzPSZxdW90O2J1dHRvbiZxdW90OyZndDt7eyB2YWx1ZSB9fSZsdDsvYnV0dG9uJmd0OwogICZsdDsvZGl2Jmd0OwombHQ7L3RlbXBsYXRlJmd0OwoKJmx0O3N0eWxlIHNjb3BlZCZndDsKLmJ1dHRvbiB7CiAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgMXB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICBwYWRkaW5nOiAwLjc1cmVtIDFyZW07CiAgbWFyZ2luLWJvdHRvbTogMC41cmVtOwogIGJvcmRlci1yYWRpdXM6IDZweDsKICB1c2VyLXNlbGVjdDogbm9uZTsKICBjdXJzb3I6IHBvaW50ZXI7CiAgdHJhbnNpdGlvbjogYWxsIDAuMXM7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBvdXRsaW5lOiBub25lOwogIGJvcmRlcjogbm9uZTsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDEpOwogIHdpZHRoOiAxMDAlOwogIGZvbnQtZmFtaWx5OiBpbmhlcml0OwogIHRleHQtYWxpZ246IGxlZnQ7CiAgZm9udC1zaXplOiAxcmVtOwogIGZvbnQtd2VpZ2h0OiBpbmhlcml0Owp9Ci5idXR0b246aG92ZXIgewogIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDFweCByZ2JhKDAsIDAsIDAsIDAuMSksCiAgICAwIDFweCA1cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMSk7Cn0KLmJ1dHRvbjpmb2N1cyB7CiAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgMXB4IHJnYmEoMCwgMCwgMCwgMC4yKSwKICAgIDAgMXB4IDVweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKfQouYnV0dG9uOmFjdGl2ZSB7CiAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgMXB4IHJnYmEoMCwgMCwgMCwgMC4wNyk7CiAgY29sb3I6IHJnYmEoMCwgMCwgMCwgMC43KTsKICB0cmFuc2Zvcm06IHNjYWxlKDAuOTk4KTsKfQombHQ7L3N0eWxlJmd0Owo="}}),e._v(" "),a("p",[e._v("In a "),a("code",[e._v("<script>")]),e._v(" tag, add the JavaScript code:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Jmx0O3NjcmlwdCZndDsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB2YWx1ZTogJnF1b3Q7JnF1b3Q7LAogIH0sCn07CiZsdDsvc2NyaXB0Jmd0Owo="}}),e._v(" "),a("h3",{attrs:{id:"add-the-poll-list-text-component"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-the-poll-list-text-component"}},[e._v("#")]),e._v(" Add the Poll List Text Component")]),e._v(" "),a("p",[e._v("Now you can add the text for the poll list in "),a("code",[e._v("vue/src/components/AppText.vue")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Jmx0O3RlbXBsYXRlJmd0OwogICZsdDtkaXYmZ3Q7CiAgICAmbHQ7ZGl2IDpjbGFzcz0mcXVvdDtbYCR7dHlwZX1gXSZxdW90OyZndDsKICAgICAgJmx0O3Nsb3QgLyZndDsKICAgICZsdDsvZGl2Jmd0OwogICZsdDsvZGl2Jmd0OwombHQ7L3RlbXBsYXRlJmd0OwoKJmx0O3N0eWxlIHNjb3BlZCZndDsKLmgxIHsKICBmb250LXNpemU6IDJyZW07CiAgZm9udC13ZWlnaHQ6IDgwMDsKICBsZXR0ZXItc3BhY2luZzogMC4wM2VtOwogIG1hcmdpbi1ib3R0b206IDJyZW07Cn0KLmgyIHsKICBmb250LXdlaWdodDogODAwOwogIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgbGV0dGVyLXNwYWNpbmc6IDAuMDVlbTsKICBtYXJnaW4tYm90dG9tOiAwLjVyZW07CiAgbWFyZ2luLXRvcDogMnJlbTsKfQouc3VidGl0bGUgewogIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuNSk7CiAgZm9udC1zaXplOiAwLjg1cmVtOwp9CiZsdDsvc3R5bGUmZ3Q7Cg=="}}),e._v(" "),a("p",[e._v("In a "),a("code",[e._v("<script>")]),e._v(" tag, add:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Jmx0O3NjcmlwdCZndDsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB0eXBlOiB7CiAgICAgIGRlZmF1bHQ6ICZxdW90O3AxJnF1b3Q7LAogICAgfSwKICB9LAp9OwombHQ7L3NjcmlwdCZndDsK"}}),e._v(" "),a("h3",{attrs:{id:"update-the-front-end-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#update-the-front-end-app"}},[e._v("#")]),e._v(" Update the Front-end App")]),e._v(" "),a("p",[e._v("Now, update the JavaScript in "),a("code",[e._v("vue/src/App.vue")]),e._v(" to fetch the votes.")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("App.vue")]),e._v(" file handles the transactions of the components. Modify the code in the "),a("code",[e._v("<script>")]),e._v(" tag to look like:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"javascript",base64:"Jmx0O3NjcmlwdCZndDsKaW1wb3J0ICcuL3Njc3MvYXBwLnNjc3MnCmltcG9ydCAnQHN0YXJwb3J0L3Z1ZS9saWIvc3RhcnBvcnQtdnVlLmNzcycKaW1wb3J0IFNpZGViYXIgZnJvbSAnLi9jb21wb25lbnRzL1NpZGViYXInCgpleHBvcnQgZGVmYXVsdCB7CiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgU2lkZWJhcgogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW5pdGlhbGl6ZWQ6IGZhbHNlCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgaGFzV2FsbGV0KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuaGFzTW9kdWxlKFsgJ2NvbW1vbicsICd3YWxsZXQnXSkKICAgICAgICB9CiAgICB9LAogICAgYXN5bmMgY3JlYXRlZCgpIHsKICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY29tbW9uL2Vudi9pbml0JykKICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZQogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCZxdW90O3VzZXJuYW1lLnZvdGVyLnZvdGVyL1F1ZXJ5UG9sbEFsbCZxdW90Oyx7b3B0aW9uczp7c3Vic2NyaWJlOnRydWUsIGFsbDp0cnVlfSxwYXJhbXM6e319KQogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCZxdW90O3VzZXJuYW1lLnZvdGVyLnZvdGVyL1F1ZXJ5Vm90ZUFsbCZxdW90Oyx7b3B0aW9uczp7c3Vic2NyaWJlOnRydWUsIGFsbDp0cnVlfSxwYXJhbXM6e319KQogICAgfSwKICAgIGVycm9yQ2FwdHVyZWQoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgIHJldHVybiBmYWxzZQogICAgfQp9CiZsdDsvc2NyaXB0Jmd0Owo="}}),e._v(" "),a("p",[e._v("By now you should be able to see the same front-end app UI that you saw in the first screenshot. Try creating polls and casting votes. You might notice that it's possible to cast multiple votes for one poll. This activity is not what you want, so you can fix that behavior.")]),e._v(" "),a("h2",{attrs:{id:"access-the-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#access-the-api"}},[e._v("#")]),e._v(" Access the API")]),e._v(" "),a("p",[e._v("To fix this issue, you first have to understand how data is stored in your application.")]),e._v(" "),a("p",[e._v("Think of the data storage as a lexicographically ordered key-value store. You can loop through the entries, filter by key prefix, add, update, and delete entries. It is easier to visualize the store as JSON.")]),e._v(" "),a("p",[e._v("When you create a poll and cast a vote, this is the resulting JSON:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"ewogICZxdW90O1BvbGwmcXVvdDs6IFsKICAgIHsKICAgICAgJnF1b3Q7Y3JlYXRvciZxdW90OzogJnF1b3Q7Y29zbW9zMXZlZGQ5N2t1Mm44cXRzY2NyZm5hNWdnMHJlcGRuazBhOWNsN3plJnF1b3Q7LAogICAgICAmcXVvdDtpZCZxdW90OzogJnF1b3Q7MCZxdW90OywKICAgICAgJnF1b3Q7dGl0bGUmcXVvdDs6ICZxdW90O1NvZnQgZHJpbmtzJnF1b3Q7LAogICAgICAmcXVvdDtvcHRpb25zJnF1b3Q7OiBbJnF1b3Q7Q29jYS1Db2xhJnF1b3Q7LCAmcXVvdDtQZXBzaSZxdW90O10KICAgIH0KICBdLAogICZxdW90O3BhZ2luYXRpb24mcXVvdDs6IHsKICAgICZxdW90O25leHRfa2V5JnF1b3Q7OiBudWxsLAogICAgJnF1b3Q7dG90YWwmcXVvdDs6ICZxdW90OzEmcXVvdDsKICB9Cn0K"}}),e._v(" "),a("p",[e._v("See the API and JSON output of your created poll endpoint at "),a("a",{attrs:{href:"http://localhost:1317/username/voter/voter/poll",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:1317/username/voter/voter/poll"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("To see the votes, go to the API endpoint at "),a("a",{attrs:{href:"http://localhost:1317/username/voter/voter/vote",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:1317/username/voter/voter/vote"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"json",base64:"CnsKICAmcXVvdDtWb3RlJnF1b3Q7OiBbCiAgICB7CiAgICAgICZxdW90O2NyZWF0b3ImcXVvdDs6ICZxdW90O2Nvc21vczF2ZWRkOTdrdTJuOHF0c2NjcmZuYTVnZzByZXBkbmswYTljbDd6ZSZxdW90OywKICAgICAgJnF1b3Q7aWQmcXVvdDs6ICZxdW90OzAmcXVvdDssCiAgICAgICZxdW90O3BvbGxJRCZxdW90OzogJnF1b3Q7MCZxdW90OywKICAgICAgJnF1b3Q7b3B0aW9uJnF1b3Q7OiAmcXVvdDtQZXBzaSZxdW90OwogICAgfQogIF0sCiAgJnF1b3Q7cGFnaW5hdGlvbiZxdW90OzogewogICAgJnF1b3Q7bmV4dF9rZXkmcXVvdDs6IG51bGwsCiAgICAmcXVvdDt0b3RhbCZxdW90OzogJnF1b3Q7MiZxdW90OwogIH0KfQo="}}),e._v(" "),a("p",[e._v("The endpoint paths are defined by the username that you used when bootstrapping the application with Starport, together with the module name. So, if your GitHub user name is "),a("code",[e._v("yoda")]),e._v(", then you can find:")]),e._v(" "),a("ul",[a("li",[e._v("The poll endpoint at <"),a("a",{attrs:{href:"http://localhost:1317/yoda/voter/voter/poll",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:1317/yoda/voter/voter/poll"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("The API endpoint at "),a("code",[e._v("http://localhost:1317/yoda/voter/voter/vote")])])]),e._v(" "),a("p",[e._v("Looking into this data, you can see that the combination of "),a("code",[e._v("creator")]),e._v(" and "),a("code",[e._v("pollID")]),e._v(" is what you are looking for.")]),e._v(" "),a("h2",{attrs:{id:"limit-to-one-vote-per-user"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#limit-to-one-vote-per-user"}},[e._v("#")]),e._v(" Limit to One Vote per User")]),e._v(" "),a("p",[e._v("Each account should be allowed to have only 1 vote per pollID.")]),e._v(" "),a("p",[e._v("The logic for access to a certain transaction is in the "),a("code",[e._v("keeper")]),e._v(" directory. For the votes transaction logic, open the "),a("code",[e._v("msg_server_vote.go")]),e._v(" file at "),a("code",[e._v("x/voter/keeper/msg_server_vote.go")]),e._v(", and modify the "),a("code",[e._v("CreateVote")]),e._v(" function to check if the account has already voted and to return an error when a subsequent vote is cast.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"ZnVuYyAoayBtc2dTZXJ2ZXIpIENyZWF0ZVZvdGUoZ29DdHggY29udGV4dC5Db250ZXh0LCBtc2cgKnR5cGVzLk1zZ0NyZWF0ZVZvdGUpICgqdHlwZXMuTXNnQ3JlYXRlVm90ZVJlc3BvbnNlLCBlcnJvcikgewogICAgY3R4IDo9IHNkay5VbndyYXBTREtDb250ZXh0KGdvQ3R4KQoKICAgICAgLy8gR2V0IGFsbCBleGlzdGluZyB2b3RlcwogICAgdm90ZUxpc3QgOj0gay5HZXRBbGxWb3RlKGN0eCkKICAgIGZvciBfLCBleGlzdGluZ1ZvdGUgOj0gcmFuZ2Ugdm90ZUxpc3QgewogICAgICAgIC8vIENoZWNrIGlmIHRoZSBhY2NvdW50IGhhcyBhbHJlYWR5IHZvdGVkIG9uIHRoaXMgUG9sbElECiAgICAgICAgaWYgZXhpc3RpbmdWb3RlLkNyZWF0b3IgPT0gbXNnLkNyZWF0b3IgJmFtcDsmYW1wOyBleGlzdGluZ1ZvdGUuUG9sbElEID09IG1zZy5Qb2xsSUQgewogICAgICAgICAgICAgIC8vIFJldHVybiBhbiBlcnJvciB3aGVuIGEgdm90ZSBoYXMgYmVlbiBjYXN0IGJ5IHRoaXMgYWNjb3VudCBvbiB0aGlzIFBvbGxJRAogICAgICAgICAgICByZXR1cm4gbmlsLCBzZGtlcnJvcnMuV3JhcChzZGtlcnJvcnMuRXJyVW5hdXRob3JpemVkLCAmcXVvdDtWb3RlIGFscmVhZHkgY2FzdGVkLiZxdW90OykKICAgICAgICB9CiAgICB9CgogICAgaWQgOj0gay5BcHBlbmRWb3RlKAogICAgICAgIGN0eCwKICAgICAgICBtc2cuQ3JlYXRvciwKICAgICAgICBtc2cuUG9sbElELAogICAgICAgIG1zZy5PcHRpb24sCiAgICApCgogICAgcmV0dXJuICZhbXA7dHlwZXMuTXNnQ3JlYXRlVm90ZVJlc3BvbnNlewogICAgICAgIElkOiBpZCwKICAgIH0sIG5pbAp9Cg=="}}),e._v(" "),a("p",[e._v("After you restart the app, a front-end app user can cast only 1 vote per poll.")]),e._v(" "),a("h2",{attrs:{id:"introducing-a-fee-for-creating-polls"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introducing-a-fee-for-creating-polls"}},[e._v("#")]),e._v(" Introducing a Fee for Creating Polls")]),e._v(" "),a("p",[e._v("Add the logic for the transaction so that creating a poll costs 200 tokens.")]),e._v(" "),a("p",[e._v("You already require users to have accounts registered. Each app end user has tokens on balance. The only thing you need to do is to send coins from the app end user's account to a module account before you create a poll.")]),e._v(" "),a("h2",{attrs:{id:"add-the-bank-keeper-to-the-voter-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-the-bank-keeper-to-the-voter-module"}},[e._v("#")]),e._v(" Add the Bank Keeper to the Voter Module")]),e._v(" "),a("p",[e._v("First, load the "),a("code",[e._v("expected_keepers")]),e._v(" in the "),a("code",[e._v("x/voter/types/expected_keepers.go")]),e._v(" file to define all of the bank functions you want to make available in your module.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSB0eXBlcwoKaW1wb3J0IHNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CgovLyBCYW5rS2VlcGVyIGRlZmluZXMgdGhlIGV4cGVjdGVkIGJhbmsga2VlcGVyCnR5cGUgQmFua0tlZXBlciBpbnRlcmZhY2UgewogICAgU2VuZENvaW5zKGN0eCBzZGsuQ29udGV4dCwgZnJvbUFkZHIgc2RrLkFjY0FkZHJlc3MsIHRvQWRkciBzZGsuQWNjQWRkcmVzcywgYW10IHNkay5Db2lucykgZXJyb3IKICAgIE1pbnRDb2lucyhjdHggc2RrLkNvbnRleHQsIG1vZHVsZU5hbWUgc3RyaW5nLCBhbXQgc2RrLkNvaW5zKSBlcnJvcgogICAgQnVybkNvaW5zKGN0eCBzZGsuQ29udGV4dCwgbW9kdWxlTmFtZSBzdHJpbmcsIGFtdCBzZGsuQ29pbnMpIGVycm9yCiAgICBTZW5kQ29pbnNGcm9tTW9kdWxlVG9BY2NvdW50KGN0eCBzZGsuQ29udGV4dCwgc2VuZGVyTW9kdWxlIHN0cmluZywgcmVjaXBpZW50QWRkciBzZGsuQWNjQWRkcmVzcywgYW10IHNkay5Db2lucykgZXJyb3IKICAgIFNlbmRDb2luc0Zyb21BY2NvdW50VG9Nb2R1bGUoY3R4IHNkay5Db250ZXh0LCBzZW5kZXJBZGRyIHNkay5BY2NBZGRyZXNzLCByZWNpcGllbnRNb2R1bGUgc3RyaW5nLCBhbXQgc2RrLkNvaW5zKSBlcnJvcgp9Cg=="}}),e._v(" "),a("p",[e._v("Second, add the "),a("code",[e._v("bankKeeper")]),e._v(" keeper to the "),a("code",[e._v("x/voter/keeper/keeper.go")]),e._v(" file. Add it to the "),a("code",[e._v("type")]),e._v(" and the "),a("code",[e._v("NewKeeper")]),e._v(" function as follows:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSAoCiAgICBLZWVwZXIgc3RydWN0IHsKICAgICAgICBjZGMgICAgICAgIGNvZGVjLk1hcnNoYWxlcgogICAgICAgIHN0b3JlS2V5ICAgc2RrLlN0b3JlS2V5CiAgICAgICAgbWVtS2V5ICAgICBzZGsuU3RvcmVLZXkKICAgICAgICBiYW5rS2VlcGVyIHR5cGVzLkJhbmtLZWVwZXIKICAgIH0KKQoKZnVuYyBOZXdLZWVwZXIoY2RjIGNvZGVjLk1hcnNoYWxlciwgc3RvcmVLZXksIG1lbUtleSBzZGsuU3RvcmVLZXksIGJhbmtLZWVwZXIgdHlwZXMuQmFua0tlZXBlcikgKktlZXBlciB7CiAgICByZXR1cm4gJmFtcDtLZWVwZXJ7CiAgICAgICAgY2RjOiAgICAgICAgY2RjLAogICAgICAgIHN0b3JlS2V5OiAgIHN0b3JlS2V5LAogICAgICAgIG1lbUtleTogICAgIG1lbUtleSwKICAgICAgICBiYW5rS2VlcGVyOiBiYW5rS2VlcGVyLAogICAgfQp9Cg=="}}),e._v(" "),a("p",[e._v("Finally, add the bank module in the New function to the "),a("code",[e._v("voterKeeper")]),e._v(" in the "),a("code",[e._v("app.go")]),e._v(" file in "),a("code",[e._v("app/app.go")]),e._v(".")]),e._v(" "),a("p",[e._v("In the keeper loading section, replace:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"code",base64:"YXBwLnZvdGVyS2VlcGVyID0gKnZvdGVya2VlcGVyLk5ld0tlZXBlcigKICBhcHBDb2RlYywga2V5c1t2b3RlcnR5cGVzLlN0b3JlS2V5XSwga2V5c1t2b3RlcnR5cGVzLk1lbVN0b3JlS2V5XSwKKQo="}}),e._v(" "),a("p",[e._v("with")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"code",base64:"YXBwLnZvdGVyS2VlcGVyID0gKnZvdGVya2VlcGVyLk5ld0tlZXBlcigKICBhcHBDb2RlYywga2V5c1t2b3RlcnR5cGVzLlN0b3JlS2V5XSwga2V5c1t2b3RlcnR5cGVzLk1lbVN0b3JlS2V5XSwgYXBwLkJhbmtLZWVwZXIsCikK"}}),e._v(" "),a("p",[e._v("Now, you are ready to use all of the bank functions that you added to the expected keepers file. The next step is to define the transaction to require the funds to execute the create poll transaction.")]),e._v(" "),a("h2",{attrs:{id:"modify-the-create-poll-message-with-the-price"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#modify-the-create-poll-message-with-the-price"}},[e._v("#")]),e._v(" Modify the Create Poll Message with the Price")]),e._v(" "),a("p",[e._v("Modify the msg at "),a("code",[e._v("x/voter/keeper/msg_server_poll.go")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCiAgICAmcXVvdDtjb250ZXh0JnF1b3Q7CiAgICAmcXVvdDtmbXQmcXVvdDsKCiAgICBzZGsgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcyZxdW90OwogICAgc2RrZXJyb3JzICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvdHlwZXMvZXJyb3JzJnF1b3Q7CiAgICAmcXVvdDtnaXRodWIuY29tL3RlbmRlcm1pbnQvdGVuZGVybWludC9jcnlwdG8mcXVvdDsKICAgICZxdW90O2dpdGh1Yi5jb20vdXNlcm5hbWUvdm90ZXIveC92b3Rlci90eXBlcyZxdW90OwopCgpmdW5jIChrIG1zZ1NlcnZlcikgQ3JlYXRlUG9sbChnb0N0eCBjb250ZXh0LkNvbnRleHQsIG1zZyAqdHlwZXMuTXNnQ3JlYXRlUG9sbCkgKCp0eXBlcy5Nc2dDcmVhdGVQb2xsUmVzcG9uc2UsIGVycm9yKSB7CiAgICBjdHggOj0gc2RrLlVud3JhcFNES0NvbnRleHQoZ29DdHgpCgogICAgbW9kdWxlQWNjdCA6PSBzZGsuQWNjQWRkcmVzcyhjcnlwdG8uQWRkcmVzc0hhc2goW11ieXRlKHR5cGVzLk1vZHVsZU5hbWUpKSkKICAgIGZlZUNvaW5zLCBlcnIgOj0gc2RrLlBhcnNlQ29pbnNOb3JtYWxpemVkKCZxdW90OzIwMHRva2VuJnF1b3Q7KQogICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICAgcmV0dXJuIG5pbCwgZXJyCiAgICB9CiAgICBjcmVhdG9yQWRkcmVzcywgZXJyIDo9IHNkay5BY2NBZGRyZXNzRnJvbUJlY2gzMihtc2cuQ3JlYXRvcikKICAgIGlmIGVyciAhPSBuaWwgewogICAgICAgIHJldHVybiBuaWwsIGVycgogICAgfQogICAgaWYgZXJyIDo9IGsuYmFua0tlZXBlci5TZW5kQ29pbnMoY3R4LCBjcmVhdG9yQWRkcmVzcywgbW9kdWxlQWNjdCwgZmVlQ29pbnMpOyBlcnIgIT0gbmlsIHsKICAgICAgICByZXR1cm4gbmlsLCBlcnIKICAgIH0KCiAgICBpZCA6PSBrLkFwcGVuZFBvbGwoCiAgICAgICAgY3R4LAogICAgICAgIG1zZy5DcmVhdG9yLAogICAgICAgIG1zZy5UaXRsZSwKICAgICAgICBtc2cuT3B0aW9ucywKICAgICkKCiAgICByZXR1cm4gJmFtcDt0eXBlcy5Nc2dDcmVhdGVQb2xsUmVzcG9uc2V7CiAgICAgICAgSWQ6IGlkLAogICAgfSwgbmlsCn0K"}}),e._v(" "),a("p",[e._v("The fee payment occurs before "),a("code",[e._v("k.AppendPoll")]),e._v(" so if an end user does not have enough tokens, the application raises an error and does not proceed with creating a poll.")]),e._v(" "),a("p",[e._v("The import statement requires "),a("code",[e._v('"github.com/tendermint/tendermint/crypto"')]),e._v(". Be sure to add this repo to the import statement if your text editor didn't do that for you.")]),e._v(" "),a("p",[e._v("Now, restart the app and try creating several polls to see how the transaction affects your token balance.")]),e._v(" "),a("p",[e._v("Congratulations, you have built a blockchain voting application.")])],1)}),[],!1,null,null,null);t.default=s.exports}}]);