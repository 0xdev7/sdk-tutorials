(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{787:function(t,e,o){"use strict";o.r(e);var a=o(1),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"migrating-from-v0-39-to-v0-40-and-later-using-starport"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#migrating-from-v0-39-to-v0-40-and-later-using-starport"}},[t._v("#")]),t._v(" Migrating from v0.39 to v0.40 and later using Starport")]),t._v(" "),o("p",[t._v("This tutorial is a guide to migrate your Cosmos SDK application from v0.39 and earlier (Launchpad) to v0.40 and later (Stargate). The Cosmos SDK v0.40 release comes with many features and enhancements, such as IBC, efficiency gains, protobuf support, and more.")]),t._v(" "),o("h2",{attrs:{id:"requirements"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[t._v("#")]),t._v(" Requirements")]),t._v(" "),o("p",[t._v("We will be using Starport to assist us with the migration.")]),t._v(" "),o("p",[t._v("Install it by entering:")]),t._v(" "),o("div",{staticClass:"language-bash extra-class"},[o("pre",{pre:!0,attrs:{class:"language-bash"}},[o("code",[o("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" https://get.starport.network/starport@v0.13.1"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n")])])]),o("p",[t._v("This tutorial migrates the Proof of File existence (PoFE) tutorial from v0.39 and earlier to v0.40 and later (Stargate). The tutorial examples show a migration from Cosmos SDK version "),o("code",[t._v("v0.39.1")]),t._v(" to "),o("code",[t._v("v0.40.0")]),t._v(".")]),t._v(" "),o("p",[t._v("To get the code for the Proof of File Existence (PoFE) application, clone the "),o("a",{attrs:{href:"https://github.com/cosmos/sdk-tutorials/tree/master/proof-of-file-existence/pofe",target:"_blank",rel:"noopener noreferrer"}},[t._v("pofe repo"),o("OutboundLink")],1),t._v(".")]),t._v(" "),o("h2",{attrs:{id:"resources"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#resources"}},[t._v("#")]),t._v(" Resources")]),t._v(" "),o("p",[t._v("This tutorial regularly references the "),o("a",{attrs:{href:"https://docs.cosmos.network/master/migrations/app_and_modules.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("App and Modules Migration"),o("OutboundLink")],1),t._v(" documentation that contains crucial information about how to migrate a module and application from v0.39 to v0.40 and later (Stargate).")]),t._v(" "),o("p",[t._v("The modular and composable design of Cosmos SDK applications simplifies the migration process by copying modules from v0.39 to a boilerplate Stargate v0.40 and later application and then updating the commands. This tutorial uses Starport to scaffold new files that are used as a baseline for migrating your application logic.")]),t._v(" "),o("h2",{attrs:{id:"boilerplate-application"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#boilerplate-application"}},[t._v("#")]),t._v(" Boilerplate application")]),t._v(" "),o("p",[t._v("In this tutorial, you move the logic from the "),o("code",[t._v("launchpad")]),t._v(" application to the "),o("code",[t._v("stargate")]),t._v(" application to make your blockchain Stargate-ready.")]),t._v(" "),o("ol",[o("li",[t._v("Put the v0.39 PoFE application in a "),o("code",[t._v("launchpad")]),t._v(" directory.")]),t._v(" "),o("li",[t._v("Create an adjacent "),o("code",[t._v("stargate")]),t._v(" directory.")])]),t._v(" "),o("p",[t._v("The directory structure should look like this:")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[o("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n├── launchpad "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# launchpad application directory")]),t._v("\n│   └── pofe \n│       ├── app\n│       │   "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n└── stargate "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# stargate application directory")]),t._v("\n\n")])])]),o("p",[t._v("Once you have your application ready, we will be using Starport to assist us with the migration to Stargate.")]),t._v(" "),o("p",[t._v("Start off by scaffolding your application using the following command.")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[t._v("starport app github.com/user/pofe\n")])])]),o("p",[t._v("Once this is done, you should have a folder called "),o("code",[t._v("pofe")]),t._v(" with your boilerplate Stargate application.")]),t._v(" "),o("h2",{attrs:{id:"directory-structure"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#directory-structure"}},[t._v("#")]),t._v(" Directory Structure")]),t._v(" "),o("p",[t._v("By taking a look at the directory structure, you can determine that there have been a few changes in the overall directory structure.")]),t._v(" "),o("div",{staticClass:"language-sh extra-class"},[o("pre",{pre:!0,attrs:{class:"language-sh"}},[o("code",[t._v("pofe\n├── app\n│   ├── app.go\n│   ├── +++ encoding.go\n│   ├── export.go\n│   ├── +++ genesis.go\n│   ├── +++ params\n│   │   ├── +++ encoding.go\n│   │   └── +++ proto.go\n│   ├── prefix.go\n│   └── +++ types.go\n├── cmd\n│   ├── "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pofecli")]),t._v("\n│   │   └── "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# main.go")]),t._v("\n│   └── pofed\n│       ├── cmd\n│       │   ├── app.go\n│       │   ├── genaccounts.go\n│       │   └── root.go\n│       └── main.go\n├── config.yml\n├── go.mod\n├── go.sum\n├── +++ internal\n│   └── tools\n│       └── tools.go\n├── +++ proto\n│   ├── cosmos\n│   │   └── base\n│   │       └── query\n│   │           └── v1beta1\n│   │               └── pagination.proto\n│   └── pofe\n│       ├── genesis.proto\n│       └── query.proto\n├── readme.md\n├── +++ scripts\n│   └── protocgen\n├── +++ third_party\n│   └── proto\n│       ├── confio\n│       │   └── proofs.proto\n│       ├── cosmos_proto\n│       │   └── cosmos.proto\n│       ├── gogoproto\n│       │   └── gogo.proto\n│       ├── google\n│       │   ├── api\n│       │   │   ├── annotations.proto\n│       │   │   ├── http.proto\n│       │   │   └── httpbody.proto\n│       │   └── protobuf\n│       │       ├── any.proto\n│       │       └── descriptor.proto\n│       └── tendermint\n│           ├── abci\n│           │   └── types.proto\n│           ├── crypto\n│           │   ├── keys.proto\n│           │   └── proof.proto\n│           ├── libs\n│           │   └── bits\n│           │       └── types.proto\n│           ├── types\n│           │   ├── evidence.proto\n│           │   ├── params.proto\n│           │   ├── types.proto\n│           │   └── validator.proto\n│           └── version\n│               └── types.proto\n└── x\n    └── pofe\n        ├── "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# abci.go")]),t._v("\n        ├── client\n        │   ├── cli\n        │   │   ├── query.go\n        │   │   └── tx.go\n        │   └── rest\n        │       └── rest.go\n        ├── genesis.go\n        ├── handler.go\n        ├── keeper\n        │   ├── +++ grpc_query.go\n        │   ├── "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# params.go        ")]),t._v("\n        │   ├── keeper.go\n        │   └── query.go\n        ├── module.go\n        └── types\n            ├── codec.go\n            ├── errors.go\n            ├── "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# events.go")]),t._v("\n            ├── "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# expected_keepers.go")]),t._v("\n            ├── genesis.go\n            ├── +++ genesis.pb.go\n            ├── "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# key.go")]),t._v("\n            ├── keys.go\n            ├── "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# params.go")]),t._v("\n            ├── "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# querier.go")]),t._v("\n            ├── +++ query.go\n            ├── +++ query.pb.go\n            └── types.go\n")])])]),o("p",[t._v("The first key change in the application is that "),o("code",[t._v("pofecli")]),t._v(" no longer exists, and all of its functionality has been consolidated into "),o("code",[t._v("pofed")]),t._v(". You will still be able to access commands from "),o("code",[t._v("pofecli")]),t._v(" in "),o("code",[t._v("pofed")]),t._v(".")]),t._v(" "),o("p",[t._v("The second notable change in the app structure is the integration of protobufs. Protobufs are a compiled form of messaging and therefore more performant than their JSONRPC counterparts.")]),t._v(" "),o("p",[t._v("The directory includes "),o("code",[t._v("pofe/internal")]),t._v(", "),o("code",[t._v("pofe/scripts")]),t._v(", "),o("code",[t._v("pofe/third_party")]),t._v(", and "),o("code",[t._v("pofe/proto")]),t._v(" folders and the regex "),o("code",[t._v("*.pb.go")]),t._v(" and "),o("code",[t._v("*.pb.gw.go")]),t._v(" files.")]),t._v(" "),o("p",[t._v("Now you have a better understanding of the differences in your application and are prepared to migrate your application from v0.39 to v0.40 and later (Stargate).")])])}),[],!1,null,null,null);e.default=n.exports}}]);