(window.webpackJsonp=window.webpackJsonp||[]).push([[112],{743:function(t,a,e){"use strict";e.r(a);var s=e(1),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"a-game-fifo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a-game-fifo"}},[t._v("#")]),t._v(" A Game FIFO")]),t._v(" "),e("HighlightBox",{attrs:{type:"synopsis"}},[e("p",[t._v("Make sure you have all you need before proceeding:")]),t._v(" "),e("ul",[e("li",[t._v("You understand the concepts of "),e("RouterLink",{attrs:{to:"/academy/2-main-concepts/architecture.html"}},[t._v("ABCI")]),t._v(", "),e("RouterLink",{attrs:{to:"/academy/2-main-concepts/protobuf.html"}},[t._v("Protobuf")]),t._v(", and of a "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Doubly_linked_list",target:"_blank",rel:"noopener noreferrer"}},[t._v("doubly-linked list"),e("OutboundLink")],1),t._v(".")],1),t._v(" "),e("li",[t._v("Have Go installed.")]),t._v(" "),e("li",[t._v("The checkers blockchain codebase with "),e("code",[t._v("MsgRejectGame")]),t._v(" and its handling. You can get there by following the "),e("RouterLink",{attrs:{to:"/academy/4-my-own-chain/reject-game.html"}},[t._v("previous steps")]),t._v(" or checking out "),e("a",{attrs:{href:"https://github.com/cosmos/b9-checkers-academy-draft/tree/reject-game-handler",target:"_blank",rel:"noopener noreferrer"}},[t._v("the relevant version"),e("OutboundLink")],1),t._v(".")],1)])]),t._v(" "),e("p",[t._v("In the "),e("RouterLink",{attrs:{to:"/academy/4-my-own-chain/reject-game.html"}},[t._v("previous step")]),t._v(" you added a way for players to reject a game. There are two ways for a game to advance through its lifecycle until its resolution, win or draw: "),e("em",[t._v("play")]),t._v(" and "),e("em",[t._v("reject")]),t._v(".")],1),t._v(" "),e("h2",{attrs:{id:"the-why"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-why"}},[t._v("#")]),t._v(" The why")]),t._v(" "),e("p",[t._v("What if a player never shows up again? Should a game remain in limbo forever?")]),t._v(" "),e("p",[t._v("You eventually want to let players wager on the outcome of games especially if "),e("em",[t._v("value")]),t._v(" is tied up in games. You need to add a way for games to be forcibly resolved if a player stops responding.")]),t._v(" "),e("p",[t._v("The simplest mechanism to expire a game is to use a "),e("strong",[t._v("deadline")]),t._v(". If the deadline is reached, then the game is forcibly terminated and expires. The deadline is pushed further back every time a game is played.")]),t._v(" "),e("p",[t._v("To enforce the termination it is a good idea to use the "),e("strong",[e("code",[t._v("EndBlock")])]),t._v(" part of the ABCI protocol. The call "),e("code",[t._v("EndBlock")]),t._v(" is triggered when all transactions of the block are delivered and gives you a chance to do some tidying up before the block is sealed. In your case, all games that have reached their deadline will be terminated.")]),t._v(" "),e("p",[t._v("How do you find all the games that reached their deadline? Maybe with a pseudo-code like:")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("game")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deadline "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" now"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("This approach is "),e("strong",[t._v("expensive")]),t._v(" in terms of computation. The "),e("code",[t._v("EndBlock")]),t._v(" code should not have to pull up all games out of the storage just to find the dozen that are relevant. Doing a "),e("code",[t._v("findAll")]),t._v(" costs "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Big_O_notation",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("O(n)")]),e("OutboundLink")],1),t._v(", where "),e("code",[t._v("n")]),t._v(" is the total number of games.")]),t._v(" "),e("h2",{attrs:{id:"the-how"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#the-how"}},[t._v("#")]),t._v(" The how")]),t._v(" "),e("p",[t._v("You need another data structure. The simplest one is a First-In-First-Out (FIFO) that is constantly updated so that:")]),t._v(" "),e("ul",[e("li",[t._v("The just played games are taken out of where they are and sent to the tail.")]),t._v(" "),e("li",[t._v("The games that have not been played for the longest time eventually end up at the head.")])]),t._v(" "),e("p",[t._v("You keep dealing with the expired games that are at the head of the FIFO when terminating expired games in "),e("code",[t._v("EndBlock")]),t._v(". Do not stop until the head includes an ongoing game. The cost is:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("O(1)")]),t._v(" on each game creation and gameplay.")]),t._v(" "),e("li",[e("code",[t._v("O(k)")]),t._v(" where "),e("code",[t._v("k")]),t._v(" is the number of expired games on each block.")]),t._v(" "),e("li",[e("code",[t._v("k <= n")])])]),t._v(" "),e("p",[e("code",[t._v("k")]),t._v(" still is an unbounded number of operations. But if you use the same expiration duration on each game, for "),e("code",[t._v("k")]),t._v(" games to expire together in a block, these "),e("code",[t._v("k")]),t._v(" games would all have to have had a move in the same previous block. Give or take the block before or after. The largest "),e("code",[t._v("EndBlock")]),t._v(" computation will be proportional to the largest regular block in the past in the worst case. This is a reasonable risk to take.")]),t._v(" "),e("p",[t._v("Remember this only works if the expiration duration is the same for all games instead of being a parameter left to a potentially malicious game creator.")]),t._v(" "),e("h2",{attrs:{id:"new-information"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#new-information"}},[t._v("#")]),t._v(" New information")]),t._v(" "),e("p",[t._v("How do you implement a FIFO from which you extract elements at random positions? Choose a doubly-linked list for that:")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("You need to remember the game ID at the head, to pick expired games, and at the tail, to send back fresh games. The existing "),e("code",[t._v("NextGame")]),t._v(" object is a good place for this as it is already an object and expandable. Just add a bit to its Protobuf declaration:")]),t._v(" "),e("div",{staticClass:"language-protobuf [https://github.com/cosmos/b9-checkers-academy-draft/blob/2343af69cd1f2c22acfac13f46393aa8ce686685/proto/checkers/next_game.proto#L11-L12] extra-class"},[e("pre",{pre:!0,attrs:{class:"language-protobuf"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("message")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NextGame")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" fifoHead "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Will contain the index of the game at the head.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" fifoTail "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Will contain the index of the game at the tail.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("To make extraction possible each game needs to know which other game takes place before it in the FIFO, and which after. The right place to store this double link information is "),e("code",[t._v("StoredGame")]),t._v(". Thus, you add them in the game's Protobuf declaration:")]),t._v(" "),e("div",{staticClass:"language-protobuf [https://github.com/cosmos/b9-checkers-academy-draft/blob/2343af69cd1f2c22acfac13f46393aa8ce686685/proto/checkers/stored_game.proto#L16-L17] extra-class"},[e("pre",{pre:!0,attrs:{class:"language-protobuf"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("message")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StoredGame")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" beforeId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Pertains to the FIFO. Towards head.")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" afterId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Pertains to the FIFO. Towards tail.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v('There needs to be an "ID" that indicates '),e("em",[t._v("no game")]),t._v(". Let's use "),e("code",[t._v('"-1"')]),t._v(", which you save as a constant:")]),t._v(" "),e("div",{staticClass:"language-go [https://github.com/cosmos/b9-checkers-academy-draft/blob/2343af69cd1f2c22acfac13f46393aa8ce686685/x/checkers/types/keys.go#L32-L34] extra-class"},[e("pre",{pre:!0,attrs:{class:"language-go"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    NoFifoIdKey "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-1"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("Adjust the default genesis values, so that it has proper head and tail:")]),t._v(" "),e("div",{staticClass:"language-go [https://github.com/cosmos/b9-checkers-academy-draft/blob/2343af69cd1f2c22acfac13f46393aa8ce686685/x/checkers/types/genesis.go#L20-L21] extra-class"},[e("pre",{pre:!0,attrs:{class:"language-go"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("DefaultGenesis")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("GenesisState "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("GenesisState"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n        NextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("NextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n            FifoHead"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NoFifoIdKey"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            FifoTail"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NoFifoIdKey"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),e("p",[t._v("To have Starport and Protobuf recompile the files:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ starport chain build\n")])])]),e("h2",{attrs:{id:"fifo-management"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fifo-management"}},[t._v("#")]),t._v(" FIFO management")]),t._v(" "),e("p",[t._v("Now that the new fields are created, you need to update them accordingly to keep your FIFO always up-to-date. It's better to create a separate file that encapsulates this knowledge. Create "),e("code",[t._v("x/checkers/keeper/stored_game_in_fifo.go")]),t._v(" with:")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("A function to remove from the FIFO:")]),t._v(" "),e("div",{staticClass:"language-go [https://github.com/cosmos/b9-checkers-academy-draft/blob/2343af69cd1f2c22acfac13f46393aa8ce686685/x/checkers/keeper/stored_game_in_fifo.go#L9-L36] extra-class"},[e("pre",{pre:!0,attrs:{class:"language-go"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("k Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("RemoveFromFifo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx sdk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" game "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StoredGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Does it have a predecessor?")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BeforeId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        beforeElement"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" found "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" k"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetStoredGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BeforeId"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("found "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Element before in Fifo was not found"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        beforeElement"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AfterId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AfterId\n        k"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SetStoredGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" beforeElement"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AfterId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoTail "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" beforeElement"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Index\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Does it have a successor?")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AfterId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        afterElement"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" found "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" k"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetStoredGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AfterId"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("found "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Element after in Fifo was not found"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        afterElement"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BeforeId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BeforeId\n        k"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SetStoredGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" afterElement"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BeforeId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoHead "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" afterElement"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Index\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BeforeId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey\n    game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AfterId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("The game passed as an argument is "),e("strong",[t._v("not")]),t._v(" saved in storage here, even if it was updated. Only its fields in memory are adjusted. The "),e("em",[t._v("before")]),t._v(" and "),e("em",[t._v("after")]),t._v(" games are saved in storage. It is advised to do a "),e("code",[t._v("SetStoredGame")]),t._v(" after calling this function to avoid having a mix of saves and memory states. The same applies to "),e("code",[t._v("SetNextGame")]),t._v(".")])]),t._v(" "),e("li",[e("p",[t._v("A function to send to the tail:")]),t._v(" "),e("div",{staticClass:"language-go [https://github.com/cosmos/b9-checkers-academy-draft/blob/2343af69cd1f2c22acfac13f46393aa8ce686685/x/checkers/keeper/stored_game_in_fifo.go#L39-L63] extra-class"},[e("pre",{pre:!0,attrs:{class:"language-go"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("k Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SendToFifoTail")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx sdk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Context"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" game "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StoredGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoHead "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoTail "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BeforeId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey\n        game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AfterId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey\n        info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoHead "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Index\n        info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoTail "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Index\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoHead "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoTail "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" types"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoFifoIdKey "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Fifo should have both head and tail or none"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoTail "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Index "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Nothing to do, already at tail")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Snip game out")]),t._v("\n        k"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("RemoveFromFifo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Now add to tail")]),t._v("\n        currentTail"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" found "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" k"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetStoredGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoTail"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("found "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Current Fifo tail was not found"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        currentTail"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AfterId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Index\n        game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BeforeId "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentTail"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Index\n\n        info"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FifoTail "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Index\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),e("h2",{attrs:{id:"use-it"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#use-it"}},[t._v("#")]),t._v(" Use it")]),t._v(" "),e("p",[t._v("With these functions ready, it is time to use them in the message handlers.")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("In the handler when creating a new game, send the new game to the tail because it is freshly created:")]),t._v(" "),e("div",{staticClass:"language-go [https://github.com/cosmos/b9-checkers-academy-draft/blob/2343af69cd1f2c22acfac13f46393aa8ce686685/x/checkers/keeper/msg_server_create_game.go#L32] extra-class"},[e("pre",{pre:!0,attrs:{class:"language-go"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\nk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SendToFifoTail")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("storedGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("nextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SetStoredGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" storedGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("In the handler when playing a move, send the game back to the tail because it was freshly updated:")]),t._v(" "),e("div",{staticClass:"language-go [https://github.com/cosmos/b9-checkers-academy-draft/blob/2343af69cd1f2c22acfac13f46393aa8ce686685/x/checkers/keeper/msg_server_play_move.go#L58-L68] extra-class"},[e("pre",{pre:!0,attrs:{class:"language-go"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\nnextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" found "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" k"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetNextGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("found "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NextGame not found"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SendToFifoTail")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("storedGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("nextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nstoredGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Game "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" game"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\nk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SetNextGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("In the handler when rejecting a game, remove the game from the FIFO:")]),t._v(" "),e("div",{staticClass:"language-go [https://github.com/cosmos/b9-checkers-academy-draft/blob/2343af69cd1f2c22acfac13f46393aa8ce686685/x/checkers/keeper/msg_server_reject_game.go#L34-L42] extra-class"},[e("pre",{pre:!0,attrs:{class:"language-go"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\nnextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" found "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" k"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetNextGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("found "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NextGame not found"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("RemoveFromFifo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("storedGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("nextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("RemoveStoredGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msg"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IdValue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\nk"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Keeper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("SetNextGame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextGame"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])])])]),t._v(" "),e("p",[t._v("You implemented a FIFO that is updated but never really used.")]),t._v(" "),e("h2",{attrs:{id:"next-up"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#next-up"}},[t._v("#")]),t._v(" Next up")]),t._v(" "),e("p",[t._v("Now you need to add an expiry date on the games. That's the goal of the "),e("RouterLink",{attrs:{to:"/academy/4-my-own-chain/game-deadline.html"}},[t._v("next section")]),t._v(".")],1)],1)}),[],!1,null,null,null);a.default=n.exports}}]);